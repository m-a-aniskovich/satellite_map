import{Check,destroyObject,getElement}from"@cesium/engine";import knockout from"../ThirdParty/knockout.js";import InspectorShared from"../InspectorShared.js";import Cesium3DTilesInspectorViewModel from"./Cesium3DTilesInspectorViewModel.js";function Cesium3DTilesInspector(e,t){Check.defined("container",e),Check.typeOf.object("scene",t),e=getElement(e);const i=document.createElement("div"),n=document.createElement("div");n.setAttribute("data-bind","visible: performance");const s=new Cesium3DTilesInspectorViewModel(t,n);this._viewModel=s,this._container=e,this._element=i;const d=document.createElement("div");d.textContent="3D Tiles Inspector",d.className="cesium-cesiumInspector-button",d.setAttribute("data-bind","click: toggleInspector"),i.appendChild(d),i.className="cesium-cesiumInspector cesium-3DTilesInspector",i.setAttribute("data-bind",'css: { "cesium-cesiumInspector-visible" : inspectorVisible, "cesium-cesiumInspector-hidden" : !inspectorVisible}'),e.appendChild(i);const o=document.createElement("div");o.className="cesium-cesiumInspector-dropDown",i.appendChild(o);const a=InspectorShared.createSection,c=InspectorShared.createCheckbox,r=InspectorShared.createRangeInput,l=InspectorShared.createButton,p=a(o,"Tileset","tilesetVisible","toggleTileset"),m=a(o,"Display","displayVisible","toggleDisplay"),u=a(o,"Update","updateVisible","toggleUpdate"),h=a(o,"Logging","loggingVisible","toggleLogging"),C=a(o,"Tile Debug Labels","tileDebugLabelsVisible","toggleTileDebugLabels"),b=a(o,"Style","styleVisible","toggleStyle"),g=a(o,"Optimization","optimizationVisible","toggleOptimization"),S=document.createElement("div");S.className="field-group";const E=document.createElement("label");E.className="field-label",E.appendChild(document.createTextNode("Properties: "));const y=document.createElement("div");y.setAttribute("data-bind","text: properties"),S.appendChild(E),S.appendChild(y),p.appendChild(S),p.appendChild(l("Pick Tileset","togglePickTileset","pickActive")),p.appendChild(l("Trim Tiles Cache","trimTilesCache")),p.appendChild(c("Enable Picking","picking")),m.appendChild(c("Colorize","colorize"));const v=m.appendChild(c("Wireframe","wireframe","_tileset === undefined || hasEnabledWireframe")),D=document.createElement("p");D.setAttribute("data-bind","visible: _tileset !== undefined && !hasEnabledWireframe"),D.setAttribute("class","cesium-3DTilesInspector-disabledElementsInfo"),D.innerText="Set enableDebugWireframe to true in the tileset constructor to enable this option.",v.appendChild(D),m.appendChild(c("Bounding Volumes","showBoundingVolumes")),m.appendChild(c("Content Volumes","showContentBoundingVolumes")),m.appendChild(c("Request Volumes","showRequestVolumes")),m.appendChild(c("Point Cloud Shading","pointCloudShading"));const T=document.createElement("div");T.setAttribute("data-bind","visible: pointCloudShading"),T.appendChild(r("Geometric Error Scale","geometricErrorScale",0,2,.01)),T.appendChild(r("Maximum Attenuation","maximumAttenuation",0,32,1)),T.appendChild(r("Base Resolution","baseResolution",0,1,.01)),T.appendChild(c("Eye Dome Lighting (EDL)","eyeDomeLighting")),m.appendChild(T);const k=document.createElement("div");k.setAttribute("data-bind","visible: eyeDomeLighting"),k.appendChild(r("EDL Strength","eyeDomeLightingStrength",0,2,.1)),k.appendChild(r("EDL Radius","eyeDomeLightingRadius",0,4,.1)),T.appendChild(k),u.appendChild(c("Freeze Frame","freezeFrame")),u.appendChild(c("Dynamic Screen Space Error","dynamicScreenSpaceError"));const f=document.createElement("div");f.appendChild(r("Maximum Screen Space Error","maximumScreenSpaceError",0,128,1)),u.appendChild(f);const I=document.createElement("div");I.setAttribute("data-bind","visible: dynamicScreenSpaceError"),I.appendChild(r("Screen Space Error Density","dynamicScreenSpaceErrorDensitySliderValue",0,1,.005,"dynamicScreenSpaceErrorDensity")),I.appendChild(r("Screen Space Error Factor","dynamicScreenSpaceErrorFactor",1,10,.1)),u.appendChild(I),h.appendChild(c("Performance","performance")),h.appendChild(n),h.appendChild(c("Statistics","showStatistics"));const w=document.createElement("div");w.className="cesium-3dTilesInspector-statistics",w.setAttribute("data-bind","html: statisticsText, visible: showStatistics"),h.appendChild(w),h.appendChild(c("Pick Statistics","showPickStatistics"));const L=document.createElement("div");L.className="cesium-3dTilesInspector-statistics",L.setAttribute("data-bind","html: pickStatisticsText, visible: showPickStatistics"),h.appendChild(L),h.appendChild(c("Resource Cache Statistics","showResourceCacheStatistics"));const x=document.createElement("div");x.className="cesium-3dTilesInspector-statistics",x.setAttribute("data-bind","html: resourceCacheStatisticsText, visible: showResourceCacheStatistics"),h.appendChild(x);const V=document.createElement("div");b.appendChild(V),V.appendChild(document.createTextNode("Color Blend Mode: "));const A=document.createElement("select");A.setAttribute("data-bind",'options: colorBlendModes, optionsText: "text", optionsValue: "value", value: colorBlendMode'),V.appendChild(A);const M=document.createElement("textarea");M.setAttribute("data-bind","textInput: styleString, event: { keydown: styleEditorKeyPress }"),V.className="cesium-cesiumInspector-styleEditor",V.appendChild(M);const P=l("Compile (Ctrl+Enter)","compileStyle");V.appendChild(P);const N=document.createElement("div");N.className="cesium-cesiumInspector-error",N.setAttribute("data-bind","text: editorError"),V.appendChild(N),C.appendChild(c("Show Picked Only","showOnlyPickedTileDebugLabel")),C.appendChild(c("Geometric Error","showGeometricError")),C.appendChild(c("Rendering Statistics","showRenderingStatistics")),C.appendChild(c("Memory Usage (MB)","showMemoryUsage")),C.appendChild(c("Url","showUrl")),g.appendChild(c("Skip Tile LODs","skipLevelOfDetail"));const O=document.createElement("div");O.appendChild(r("Skip SSE Factor","skipScreenSpaceErrorFactor",1,50,1)),g.appendChild(O);const R=document.createElement("div");R.appendChild(r("SSE before skipping LOD","baseScreenSpaceError",0,4096,1)),g.appendChild(R);const B=document.createElement("div");B.appendChild(r("Min. levels to skip","skipLevels",0,10,1)),g.appendChild(B),g.appendChild(c("Load only tiles that meet the max SSE.","immediatelyLoadDesiredLevelOfDetail")),g.appendChild(c("Load siblings of visible tiles","loadSiblings")),knockout.applyBindings(s,i)}Object.defineProperties(Cesium3DTilesInspector.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),Cesium3DTilesInspector.prototype.isDestroyed=function(){return!1},Cesium3DTilesInspector.prototype.destroy=function(){return knockout.cleanNode(this._element),this._container.removeChild(this._element),this.viewModel.destroy(),destroyObject(this)};export default Cesium3DTilesInspector;