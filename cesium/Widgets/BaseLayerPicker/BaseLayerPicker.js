import{defined,destroyObject,DeveloperError,FeatureDetection,getElement}from"@cesium/engine";import knockout from"../ThirdParty/knockout.js";import BaseLayerPickerViewModel from"./BaseLayerPickerViewModel.js";function BaseLayerPicker(e,t){if(!defined(e))throw new DeveloperError("container is required.");e=getElement(e);const i=new BaseLayerPickerViewModel(t),a=document.createElement("button");a.type="button",a.className="cesium-button cesium-toolbar-button",a.setAttribute("data-bind","attr: { title: buttonTooltip },click: toggleDropDown"),e.appendChild(a);const n=document.createElement("img");n.setAttribute("draggable","false"),n.className="cesium-baseLayerPicker-selected",n.setAttribute("data-bind","attr: { src: buttonImageUrl }, visible: !!buttonImageUrl"),a.appendChild(n);const r=document.createElement("div");r.className="cesium-baseLayerPicker-dropDown",r.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-dropDown-visible" : dropDownVisible }'),e.appendChild(r);const s=document.createElement("div");s.className="cesium-baseLayerPicker-sectionTitle",s.setAttribute("data-bind","visible: imageryProviderViewModels.length > 0"),s.innerHTML="Imagery",r.appendChild(s);const c=document.createElement("div");c.className="cesium-baseLayerPicker-section",c.setAttribute("data-bind","foreach: _imageryProviders"),r.appendChild(c);const o=document.createElement("div");o.className="cesium-baseLayerPicker-category",c.appendChild(o);const d=document.createElement("div");d.className="cesium-baseLayerPicker-categoryTitle",d.setAttribute("data-bind","text: name"),o.appendChild(d);const l=document.createElement("div");l.className="cesium-baseLayerPicker-choices",l.setAttribute("data-bind","foreach: providers"),o.appendChild(l);const m=document.createElement("div");m.className="cesium-baseLayerPicker-item",m.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parents[1].selectedImagery },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedImagery = $data; }'),l.appendChild(m);const u=document.createElement("img");u.className="cesium-baseLayerPicker-itemIcon",u.setAttribute("data-bind","attr: { src: iconUrl }"),u.setAttribute("draggable","false"),m.appendChild(u);const p=document.createElement("div");p.className="cesium-baseLayerPicker-itemLabel",p.setAttribute("data-bind","text: name"),m.appendChild(p);const b=document.createElement("div");b.className="cesium-baseLayerPicker-sectionTitle",b.setAttribute("data-bind","visible: terrainProviderViewModels.length > 0"),b.innerHTML="Terrain",r.appendChild(b);const h=document.createElement("div");h.className="cesium-baseLayerPicker-section",h.setAttribute("data-bind","foreach: _terrainProviders"),r.appendChild(h);const y=document.createElement("div");y.className="cesium-baseLayerPicker-category",h.appendChild(y);const v=document.createElement("div");v.className="cesium-baseLayerPicker-categoryTitle",v.setAttribute("data-bind","text: name"),y.appendChild(v);const k=document.createElement("div");k.className="cesium-baseLayerPicker-choices",k.setAttribute("data-bind","foreach: providers"),y.appendChild(k);const P=document.createElement("div");P.className="cesium-baseLayerPicker-item",P.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parents[1].selectedTerrain },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedTerrain = $data; }'),k.appendChild(P);const L=document.createElement("img");L.className="cesium-baseLayerPicker-itemIcon",L.setAttribute("data-bind","attr: { src: iconUrl }"),L.setAttribute("draggable","false"),P.appendChild(L);const g=document.createElement("div");g.className="cesium-baseLayerPicker-itemLabel",g.setAttribute("data-bind","text: name"),P.appendChild(g),knockout.applyBindings(i,a),knockout.applyBindings(i,r),this._viewModel=i,this._container=e,this._element=a,this._dropPanel=r,this._closeDropDown=function(e){a.contains(e.target)||r.contains(e.target)||(i.dropDownVisible=!1)},FeatureDetection.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(BaseLayerPicker.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),BaseLayerPicker.prototype.isDestroyed=function(){return!1},BaseLayerPicker.prototype.destroy=function(){return FeatureDetection.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),knockout.cleanNode(this._element),knockout.cleanNode(this._dropPanel),this._container.removeChild(this._element),this._container.removeChild(this._dropPanel),destroyObject(this)};export default BaseLayerPicker;