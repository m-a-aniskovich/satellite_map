/*! For license information please see transcodeKTX2.js.LICENSE.txt */
import{createTaskProcessorWorker_default}from"./chunk-AI3KSNM6.js";import{WebGLConstants_default}from"./chunk-VNRUVNIK.js";import{RuntimeError_default}from"./chunk-66CXKODF.js";import{defaultValue_default}from"./chunk-C53JYYKX.js";import{Check_default}from"./chunk-7FEGZO3D.js";import{__commonJS,__require,__toESM,defined_default}from"./chunk-YS4KPNLC.js";var require_basis_transcoder=__commonJS({"packages/engine/Source/ThirdParty/Workers/basis_transcoder.js"(t,e){var r,n=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(r=r||__filename),function(t){var e,n,_=void 0!==(t=t||{})?t:{};_.ready=new Promise((function(t,r){e=t,n=r}));var a,o={};for(a in _)_.hasOwnProperty(a)&&(o[a]=_[a]);var i,s,u,l,R=[];u="object"==typeof window,l="function"==typeof importScripts,i="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,s=!u&&!i&&!l;var c,f,T,A,d,O="";i?(O=l?__require("path").dirname(O)+"/":__dirname+"/",c=function(t,e){return A||(A=__require("fs")),d||(d=__require("path")),t=d.normalize(t),A.readFileSync(t,e?null:"utf8")},T=function(t){var e=c(t,!0);return e.buffer||(e=new Uint8Array(e)),M(e.buffer),e},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),R=process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof Me))throw t})),process.on("unhandledRejection",Z),_.inspect=function(){return"[Emscripten Module object]"}):s?("undefined"!=typeof read&&(c=function(t){return read(t)}),T=function(t){var e;return"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(M("object"==typeof(e=read(t,"binary"))),e)},"undefined"!=typeof scriptArgs?R=scriptArgs:void 0!==arguments&&(R=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(u||l)&&(l?O=self.location.href:"undefined"!=typeof document&&document.currentScript&&(O=document.currentScript.src),r&&(O=r),O=0!==O.indexOf("blob:")?O.substr(0,O.lastIndexOf("/")+1):"",c=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},l&&(T=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=function(t,e,r){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?e(n.response):r()},n.onerror=r,n.send(null)});var p,C,F=_.print||console.log.bind(console),P=_.printErr||console.warn.bind(console);for(a in o)o.hasOwnProperty(a)&&(_[a]=o[a]);o=null,_.arguments&&(R=_.arguments),_.thisProgram&&_.thisProgram,_.quit&&_.quit,_.wasmBinary&&(p=_.wasmBinary),_.noExitRuntime,"object"!=typeof WebAssembly&&Z("no native wasm support detected");var B=!1;function M(t,e){t||Z("Assertion failed: "+e)}var K="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function G(t,e,r){for(var n=e+r,_=e;t[_]&&!(_>=n);)++_;if(_-e>16&&t.subarray&&K)return K.decode(t.subarray(e,_));for(var a="";e<_;){var o=t[e++];if(128&o){var i=63&t[e++];if(192!=(224&o)){var s=63&t[e++];if((o=224==(240&o)?(15&o)<<12|i<<6|s:(7&o)<<18|i<<12|s<<6|63&t[e++])<65536)a+=String.fromCharCode(o);else{var u=o-65536;a+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else a+=String.fromCharCode((31&o)<<6|i)}else a+=String.fromCharCode(o)}return a}function h(t,e){return t?G(S,t,e):""}var m,y,S,N,V,E,v,U,x,g="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function L(t,e){for(var r=t,n=r>>1,_=n+e/2;!(n>=_)&&V[n];)++n;if((r=n<<1)-t>32&&g)return g.decode(S.subarray(t,r));for(var a="",o=0;!(o>=e/2);++o){var i=N[t+2*o>>1];if(0==i)break;a+=String.fromCharCode(i)}return a}function D(t,e,r){if(void 0===r&&(r=2147483647),r<2)return 0;for(var n=e,_=(r-=2)<2*t.length?r/2:t.length,a=0;a<_;++a){var o=t.charCodeAt(a);N[e>>1]=o,e+=2}return N[e>>1]=0,e-n}function b(t){return 2*t.length}function w(t,e){for(var r=0,n="";!(r>=e/4);){var _=E[t+4*r>>2];if(0==_)break;if(++r,_>=65536){var a=_-65536;n+=String.fromCharCode(55296|a>>10,56320|1023&a)}else n+=String.fromCharCode(_)}return n}function I(t,e,r){if(void 0===r&&(r=2147483647),r<4)return 0;for(var n=e,_=n+r-4,a=0;a<t.length;++a){var o=t.charCodeAt(a);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++a)),E[e>>2]=o,(e+=4)+4>_)break}return E[e>>2]=0,e-n}function X(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n>=55296&&n<=57343&&++r,e+=4}return e}function H(t){m=t,_.HEAP8=y=new Int8Array(t),_.HEAP16=N=new Int16Array(t),_.HEAP32=E=new Int32Array(t),_.HEAPU8=S=new Uint8Array(t),_.HEAPU16=V=new Uint16Array(t),_.HEAPU32=v=new Uint32Array(t),_.HEAPF32=U=new Float32Array(t),_.HEAPF64=x=new Float64Array(t)}_.INITIAL_MEMORY;var W,$=[],k=[],j=[],z=[],Y=0,q=null,J=null;function Z(t){_.onAbort&&_.onAbort(t),P(t+=""),B=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(t);throw n(e),e}function Q(t,e){return String.prototype.startsWith?t.startsWith(e):0===t.indexOf(e)}_.preloadedImages={},_.preloadedAudios={};function tt(t){return Q(t,"data:application/octet-stream;base64,")}function et(t){return Q(t,"file://")}var rt,nt="basis_transcoder.wasm";function _t(t){try{if(t==nt&&p)return new Uint8Array(p);if(T)return T(t);throw"both async and sync fetching of the wasm failed"}catch(t){Z(t)}}function at(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var r=e.func;"number"==typeof r?void 0===e.arg?W.get(r)():W.get(r)(e.arg):r(void 0===e.arg?null:e.arg)}else e(_)}}tt(nt)||(rt=nt,nt=_.locateFile?_.locateFile(rt,O):O+rt);var ot={};function it(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function st(t){return this.fromWireType(v[t>>2])}var ut={},lt={},Rt={},ct=48,ft=57;function Tt(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=ct&&e<=ft?"_"+t:t}function At(t,e){return t=Tt(t),new Function("body","return function "+t+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}function dt(t,e){var r=At(e,(function(t){this.name=e,this.message=t;var r=new Error(t).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var Ot=void 0;function pt(t){throw new Ot(t)}function Ct(t,e,r){function n(e){var n=r(e);n.length!==t.length&&pt("Mismatched type converter count");for(var _=0;_<t.length;++_)Gt(t[_],n[_])}t.forEach((function(t){Rt[t]=e}));var _=new Array(e.length),a=[],o=0;e.forEach((function(t,e){lt.hasOwnProperty(t)?_[e]=lt[t]:(a.push(t),ut.hasOwnProperty(t)||(ut[t]=[]),ut[t].push((function(){_[e]=lt[t],++o===a.length&&n(_)})))})),0===a.length&&n(_)}function Ft(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}var Pt=void 0;function Bt(t){for(var e="",r=t;S[r];)e+=Pt[S[r++]];return e}var Mt=void 0;function Kt(t){throw new Mt(t)}function Gt(t,e,r){if(r=r||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=e.name;if(t||Kt('type "'+n+'" must have a positive integer typeid pointer'),lt.hasOwnProperty(t)){if(r.ignoreDuplicateRegistrations)return;Kt("Cannot register type '"+n+"' twice")}if(lt[t]=e,delete Rt[t],ut.hasOwnProperty(t)){var _=ut[t];delete ut[t],_.forEach((function(t){t()}))}}function ht(t){Kt(t.$$.ptrType.registeredClass.name+" instance already deleted")}var mt=!1;function yt(t){}function St(t){t.count.value-=1,0===t.count.value&&function(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}(t)}function Nt(t){return"undefined"==typeof FinalizationGroup?(Nt=function(t){return t},t):(mt=new FinalizationGroup((function(t){for(var e=t.next();!e.done;e=t.next()){var r=e.value;r.ptr?St(r):console.warn("object already deleted: "+r.ptr)}})),yt=function(t){mt.unregister(t.$$)},(Nt=function(t){return mt.register(t,t.$$,t.$$),t})(t))}var Vt=void 0,Et=[];function vt(){for(;Et.length;){var t=Et.pop();t.$$.deleteScheduled=!1,t.delete()}}function Ut(){}var xt={};function gt(t,e,r){if(void 0===t[e].overloadTable){var n=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||Kt("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[n.argCount]=n}}function Lt(t,e,r){_.hasOwnProperty(t)?((void 0===r||void 0!==_[t].overloadTable&&void 0!==_[t].overloadTable[r])&&Kt("Cannot register public name '"+t+"' twice"),gt(_,t,t),_.hasOwnProperty(r)&&Kt("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),_[t].overloadTable[r]=e):(_[t]=e,void 0!==r&&(_[t].numArguments=r))}function Dt(t,e,r,n,_,a,o,i){this.name=t,this.constructor=e,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=_,this.getActualType=a,this.upcast=o,this.downcast=i,this.pureVirtualFunctions=[]}function bt(t,e,r){for(;e!==r;)e.upcast||Kt("Expected null or instance of "+r.name+", got an instance of "+e.name),t=e.upcast(t),e=e.baseClass;return t}function wt(t,e){if(null===e)return this.isReference&&Kt("null is not a valid "+this.name),0;e.$$||Kt('Cannot pass "'+ie(e)+'" as a '+this.name),e.$$.ptr||Kt("Cannot pass deleted object as a pointer of type "+this.name);var r=e.$$.ptrType.registeredClass;return bt(e.$$.ptr,r,this.registeredClass)}function It(t,e){var r;if(null===e)return this.isReference&&Kt("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,r),r):0;e.$$||Kt('Cannot pass "'+ie(e)+'" as a '+this.name),e.$$.ptr||Kt("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&Kt("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);var n=e.$$.ptrType.registeredClass;if(r=bt(e.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&Kt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?r=e.$$.smartPtr:Kt("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)r=e.$$.smartPtr;else{var _=e.clone();r=this.rawShare(r,_e((function(){_.delete()}))),null!==t&&t.push(this.rawDestructor,r)}break;default:Kt("Unsupporting sharing policy")}return r}function Xt(t,e){if(null===e)return this.isReference&&Kt("null is not a valid "+this.name),0;e.$$||Kt('Cannot pass "'+ie(e)+'" as a '+this.name),e.$$.ptr||Kt("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&Kt("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var r=e.$$.ptrType.registeredClass;return bt(e.$$.ptr,r,this.registeredClass)}function Ht(t,e,r){if(e===r)return t;if(void 0===r.baseClass)return null;var n=Ht(t,e,r.baseClass);return null===n?null:r.downcast(n)}var Wt={};function $t(t,e){return e.ptrType&&e.ptr||pt("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!=!!e.smartPtr&&pt("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Nt(Object.create(t,{$$:{value:e}}))}function kt(t,e,r,n,_,a,o,i,s,u,l){this.name=t,this.registeredClass=e,this.isReference=r,this.isConst=n,this.isSmartPointer=_,this.pointeeType=a,this.sharingPolicy=o,this.rawGetPointee=i,this.rawConstructor=s,this.rawShare=u,this.rawDestructor=l,_||void 0!==e.baseClass?this.toWireType=It:n?(this.toWireType=wt,this.destructorFunction=null):(this.toWireType=Xt,this.destructorFunction=null)}function jt(t,e,r){_.hasOwnProperty(t)||pt("Replacing nonexistant public symbol"),void 0!==_[t].overloadTable&&void 0!==r?_[t].overloadTable[r]=e:(_[t]=e,_[t].argCount=r)}function zt(t,e){var r,n,a,o=-1!=(t=Bt(t)).indexOf("j")?(r=t,n=e,a=[],function(){a.length=arguments.length;for(var t=0;t<arguments.length;t++)a[t]=arguments[t];return function(t,e,r){return-1!=t.indexOf("j")?function(t,e,r){var n=_["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}(t,e,r):W.get(e).apply(null,r)}(r,n,a)}):W.get(e);return"function"!=typeof o&&Kt("unknown function pointer with signature "+t+": "+e),o}var Yt=void 0;function qt(t){var e=Be(t),r=Bt(e);return Pe(e),r}function Jt(t,e){var r=[],n={};throw e.forEach((function t(e){n[e]||lt[e]||(Rt[e]?Rt[e].forEach(t):(r.push(e),n[e]=!0))})),new Yt(t+": "+r.map(qt).join([", "]))}function Zt(t,e){for(var r=[],n=0;n<t;n++)r.push(E[(e>>2)+n]);return r}function Qt(t,e){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var r=At(t.name||"unknownFunctionName",(function(){}));r.prototype=t.prototype;var n=new r,_=t.apply(n,e);return _ instanceof Object?_:n}function te(t,e,r,n,_){var a=e.length;a<2&&Kt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==e[1]&&null!==r,i=!1,s=1;s<e.length;++s)if(null!==e[s]&&void 0===e[s].destructorFunction){i=!0;break}var u="void"!==e[0].name,l="",R="";for(s=0;s<a-2;++s)l+=(0!==s?", ":"")+"arg"+s,R+=(0!==s?", ":"")+"arg"+s+"Wired";var c="return function "+Tt(t)+"("+l+") {\nif (arguments.length !== "+(a-2)+") {\nthrowBindingError('function "+t+" called with ' + arguments.length + ' arguments, expected "+(a-2)+" args!');\n}\n";i&&(c+="var destructors = [];\n");var f=i?"destructors":"null",T=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],A=[Kt,n,_,it,e[0],e[1]];for(o&&(c+="var thisWired = classParam.toWireType("+f+", this);\n"),s=0;s<a-2;++s)c+="var arg"+s+"Wired = argType"+s+".toWireType("+f+", arg"+s+"); // "+e[s+2].name+"\n",T.push("argType"+s),A.push(e[s+2]);if(o&&(R="thisWired"+(R.length>0?", ":"")+R),c+=(u?"var rv = ":"")+"invoker(fn"+(R.length>0?", ":"")+R+");\n",i)c+="runDestructors(destructors);\n";else for(s=o?1:2;s<e.length;++s){var d=1===s?"thisWired":"arg"+(s-2)+"Wired";null!==e[s].destructorFunction&&(c+=d+"_dtor("+d+"); // "+e[s].name+"\n",T.push(d+"_dtor"),A.push(e[s].destructorFunction))}return u&&(c+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),c+="}\n",T.push(c),Qt(Function,T).apply(null,A)}var ee=[],re=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ne(t){t>4&&0==--re[t].refcount&&(re[t]=void 0,ee.push(t))}function _e(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=ee.length?ee.pop():re.length;return re[e]={refcount:1,value:t},e}}function ae(t,e,r){switch(e){case 0:return function(t){var e=r?y:S;return this.fromWireType(e[t])};case 1:return function(t){var e=r?N:V;return this.fromWireType(e[t>>1])};case 2:return function(t){var e=r?E:v;return this.fromWireType(e[t>>2])};default:throw new TypeError("Unknown integer type: "+t)}}function oe(t,e){var r=lt[t];return void 0===r&&Kt(e+" has unknown type "+qt(t)),r}function ie(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function se(t,e){switch(e){case 2:return function(t){return this.fromWireType(U[t>>2])};case 3:return function(t){return this.fromWireType(x[t>>3])};default:throw new TypeError("Unknown float type: "+t)}}function ue(t,e,r){switch(e){case 0:return r?function(t){return y[t]}:function(t){return S[t]};case 1:return r?function(t){return N[t>>1]}:function(t){return V[t>>1]};case 2:return r?function(t){return E[t>>2]}:function(t){return v[t>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function le(t){return t||Kt("Cannot use deleted val. handle = "+t),re[t].value}var Re={};function ce(t){var e=Re[t];return void 0===e?Bt(t):e}var fe=[];function Te(){return"object"==typeof globalThis?globalThis:function(){return Function}()("return this")()}var Ae={};function de(t){try{return C.grow(t-m.byteLength+65535>>>16),H(C.buffer),1}catch(t){}}var Oe={mappings:{},buffers:[null,[],[]],printChar:function(t,e){var r=Oe.buffers[t];0===e||10===e?((1===t?F:P)(G(r,0)),r.length=0):r.push(e)},varargs:void 0,get:function(){return Oe.varargs+=4,E[Oe.varargs-4>>2]},getStr:function(t){return h(t)},get64:function(t,e){return t}};Ot=_.InternalError=dt(Error,"InternalError"),function(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);Pt=t}(),Mt=_.BindingError=dt(Error,"BindingError"),Ut.prototype.isAliasOf=function(t){if(!(this instanceof Ut))return!1;if(!(t instanceof Ut))return!1;for(var e=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=t.$$.ptrType.registeredClass,_=t.$$.ptr;e.baseClass;)r=e.upcast(r),e=e.baseClass;for(;n.baseClass;)_=n.upcast(_),n=n.baseClass;return e===n&&r===_},Ut.prototype.clone=function(){if(this.$$.ptr||ht(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t,e=Nt(Object.create(Object.getPrototypeOf(this),{$$:{value:(t=this.$$,{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType})}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},Ut.prototype.delete=function(){this.$$.ptr||ht(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Kt("Object already scheduled for deletion"),yt(this),St(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},Ut.prototype.isDeleted=function(){return!this.$$.ptr},Ut.prototype.deleteLater=function(){return this.$$.ptr||ht(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Kt("Object already scheduled for deletion"),Et.push(this),1===Et.length&&Vt&&Vt(vt),this.$$.deleteScheduled=!0,this},kt.prototype.getPointee=function(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},kt.prototype.destructor=function(t){this.rawDestructor&&this.rawDestructor(t)},kt.prototype.argPackAdvance=8,kt.prototype.readValueFromPointer=st,kt.prototype.deleteObject=function(t){null!==t&&t.delete()},kt.prototype.fromWireType=function(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var r=function(t,e){return e=function(t,e){for(void 0===e&&Kt("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}(t,e),Wt[e]}(this.registeredClass,e);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=e,r.$$.smartPtr=t,r.clone();var n=r.clone();return this.destructor(t),n}function _(){return this.isSmartPointer?$t(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):$t(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var a,o=this.registeredClass.getActualType(e),i=xt[o];if(!i)return _.call(this);a=this.isConst?i.constPointerType:i.pointerType;var s=Ht(e,this.registeredClass,a.registeredClass);return null===s?_.call(this):this.isSmartPointer?$t(a.registeredClass.instancePrototype,{ptrType:a,ptr:s,smartPtrType:this,smartPtr:t}):$t(a.registeredClass.instancePrototype,{ptrType:a,ptr:s})},_.getInheritedInstanceCount=function(){return Object.keys(Wt).length},_.getLiveInheritedInstances=function(){var t=[];for(var e in Wt)Wt.hasOwnProperty(e)&&t.push(Wt[e]);return t},_.flushPendingDeletes=vt,_.setDelayFunction=function(t){Vt=t,Et.length&&Vt&&Vt(vt)},Yt=_.UnboundTypeError=dt(Error,"UnboundTypeError"),_.count_emval_handles=function(){for(var t=0,e=5;e<re.length;++e)void 0!==re[e]&&++t;return t},_.get_first_emval=function(){for(var t=5;t<re.length;++t)if(void 0!==re[t])return re[t];return null};var pe,Ce={t:function(t){var e=ot[t];delete ot[t];var r=e.rawConstructor,n=e.rawDestructor,_=e.fields;Ct([t],_.map((function(t){return t.getterReturnType})).concat(_.map((function(t){return t.setterArgumentType}))),(function(t){var a={};return _.forEach((function(e,r){var n=e.fieldName,o=t[r],i=e.getter,s=e.getterContext,u=t[r+_.length],l=e.setter,R=e.setterContext;a[n]={read:function(t){return o.fromWireType(i(s,t))},write:function(t,e){var r=[];l(R,t,u.toWireType(r,e)),it(r)}}})),[{name:e.name,fromWireType:function(t){var e={};for(var r in a)e[r]=a[r].read(t);return n(t),e},toWireType:function(t,e){for(var _ in a)if(!(_ in e))throw new TypeError('Missing field:  "'+_+'"');var o=r();for(_ in a)a[_].write(o,e[_]);return null!==t&&t.push(n,o),o},argPackAdvance:8,readValueFromPointer:st,destructorFunction:n}]}))},I:function(t,e,r,n,_){var a=Ft(r);Gt(t,{name:e=Bt(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?n:_},argPackAdvance:8,readValueFromPointer:function(t){var n;if(1===r)n=y;else if(2===r)n=N;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+e);n=E}return this.fromWireType(n[t>>a])},destructorFunction:null})},x:function(t,e,r,n,_,a,o,i,s,u,l,R,c){l=Bt(l),a=zt(_,a),i&&(i=zt(o,i)),u&&(u=zt(s,u)),c=zt(R,c);var f=Tt(l);Lt(f,(function(){Jt("Cannot construct "+l+" due to unbound types",[n])})),Ct([t,e,r],n?[n]:[],(function(e){var r,_;e=e[0],_=n?(r=e.registeredClass).instancePrototype:Ut.prototype;var o=At(f,(function(){if(Object.getPrototypeOf(this)!==s)throw new Mt("Use 'new' to construct "+l);if(void 0===R.constructor_body)throw new Mt(l+" has no accessible constructor");var t=R.constructor_body[arguments.length];if(void 0===t)throw new Mt("Tried to invoke ctor of "+l+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(R.constructor_body).toString()+") parameters instead!");return t.apply(this,arguments)})),s=Object.create(_,{constructor:{value:o}});o.prototype=s;var R=new Dt(l,o,s,c,r,a,i,u),T=new kt(l,R,!0,!1,!1),A=new kt(l+"*",R,!1,!1,!1),d=new kt(l+" const*",R,!1,!0,!1);return xt[t]={pointerType:A,constPointerType:d},jt(f,o),[T,A,d]}))},w:function(t,e,r,n,_,a){M(e>0);var o=Zt(e,r);_=zt(n,_);var i=[a],s=[];Ct([],[t],(function(t){var r="constructor "+(t=t[0]).name;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new Mt("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+t.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return t.registeredClass.constructor_body[e-1]=function(){Jt("Cannot construct "+t.name+" due to unbound types",o)},Ct([],o,(function(n){return t.registeredClass.constructor_body[e-1]=function(){arguments.length!==e-1&&Kt(r+" called with "+arguments.length+" arguments, expected "+(e-1)),s.length=0,i.length=e;for(var t=1;t<e;++t)i[t]=n[t].toWireType(s,arguments[t-1]);var a=_.apply(null,i);return it(s),n[0].fromWireType(a)},[]})),[]}))},d:function(t,e,r,n,_,a,o,i){var s=Zt(r,n);e=Bt(e),a=zt(_,a),Ct([],[t],(function(t){var n=(t=t[0]).name+"."+e;function _(){Jt("Cannot call "+n+" due to unbound types",s)}i&&t.registeredClass.pureVirtualFunctions.push(e);var u=t.registeredClass.instancePrototype,l=u[e];return void 0===l||void 0===l.overloadTable&&l.className!==t.name&&l.argCount===r-2?(_.argCount=r-2,_.className=t.name,u[e]=_):(gt(u,e,n),u[e].overloadTable[r-2]=_),Ct([],s,(function(_){var i=te(n,_,t,a,o);return void 0===u[e].overloadTable?(i.argCount=r-2,u[e]=i):u[e].overloadTable[r-2]=i,[]})),[]}))},k:function(t,e,r){t=Bt(t),Ct([],[e],(function(e){return e=e[0],_[t]=e.fromWireType(r),[]}))},H:function(t,e){Gt(t,{name:e=Bt(e),fromWireType:function(t){var e=re[t].value;return ne(t),e},toWireType:function(t,e){return _e(e)},argPackAdvance:8,readValueFromPointer:st,destructorFunction:null})},n:function(t,e,r,n){var _=Ft(r);function a(){}e=Bt(e),a.values={},Gt(t,{name:e,constructor:a,fromWireType:function(t){return this.constructor.values[t]},toWireType:function(t,e){return e.value},argPackAdvance:8,readValueFromPointer:ae(e,_,n),destructorFunction:null}),Lt(e,a)},a:function(t,e,r){var n=oe(t,"enum");e=Bt(e);var _=n.constructor,a=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:At(n.name+"_"+e,(function(){}))}});_.values[r]=a,_[e]=a},A:function(t,e,r){var n=Ft(r);Gt(t,{name:e=Bt(e),fromWireType:function(t){return t},toWireType:function(t,e){if("number"!=typeof e&&"boolean"!=typeof e)throw new TypeError('Cannot convert "'+ie(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:se(e,n),destructorFunction:null})},i:function(t,e,r,n,_,a){var o=Zt(e,r);t=Bt(t),_=zt(n,_),Lt(t,(function(){Jt("Cannot call "+t+" due to unbound types",o)}),e-1),Ct([],o,(function(r){var n=[r[0],null].concat(r.slice(1));return jt(t,te(t,n,null,_,a),e-1),[]}))},j:function(t,e,r,n,_){e=Bt(e),-1===_&&(_=4294967295);var a=Ft(r),o=function(t){return t};if(0===n){var i=32-8*r;o=function(t){return t<<i>>>i}}var s=-1!=e.indexOf("unsigned");Gt(t,{name:e,fromWireType:o,toWireType:function(t,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+ie(r)+'" to '+this.name);if(r<n||r>_)throw new TypeError('Passing a number "'+ie(r)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+n+", "+_+"]!");return s?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:ue(e,a,0!==n),destructorFunction:null})},h:function(t,e,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function _(t){var e=v,r=e[t>>=2],_=e[t+1];return new n(m,_,r)}Gt(t,{name:r=Bt(r),fromWireType:_,argPackAdvance:8,readValueFromPointer:_},{ignoreDuplicateRegistrations:!0})},B:function(t,e){var r="std::string"===(e=Bt(e));Gt(t,{name:e,fromWireType:function(t){var e,n=v[t>>2];if(r)for(var _=t+4,a=0;a<=n;++a){var o=t+4+a;if(a==n||0==S[o]){var i=h(_,o-_);void 0===e?e=i:(e+=String.fromCharCode(0),e+=i),_=o+1}}else{var s=new Array(n);for(a=0;a<n;++a)s[a]=String.fromCharCode(S[t+4+a]);e=s.join("")}return Pe(t),e},toWireType:function(t,e){var n;e instanceof ArrayBuffer&&(e=new Uint8Array(e));var _="string"==typeof e;_||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||Kt("Cannot pass non-string to std::string"),n=r&&_?function(){return function(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&t.charCodeAt(++r)),n<=127?++e:e+=n<=2047?2:n<=65535?3:4}return e}(e)}:function(){return e.length};var a=n(),o=Fe(4+a+1);if(v[o>>2]=a,r&&_)!function(t,e,r,n){if(!(n>0))return 0;for(var _=r+n-1,a=0;a<t.length;++a){var o=t.charCodeAt(a);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++a)),o<=127){if(r>=_)break;e[r++]=o}else if(o<=2047){if(r+1>=_)break;e[r++]=192|o>>6,e[r++]=128|63&o}else if(o<=65535){if(r+2>=_)break;e[r++]=224|o>>12,e[r++]=128|o>>6&63,e[r++]=128|63&o}else{if(r+3>=_)break;e[r++]=240|o>>18,e[r++]=128|o>>12&63,e[r++]=128|o>>6&63,e[r++]=128|63&o}}e[r]=0}(e,S,o+4,a+1);else if(_)for(var i=0;i<a;++i){var s=e.charCodeAt(i);s>255&&(Pe(o),Kt("String has UTF-16 code units that do not fit in 8 bits")),S[o+4+i]=s}else for(i=0;i<a;++i)S[o+4+i]=e[i];return null!==t&&t.push(Pe,o),o},argPackAdvance:8,readValueFromPointer:st,destructorFunction:function(t){Pe(t)}})},v:function(t,e,r){var n,_,a,o,i;r=Bt(r),2===e?(n=L,_=D,o=b,a=function(){return V},i=1):4===e&&(n=w,_=I,o=X,a=function(){return v},i=2),Gt(t,{name:r,fromWireType:function(t){for(var r,_=v[t>>2],o=a(),s=t+4,u=0;u<=_;++u){var l=t+4+u*e;if(u==_||0==o[l>>i]){var R=n(s,l-s);void 0===r?r=R:(r+=String.fromCharCode(0),r+=R),s=l+e}}return Pe(t),r},toWireType:function(t,n){"string"!=typeof n&&Kt("Cannot pass non-string to C++ string type "+r);var a=o(n),s=Fe(4+a+e);return v[s>>2]=a>>i,_(n,s+4,a+e),null!==t&&t.push(Pe,s),s},argPackAdvance:8,readValueFromPointer:st,destructorFunction:function(t){Pe(t)}})},u:function(t,e,r,n,_,a){ot[t]={name:Bt(e),rawConstructor:zt(r,n),rawDestructor:zt(_,a),fields:[]}},c:function(t,e,r,n,_,a,o,i,s,u){ot[t].fields.push({fieldName:Bt(e),getterReturnType:r,getter:zt(n,_),getterContext:a,setterArgumentType:o,setter:zt(i,s),setterContext:u})},J:function(t,e){Gt(t,{isVoid:!0,name:e=Bt(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})},m:function(t,e,r){t=le(t),e=oe(e,"emval::as");var n=[],_=_e(n);return E[r>>2]=_,e.toWireType(n,t)},s:function(t,e,r,n){(t=fe[t])(e=le(e),r=ce(r),null,n)},b:ne,y:function(t){return 0===t?_e(Te()):(t=ce(t),_e(Te()[t]))},p:function(t,e){for(var r=function(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=oe(E[(e>>2)+n],"parameter "+n);return r}(t,e),n=r[0],_=n.name+"_$"+r.slice(1).map((function(t){return t.name})).join("_")+"$",a=["retType"],o=[n],i="",s=0;s<t-1;++s)i+=(0!==s?", ":"")+"arg"+s,a.push("argType"+s),o.push(r[1+s]);var u,l,R="return function "+Tt("methodCaller_"+_)+"(handle, name, destructors, args) {\n",c=0;for(s=0;s<t-1;++s)R+="    var arg"+s+" = argType"+s+".readValueFromPointer(args"+(c?"+"+c:"")+");\n",c+=r[s+1].argPackAdvance;for(R+="    var rv = handle[name]("+i+");\n",s=0;s<t-1;++s)r[s+1].deleteObject&&(R+="    argType"+s+".deleteObject(arg"+s+");\n");return n.isVoid||(R+="    return retType.toWireType(destructors, rv);\n"),R+="};\n",a.push(R),u=Qt(Function,a).apply(null,o),l=fe.length,fe.push(u),l},r:function(t){return t=ce(t),_e(_[t])},e:function(t,e){return _e((t=le(t))[e=le(e)])},g:function(t){t>4&&(re[t].refcount+=1)},q:function(t,e,r,n){t=le(t);var a=Ae[e];return a||(a=function(t){for(var e="",r=0;r<t;++r)e+=(0!==r?", ":"")+"arg"+r;var n="return function emval_allocator_"+t+"(constructor, argTypes, args) {\n";for(r=0;r<t;++r)n+="var argType"+r+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+r+'], "parameter '+r+'");\nvar arg'+r+" = argType"+r+".readValueFromPointer(args);\nargs += argType"+r+"['argPackAdvance'];\n";return n+="var obj = new constructor("+e+");\nreturn __emval_register(obj);\n}\n",new Function("requireRegisteredType","Module","__emval_register",n)(oe,_,_e)}(e),Ae[e]=a),a(t,r,n)},f:function(t){return _e(ce(t))},l:function(t){it(re[t].value),ne(t)},o:function(){Z()},E:function(t,e,r){S.copyWithin(t,e,e+r)},F:function(t){var e,r=S.length,n=2147483648;if((t>>>=0)>n)return!1;for(var _=1;_<=4;_*=2){var a=r*(1+.2/_);if(a=Math.min(a,t+100663296),de(Math.min(n,((e=Math.max(t,a))%65536>0&&(e+=65536-e%65536),e))))return!0}return!1},G:function(t){return 0},C:function(t,e,r,n,_){},z:function(t,e,r,n){for(var _=0,a=0;a<r;a++){for(var o=E[e+8*a>>2],i=E[e+(8*a+4)>>2],s=0;s<i;s++)Oe.printChar(t,S[o+s]);_+=i}return E[n>>2]=_,0},D:function(t){}},Fe=(function(){var t={a:Ce};function e(t,e){var r,n=t.exports;_.asm=n,H((C=_.asm.K).buffer),W=_.asm.O,r=_.asm.L,k.unshift(r),function(t){if(Y--,_.monitorRunDependencies&&_.monitorRunDependencies(Y),0==Y&&(null!==q&&(clearInterval(q),q=null),J)){var e=J;J=null,e()}}()}function r(t){e(t.instance)}function a(e){return function(){if(!p&&(u||l)){if("function"==typeof fetch&&!et(nt))return fetch(nt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+nt+"'";return t.arrayBuffer()})).catch((function(){return _t(nt)}));if(f)return new Promise((function(t,e){f(nt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return _t(nt)}))}().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(t){P("failed to asynchronously prepare wasm: "+t),Z(t)}))}if(Y++,_.monitorRunDependencies&&_.monitorRunDependencies(Y),_.instantiateWasm)try{return _.instantiateWasm(t,e)}catch(t){return P("Module.instantiateWasm callback failed with error: "+t),!1}(p||"function"!=typeof WebAssembly.instantiateStreaming||tt(nt)||et(nt)||"function"!=typeof fetch?a(r):fetch(nt,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(r,(function(t){return P("wasm streaming compile failed: "+t),P("falling back to ArrayBuffer instantiation"),a(r)}))}))).catch(n)}(),_.___wasm_call_ctors=function(){return(_.___wasm_call_ctors=_.asm.L).apply(null,arguments)},_._malloc=function(){return(Fe=_._malloc=_.asm.M).apply(null,arguments)}),Pe=_._free=function(){return(Pe=_._free=_.asm.N).apply(null,arguments)},Be=_.___getTypeName=function(){return(Be=_.___getTypeName=_.asm.P).apply(null,arguments)};function Me(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Ke(t){function r(){pe||(pe=!0,_.calledRun=!0,B||(at(k),at(j),e(_),_.onRuntimeInitialized&&_.onRuntimeInitialized(),function(){if(_.postRun)for("function"==typeof _.postRun&&(_.postRun=[_.postRun]);_.postRun.length;)t=_.postRun.shift(),z.unshift(t);var t;at(z)}()))}t=t||R,Y>0||(function(){if(_.preRun)for("function"==typeof _.preRun&&(_.preRun=[_.preRun]);_.preRun.length;)t=_.preRun.shift(),$.unshift(t);var t;at($)}(),Y>0||(_.setStatus?(_.setStatus("Running..."),setTimeout((function(){setTimeout((function(){_.setStatus("")}),1),r()}),1)):r()))}if(_.___embind_register_native_and_builtin_types=function(){return(_.___embind_register_native_and_builtin_types=_.asm.Q).apply(null,arguments)},_.dynCall_jiji=function(){return(_.dynCall_jiji=_.asm.R).apply(null,arguments)},J=function t(){pe||Ke(),pe||(J=t)},_.run=Ke,_.preInit)for("function"==typeof _.preInit&&(_.preInit=[_.preInit]);_.preInit.length>0;)_.preInit.pop()();return Ke(),t.ready});"object"==typeof t&&"object"==typeof e?e.exports=n:"function"==typeof define&&define.amd?define([],(function(){return n})):"object"==typeof t&&(t.BASIS=n)}}),PixelDatatype={UNSIGNED_BYTE:WebGLConstants_default.UNSIGNED_BYTE,UNSIGNED_SHORT:WebGLConstants_default.UNSIGNED_SHORT,UNSIGNED_INT:WebGLConstants_default.UNSIGNED_INT,FLOAT:WebGLConstants_default.FLOAT,HALF_FLOAT:WebGLConstants_default.HALF_FLOAT_OES,UNSIGNED_INT_24_8:WebGLConstants_default.UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:WebGLConstants_default.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:WebGLConstants_default.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:WebGLConstants_default.UNSIGNED_SHORT_5_6_5,toWebGLConstant:function(t,e){switch(t){case PixelDatatype.UNSIGNED_BYTE:return WebGLConstants_default.UNSIGNED_BYTE;case PixelDatatype.UNSIGNED_SHORT:return WebGLConstants_default.UNSIGNED_SHORT;case PixelDatatype.UNSIGNED_INT:return WebGLConstants_default.UNSIGNED_INT;case PixelDatatype.FLOAT:return WebGLConstants_default.FLOAT;case PixelDatatype.HALF_FLOAT:return e.webgl2?WebGLConstants_default.HALF_FLOAT:WebGLConstants_default.HALF_FLOAT_OES;case PixelDatatype.UNSIGNED_INT_24_8:return WebGLConstants_default.UNSIGNED_INT_24_8;case PixelDatatype.UNSIGNED_SHORT_4_4_4_4:return WebGLConstants_default.UNSIGNED_SHORT_4_4_4_4;case PixelDatatype.UNSIGNED_SHORT_5_5_5_1:return WebGLConstants_default.UNSIGNED_SHORT_5_5_5_1;case PixelDatatype.UNSIGNED_SHORT_5_6_5:return PixelDatatype.UNSIGNED_SHORT_5_6_5}},isPacked:function(t){return t===PixelDatatype.UNSIGNED_INT_24_8||t===PixelDatatype.UNSIGNED_SHORT_4_4_4_4||t===PixelDatatype.UNSIGNED_SHORT_5_5_5_1||t===PixelDatatype.UNSIGNED_SHORT_5_6_5},sizeInBytes:function(t){switch(t){case PixelDatatype.UNSIGNED_BYTE:return 1;case PixelDatatype.UNSIGNED_SHORT:case PixelDatatype.UNSIGNED_SHORT_4_4_4_4:case PixelDatatype.UNSIGNED_SHORT_5_5_5_1:case PixelDatatype.UNSIGNED_SHORT_5_6_5:case PixelDatatype.HALF_FLOAT:return 2;case PixelDatatype.UNSIGNED_INT:case PixelDatatype.FLOAT:case PixelDatatype.UNSIGNED_INT_24_8:return 4}},validate:function(t){return t===PixelDatatype.UNSIGNED_BYTE||t===PixelDatatype.UNSIGNED_SHORT||t===PixelDatatype.UNSIGNED_INT||t===PixelDatatype.FLOAT||t===PixelDatatype.HALF_FLOAT||t===PixelDatatype.UNSIGNED_INT_24_8||t===PixelDatatype.UNSIGNED_SHORT_4_4_4_4||t===PixelDatatype.UNSIGNED_SHORT_5_5_5_1||t===PixelDatatype.UNSIGNED_SHORT_5_6_5}},PixelDatatype_default=Object.freeze(PixelDatatype),PixelFormat={DEPTH_COMPONENT:WebGLConstants_default.DEPTH_COMPONENT,DEPTH_STENCIL:WebGLConstants_default.DEPTH_STENCIL,ALPHA:WebGLConstants_default.ALPHA,RED:WebGLConstants_default.RED,RG:WebGLConstants_default.RG,RGB:WebGLConstants_default.RGB,RGBA:WebGLConstants_default.RGBA,LUMINANCE:WebGLConstants_default.LUMINANCE,LUMINANCE_ALPHA:WebGLConstants_default.LUMINANCE_ALPHA,RGB_DXT1:WebGLConstants_default.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:WebGLConstants_default.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:WebGLConstants_default.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:WebGLConstants_default.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:WebGLConstants_default.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:WebGLConstants_default.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:WebGLConstants_default.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:WebGLConstants_default.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGBA_ASTC:WebGLConstants_default.COMPRESSED_RGBA_ASTC_4x4_WEBGL,RGB_ETC1:WebGLConstants_default.COMPRESSED_RGB_ETC1_WEBGL,RGB8_ETC2:WebGLConstants_default.COMPRESSED_RGB8_ETC2,RGBA8_ETC2_EAC:WebGLConstants_default.COMPRESSED_RGBA8_ETC2_EAC,RGBA_BC7:WebGLConstants_default.COMPRESSED_RGBA_BPTC_UNORM,componentsLength:function(t){switch(t){case PixelFormat.RGB:return 3;case PixelFormat.RGBA:return 4;case PixelFormat.LUMINANCE_ALPHA:case PixelFormat.RG:return 2;case PixelFormat.ALPHA:case PixelFormat.RED:case PixelFormat.LUMINANCE:default:return 1}},validate:function(t){return t===PixelFormat.DEPTH_COMPONENT||t===PixelFormat.DEPTH_STENCIL||t===PixelFormat.ALPHA||t===PixelFormat.RED||t===PixelFormat.RG||t===PixelFormat.RGB||t===PixelFormat.RGBA||t===PixelFormat.LUMINANCE||t===PixelFormat.LUMINANCE_ALPHA||t===PixelFormat.RGB_DXT1||t===PixelFormat.RGBA_DXT1||t===PixelFormat.RGBA_DXT3||t===PixelFormat.RGBA_DXT5||t===PixelFormat.RGB_PVRTC_4BPPV1||t===PixelFormat.RGB_PVRTC_2BPPV1||t===PixelFormat.RGBA_PVRTC_4BPPV1||t===PixelFormat.RGBA_PVRTC_2BPPV1||t===PixelFormat.RGBA_ASTC||t===PixelFormat.RGB_ETC1||t===PixelFormat.RGB8_ETC2||t===PixelFormat.RGBA8_ETC2_EAC||t===PixelFormat.RGBA_BC7},isColorFormat:function(t){return t===PixelFormat.ALPHA||t===PixelFormat.RGB||t===PixelFormat.RGBA||t===PixelFormat.LUMINANCE||t===PixelFormat.LUMINANCE_ALPHA},isDepthFormat:function(t){return t===PixelFormat.DEPTH_COMPONENT||t===PixelFormat.DEPTH_STENCIL},isCompressedFormat:function(t){return t===PixelFormat.RGB_DXT1||t===PixelFormat.RGBA_DXT1||t===PixelFormat.RGBA_DXT3||t===PixelFormat.RGBA_DXT5||t===PixelFormat.RGB_PVRTC_4BPPV1||t===PixelFormat.RGB_PVRTC_2BPPV1||t===PixelFormat.RGBA_PVRTC_4BPPV1||t===PixelFormat.RGBA_PVRTC_2BPPV1||t===PixelFormat.RGBA_ASTC||t===PixelFormat.RGB_ETC1||t===PixelFormat.RGB8_ETC2||t===PixelFormat.RGBA8_ETC2_EAC||t===PixelFormat.RGBA_BC7},isDXTFormat:function(t){return t===PixelFormat.RGB_DXT1||t===PixelFormat.RGBA_DXT1||t===PixelFormat.RGBA_DXT3||t===PixelFormat.RGBA_DXT5},isPVRTCFormat:function(t){return t===PixelFormat.RGB_PVRTC_4BPPV1||t===PixelFormat.RGB_PVRTC_2BPPV1||t===PixelFormat.RGBA_PVRTC_4BPPV1||t===PixelFormat.RGBA_PVRTC_2BPPV1},isASTCFormat:function(t){return t===PixelFormat.RGBA_ASTC},isETC1Format:function(t){return t===PixelFormat.RGB_ETC1},isETC2Format:function(t){return t===PixelFormat.RGB8_ETC2||t===PixelFormat.RGBA8_ETC2_EAC},isBC7Format:function(t){return t===PixelFormat.RGBA_BC7},compressedTextureSizeInBytes:function(t,e,r){switch(t){case PixelFormat.RGB_DXT1:case PixelFormat.RGBA_DXT1:case PixelFormat.RGB_ETC1:case PixelFormat.RGB8_ETC2:return Math.floor((e+3)/4)*Math.floor((r+3)/4)*8;case PixelFormat.RGBA_DXT3:case PixelFormat.RGBA_DXT5:case PixelFormat.RGBA_ASTC:case PixelFormat.RGBA8_ETC2_EAC:return Math.floor((e+3)/4)*Math.floor((r+3)/4)*16;case PixelFormat.RGB_PVRTC_4BPPV1:case PixelFormat.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(e,8)*Math.max(r,8)*4+7)/8);case PixelFormat.RGB_PVRTC_2BPPV1:case PixelFormat.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(e,16)*Math.max(r,8)*2+7)/8);case PixelFormat.RGBA_BC7:return Math.ceil(e/4)*Math.ceil(r/4)*16;default:return 0}},textureSizeInBytes:function(t,e,r,n){let _=PixelFormat.componentsLength(t);return PixelDatatype_default.isPacked(e)&&(_=1),_*PixelDatatype_default.sizeInBytes(e)*r*n},alignmentInBytes:function(t,e,r){const n=PixelFormat.textureSizeInBytes(t,e,r,1)%4;return 0===n?4:2===n?2:1},createTypedArray:function(t,e,r,n){let _;const a=PixelDatatype_default.sizeInBytes(e);return _=a===Uint8Array.BYTES_PER_ELEMENT?Uint8Array:a===Uint16Array.BYTES_PER_ELEMENT?Uint16Array:a===Float32Array.BYTES_PER_ELEMENT&&e===PixelDatatype_default.FLOAT?Float32Array:Uint32Array,new _(PixelFormat.componentsLength(t)*r*n)},flipY:function(t,e,r,n,_){if(1===_)return t;const a=PixelFormat.createTypedArray(e,r,n,_),o=PixelFormat.componentsLength(e),i=n*o;for(let e=0;e<_;++e){const r=e*n*o,s=(_-e-1)*n*o;for(let e=0;e<i;++e)a[s+e]=t[r+e]}return a},toInternalFormat:function(t,e,r){if(!r.webgl2)return t;if(t===PixelFormat.DEPTH_STENCIL)return WebGLConstants_default.DEPTH24_STENCIL8;if(t===PixelFormat.DEPTH_COMPONENT){if(e===PixelDatatype_default.UNSIGNED_SHORT)return WebGLConstants_default.DEPTH_COMPONENT16;if(e===PixelDatatype_default.UNSIGNED_INT)return WebGLConstants_default.DEPTH_COMPONENT24}if(e===PixelDatatype_default.FLOAT)switch(t){case PixelFormat.RGBA:return WebGLConstants_default.RGBA32F;case PixelFormat.RGB:return WebGLConstants_default.RGB32F;case PixelFormat.RG:return WebGLConstants_default.RG32F;case PixelFormat.RED:return WebGLConstants_default.R32F}if(e===PixelDatatype_default.HALF_FLOAT)switch(t){case PixelFormat.RGBA:return WebGLConstants_default.RGBA16F;case PixelFormat.RGB:return WebGLConstants_default.RGB16F;case PixelFormat.RG:return WebGLConstants_default.RG16F;case PixelFormat.RED:return WebGLConstants_default.R16F}return t}},PixelFormat_default=Object.freeze(PixelFormat),VulkanConstants={VK_FORMAT_UNDEFINED:0,VK_FORMAT_R4G4_UNORM_PACK8:1,VK_FORMAT_R4G4B4A4_UNORM_PACK16:2,VK_FORMAT_B4G4R4A4_UNORM_PACK16:3,VK_FORMAT_R5G6B5_UNORM_PACK16:4,VK_FORMAT_B5G6R5_UNORM_PACK16:5,VK_FORMAT_R5G5B5A1_UNORM_PACK16:6,VK_FORMAT_B5G5R5A1_UNORM_PACK16:7,VK_FORMAT_A1R5G5B5_UNORM_PACK16:8,VK_FORMAT_R8_UNORM:9,VK_FORMAT_R8_SNORM:10,VK_FORMAT_R8_USCALED:11,VK_FORMAT_R8_SSCALED:12,VK_FORMAT_R8_UINT:13,VK_FORMAT_R8_SINT:14,VK_FORMAT_R8_SRGB:15,VK_FORMAT_R8G8_UNORM:16,VK_FORMAT_R8G8_SNORM:17,VK_FORMAT_R8G8_USCALED:18,VK_FORMAT_R8G8_SSCALED:19,VK_FORMAT_R8G8_UINT:20,VK_FORMAT_R8G8_SINT:21,VK_FORMAT_R8G8_SRGB:22,VK_FORMAT_R8G8B8_UNORM:23,VK_FORMAT_R8G8B8_SNORM:24,VK_FORMAT_R8G8B8_USCALED:25,VK_FORMAT_R8G8B8_SSCALED:26,VK_FORMAT_R8G8B8_UINT:27,VK_FORMAT_R8G8B8_SINT:28,VK_FORMAT_R8G8B8_SRGB:29,VK_FORMAT_B8G8R8_UNORM:30,VK_FORMAT_B8G8R8_SNORM:31,VK_FORMAT_B8G8R8_USCALED:32,VK_FORMAT_B8G8R8_SSCALED:33,VK_FORMAT_B8G8R8_UINT:34,VK_FORMAT_B8G8R8_SINT:35,VK_FORMAT_B8G8R8_SRGB:36,VK_FORMAT_R8G8B8A8_UNORM:37,VK_FORMAT_R8G8B8A8_SNORM:38,VK_FORMAT_R8G8B8A8_USCALED:39,VK_FORMAT_R8G8B8A8_SSCALED:40,VK_FORMAT_R8G8B8A8_UINT:41,VK_FORMAT_R8G8B8A8_SINT:42,VK_FORMAT_R8G8B8A8_SRGB:43,VK_FORMAT_B8G8R8A8_UNORM:44,VK_FORMAT_B8G8R8A8_SNORM:45,VK_FORMAT_B8G8R8A8_USCALED:46,VK_FORMAT_B8G8R8A8_SSCALED:47,VK_FORMAT_B8G8R8A8_UINT:48,VK_FORMAT_B8G8R8A8_SINT:49,VK_FORMAT_B8G8R8A8_SRGB:50,VK_FORMAT_A8B8G8R8_UNORM_PACK32:51,VK_FORMAT_A8B8G8R8_SNORM_PACK32:52,VK_FORMAT_A8B8G8R8_USCALED_PACK32:53,VK_FORMAT_A8B8G8R8_SSCALED_PACK32:54,VK_FORMAT_A8B8G8R8_UINT_PACK32:55,VK_FORMAT_A8B8G8R8_SINT_PACK32:56,VK_FORMAT_A8B8G8R8_SRGB_PACK32:57,VK_FORMAT_A2R10G10B10_UNORM_PACK32:58,VK_FORMAT_A2R10G10B10_SNORM_PACK32:59,VK_FORMAT_A2R10G10B10_USCALED_PACK32:60,VK_FORMAT_A2R10G10B10_SSCALED_PACK32:61,VK_FORMAT_A2R10G10B10_UINT_PACK32:62,VK_FORMAT_A2R10G10B10_SINT_PACK32:63,VK_FORMAT_A2B10G10R10_UNORM_PACK32:64,VK_FORMAT_A2B10G10R10_SNORM_PACK32:65,VK_FORMAT_A2B10G10R10_USCALED_PACK32:66,VK_FORMAT_A2B10G10R10_SSCALED_PACK32:67,VK_FORMAT_A2B10G10R10_UINT_PACK32:68,VK_FORMAT_A2B10G10R10_SINT_PACK32:69,VK_FORMAT_R16_UNORM:70,VK_FORMAT_R16_SNORM:71,VK_FORMAT_R16_USCALED:72,VK_FORMAT_R16_SSCALED:73,VK_FORMAT_R16_UINT:74,VK_FORMAT_R16_SINT:75,VK_FORMAT_R16_SFLOAT:76,VK_FORMAT_R16G16_UNORM:77,VK_FORMAT_R16G16_SNORM:78,VK_FORMAT_R16G16_USCALED:79,VK_FORMAT_R16G16_SSCALED:80,VK_FORMAT_R16G16_UINT:81,VK_FORMAT_R16G16_SINT:82,VK_FORMAT_R16G16_SFLOAT:83,VK_FORMAT_R16G16B16_UNORM:84,VK_FORMAT_R16G16B16_SNORM:85,VK_FORMAT_R16G16B16_USCALED:86,VK_FORMAT_R16G16B16_SSCALED:87,VK_FORMAT_R16G16B16_UINT:88,VK_FORMAT_R16G16B16_SINT:89,VK_FORMAT_R16G16B16_SFLOAT:90,VK_FORMAT_R16G16B16A16_UNORM:91,VK_FORMAT_R16G16B16A16_SNORM:92,VK_FORMAT_R16G16B16A16_USCALED:93,VK_FORMAT_R16G16B16A16_SSCALED:94,VK_FORMAT_R16G16B16A16_UINT:95,VK_FORMAT_R16G16B16A16_SINT:96,VK_FORMAT_R16G16B16A16_SFLOAT:97,VK_FORMAT_R32_UINT:98,VK_FORMAT_R32_SINT:99,VK_FORMAT_R32_SFLOAT:100,VK_FORMAT_R32G32_UINT:101,VK_FORMAT_R32G32_SINT:102,VK_FORMAT_R32G32_SFLOAT:103,VK_FORMAT_R32G32B32_UINT:104,VK_FORMAT_R32G32B32_SINT:105,VK_FORMAT_R32G32B32_SFLOAT:106,VK_FORMAT_R32G32B32A32_UINT:107,VK_FORMAT_R32G32B32A32_SINT:108,VK_FORMAT_R32G32B32A32_SFLOAT:109,VK_FORMAT_R64_UINT:110,VK_FORMAT_R64_SINT:111,VK_FORMAT_R64_SFLOAT:112,VK_FORMAT_R64G64_UINT:113,VK_FORMAT_R64G64_SINT:114,VK_FORMAT_R64G64_SFLOAT:115,VK_FORMAT_R64G64B64_UINT:116,VK_FORMAT_R64G64B64_SINT:117,VK_FORMAT_R64G64B64_SFLOAT:118,VK_FORMAT_R64G64B64A64_UINT:119,VK_FORMAT_R64G64B64A64_SINT:120,VK_FORMAT_R64G64B64A64_SFLOAT:121,VK_FORMAT_B10G11R11_UFLOAT_PACK32:122,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:123,VK_FORMAT_D16_UNORM:124,VK_FORMAT_X8_D24_UNORM_PACK32:125,VK_FORMAT_D32_SFLOAT:126,VK_FORMAT_S8_UINT:127,VK_FORMAT_D16_UNORM_S8_UINT:128,VK_FORMAT_D24_UNORM_S8_UINT:129,VK_FORMAT_D32_SFLOAT_S8_UINT:130,VK_FORMAT_BC1_RGB_UNORM_BLOCK:131,VK_FORMAT_BC1_RGB_SRGB_BLOCK:132,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:133,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:134,VK_FORMAT_BC2_UNORM_BLOCK:135,VK_FORMAT_BC2_SRGB_BLOCK:136,VK_FORMAT_BC3_UNORM_BLOCK:137,VK_FORMAT_BC3_SRGB_BLOCK:138,VK_FORMAT_BC4_UNORM_BLOCK:139,VK_FORMAT_BC4_SNORM_BLOCK:140,VK_FORMAT_BC5_UNORM_BLOCK:141,VK_FORMAT_BC5_SNORM_BLOCK:142,VK_FORMAT_BC6H_UFLOAT_BLOCK:143,VK_FORMAT_BC6H_SFLOAT_BLOCK:144,VK_FORMAT_BC7_UNORM_BLOCK:145,VK_FORMAT_BC7_SRGB_BLOCK:146,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:147,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:148,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:149,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:150,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:151,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:152,VK_FORMAT_EAC_R11_UNORM_BLOCK:153,VK_FORMAT_EAC_R11_SNORM_BLOCK:154,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:155,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:156,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:157,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:158,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:159,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:160,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:161,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:162,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:163,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:164,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:165,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:166,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:167,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:168,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:169,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:170,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:171,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:172,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:173,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:174,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:175,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:176,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:177,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:178,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:179,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:180,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:181,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:182,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:183,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:184,VK_FORMAT_G8B8G8R8_422_UNORM:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM:1000156006,VK_FORMAT_R10X6_UNORM_PACK16:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16:1000156016,VK_FORMAT_R12X4_UNORM_PACK16:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM:1000156033,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:1000054e3,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:1000054001,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:1000054002,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:1000054003,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:1000054004,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:1000054005,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:1000054006,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:1000054007,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:1000066e3,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:1000066001,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:1000066002,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:1000066003,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:1000066004,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:1000066005,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:1000066006,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:1000066007,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:1000066008,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:1000066009,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:1000066010,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:1000066011,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:1000066012,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:1000066013,VK_FORMAT_G8B8G8R8_422_UNORM_KHR:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM_KHR:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR:1000156006,VK_FORMAT_R10X6_UNORM_PACK16_KHR:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR:1000156016,VK_FORMAT_R12X4_UNORM_PACK16_KHR:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM_KHR:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM_KHR:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR:1000156033},VulkanConstants_default=Object.freeze(VulkanConstants),KHR_SUPERCOMPRESSION_NONE=0,KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT=0,KHR_DF_VENDORID_KHRONOS=0,KHR_DF_VERSION=2,KHR_DF_MODEL_UNSPECIFIED=0,KHR_DF_FLAG_ALPHA_STRAIGHT=0,KHR_DF_TRANSFER_SRGB=2,KHR_DF_PRIMARIES_BT709=1,KHR_DF_SAMPLE_DATATYPE_SIGNED=64,VK_FORMAT_UNDEFINED=0,KTX2Container=class{constructor(){this.vkFormat=VK_FORMAT_UNDEFINED,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=KHR_SUPERCOMPRESSION_NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:KHR_DF_VENDORID_KHRONOS,descriptorType:KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT,descriptorBlockSize:0,versionNumber:KHR_DF_VERSION,colorModel:KHR_DF_MODEL_UNSPECIFIED,colorPrimaries:KHR_DF_PRIMARIES_BT709,transferFunction:KHR_DF_TRANSFER_SRGB,flags:KHR_DF_FLAG_ALPHA_STRAIGHT,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}},BufferReader=class{constructor(t,e,r,n){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+e,r),this._littleEndian=n,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint8Array(t){const e=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,t);return this._offset+=t,e}_skip(t){return this._offset+=t,this}_scan(t,e=0){const r=this._offset;let n=0;for(;this._dataView.getUint8(this._offset)!==e&&n<t;)n++,this._offset++;return n<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,n)}},NUL=new Uint8Array([0]),KTX2_ID=[171,75,84,88,32,50,48,187,13,10,26,10];function decodeText(t){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(t):Buffer.from(t).toString("utf8")}function read2(t){const e=new Uint8Array(t.buffer,t.byteOffset,KTX2_ID.length);if(e[0]!==KTX2_ID[0]||e[1]!==KTX2_ID[1]||e[2]!==KTX2_ID[2]||e[3]!==KTX2_ID[3]||e[4]!==KTX2_ID[4]||e[5]!==KTX2_ID[5]||e[6]!==KTX2_ID[6]||e[7]!==KTX2_ID[7]||e[8]!==KTX2_ID[8]||e[9]!==KTX2_ID[9]||e[10]!==KTX2_ID[10]||e[11]!==KTX2_ID[11])throw new Error("Missing KTX 2.0 identifier.");const r=new KTX2Container,n=17*Uint32Array.BYTES_PER_ELEMENT,_=new BufferReader(t,KTX2_ID.length,n,!0);r.vkFormat=_._nextUint32(),r.typeSize=_._nextUint32(),r.pixelWidth=_._nextUint32(),r.pixelHeight=_._nextUint32(),r.pixelDepth=_._nextUint32(),r.layerCount=_._nextUint32(),r.faceCount=_._nextUint32();const a=_._nextUint32();r.supercompressionScheme=_._nextUint32();const o=_._nextUint32(),i=_._nextUint32(),s=_._nextUint32(),u=_._nextUint32(),l=_._nextUint64(),R=_._nextUint64(),c=3*a*8,f=new BufferReader(t,KTX2_ID.length+n,c,!0);for(let e=0;e<a;e++)r.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+f._nextUint64(),f._nextUint64()),uncompressedByteLength:f._nextUint64()});const T=new BufferReader(t,o,i,!0),A={vendorId:T._skip(4)._nextUint16(),descriptorType:T._nextUint16(),versionNumber:T._nextUint16(),descriptorBlockSize:T._nextUint16(),colorModel:T._nextUint8(),colorPrimaries:T._nextUint8(),transferFunction:T._nextUint8(),flags:T._nextUint8(),texelBlockDimension:[T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8()],bytesPlane:[T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8()],samples:[]},d=(A.descriptorBlockSize/4-6)/4;for(let t=0;t<d;t++){const e={bitOffset:T._nextUint16(),bitLength:T._nextUint8(),channelType:T._nextUint8(),samplePosition:[T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};e.channelType&KHR_DF_SAMPLE_DATATYPE_SIGNED?(e.sampleLower=T._nextInt32(),e.sampleUpper=T._nextInt32()):(e.sampleLower=T._nextUint32(),e.sampleUpper=T._nextUint32()),A.samples[t]=e}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(A);const O=new BufferReader(t,s,u,!0);for(;O._offset<u;){const t=O._nextUint32(),e=O._scan(t),n=decodeText(e);if(r.keyValue[n]=O._nextUint8Array(t-e.byteLength-1),n.match(/^ktx/i)){const t=decodeText(r.keyValue[n]);r.keyValue[n]=t.substring(0,t.lastIndexOf("\0"))}const _=t%4?4-t%4:0;O._skip(_)}if(R<=0)return r;const p=new BufferReader(t,l,R,!0),C=p._nextUint16(),F=p._nextUint16(),P=p._nextUint32(),B=p._nextUint32(),M=p._nextUint32(),K=p._nextUint32(),G=[];for(let t=0;t<a;t++)G.push({imageFlags:p._nextUint32(),rgbSliceByteOffset:p._nextUint32(),rgbSliceByteLength:p._nextUint32(),alphaSliceByteOffset:p._nextUint32(),alphaSliceByteLength:p._nextUint32()});const h=l+p._offset,m=h+P,y=m+B,S=y+M,N=new Uint8Array(t.buffer,t.byteOffset+h,P),V=new Uint8Array(t.buffer,t.byteOffset+m,B),E=new Uint8Array(t.buffer,t.byteOffset+y,M),v=new Uint8Array(t.buffer,t.byteOffset+S,K);return r.globalData={endpointCount:C,selectorCount:F,imageDescs:G,endpointsData:N,selectorsData:V,tablesData:E,extendedData:v},r}var transcoderModule,import_basis_transcoder=__toESM(require_basis_transcoder(),1),faceOrder=["positiveX","negativeX","positiveY","negativeY","positiveZ","negativeZ"],colorModelETC1S=163,colorModelUASTC=166;function transcode(t,e){Check_default.typeOf.object("transcoderModule",transcoderModule);const r=t.ktx2Buffer,n=t.supportedTargetFormats;let _;try{_=read2(r)}catch(t){throw new RuntimeError_default("Invalid KTX2 file.")}if(0!==_.layerCount)throw new RuntimeError_default("KTX2 texture arrays are not supported.");if(0!==_.pixelDepth)throw new RuntimeError_default("KTX2 3D textures are unsupported.");const a=_.dataFormatDescriptor[0],o=new Array(_.levelCount);return 0!==_.vkFormat||a.colorModel!==colorModelETC1S&&a.colorModel!==colorModelUASTC?(e.push(r.buffer),parseUncompressed(_,o)):transcodeCompressed(r,_,n,transcoderModule,e,o),o}function parseUncompressed(t,e){const r=t.vkFormat===VulkanConstants_default.VK_FORMAT_R8G8B8_SRGB?PixelFormat_default.RGB:PixelFormat_default.RGBA;let n;t.vkFormat===VulkanConstants_default.VK_FORMAT_R8G8B8A8_UNORM?n=PixelDatatype_default.UNSIGNED_BYTE:t.vkFormat===VulkanConstants_default.VK_FORMAT_R16G16B16A16_SFLOAT?n=PixelDatatype_default.HALF_FLOAT:t.vkFormat===VulkanConstants_default.VK_FORMAT_R32G32B32A32_SFLOAT&&(n=PixelDatatype_default.FLOAT);for(let _=0;_<t.levels.length;++_){const a={};e[_]=a;const o=t.levels[_].levelData,i=t.pixelWidth>>_,s=t.pixelHeight>>_,u=i*s*PixelFormat_default.componentsLength(r);for(let e=0;e<t.faceCount;++e){const _=o.byteOffset+u*t.typeSize*e;let l;l=defined_default(n)&&1!==PixelDatatype_default.sizeInBytes(n)?2===PixelDatatype_default.sizeInBytes(n)?new Uint16Array(o.buffer,_,u):new Float32Array(o.buffer,_,u):new Uint8Array(o.buffer,_,u),a[faceOrder[e]]={internalFormat:r,datatype:n,width:i,height:s,levelBuffer:l}}}}function transcodeCompressed(t,e,r,n,_,a){const o=new n.KTX2File(t);let i=o.getWidth(),s=o.getHeight();const u=o.getLevels(),l=o.getHasAlpha();if(!(i>0&&s>0&&u>0))throw o.close(),o.delete(),new RuntimeError_default("Invalid KTX2 file");let R,c;const f=e.dataFormatDescriptor[0],T=n.transcoder_texture_format;if(f.colorModel===colorModelETC1S)if(r.etc)R=l?PixelFormat_default.RGBA8_ETC2_EAC:PixelFormat_default.RGB8_ETC2,c=l?T.cTFETC2_RGBA:T.cTFETC1_RGB;else if(r.etc1&&!l)R=PixelFormat_default.RGB_ETC1,c=T.cTFETC1_RGB;else if(r.s3tc)R=l?PixelFormat_default.RGBA_DXT5:PixelFormat_default.RGB_DXT1,c=l?T.cTFBC3_RGBA:T.cTFBC1_RGB;else if(r.pvrtc)R=l?PixelFormat_default.RGBA_PVRTC_4BPPV1:PixelFormat_default.RGB_PVRTC_4BPPV1,c=l?T.cTFPVRTC1_4_RGBA:T.cTFPVRTC1_4_RGB;else if(r.astc)R=PixelFormat_default.RGBA_ASTC,c=T.cTFASTC_4x4_RGBA;else{if(!r.bc7)throw new RuntimeError_default("No transcoding format target available for ETC1S compressed ktx2.");R=PixelFormat_default.RGBA_BC7,c=T.cTFBC7_RGBA}else if(f.colorModel===colorModelUASTC)if(r.astc)R=PixelFormat_default.RGBA_ASTC,c=T.cTFASTC_4x4_RGBA;else if(r.bc7)R=PixelFormat_default.RGBA_BC7,c=T.cTFBC7_RGBA;else if(r.s3tc)R=l?PixelFormat_default.RGBA_DXT5:PixelFormat_default.RGB_DXT1,c=l?T.cTFBC3_RGBA:T.cTFBC1_RGB;else if(r.etc)R=l?PixelFormat_default.RGBA8_ETC2_EAC:PixelFormat_default.RGB8_ETC2,c=l?T.cTFETC2_RGBA:T.cTFETC1_RGB;else if(r.etc1&&!l)R=PixelFormat_default.RGB_ETC1,c=T.cTFETC1_RGB;else{if(!r.pvrtc)throw new RuntimeError_default("No transcoding format target available for UASTC compressed ktx2.");R=l?PixelFormat_default.RGBA_PVRTC_4BPPV1:PixelFormat_default.RGB_PVRTC_4BPPV1,c=l?T.cTFPVRTC1_4_RGBA:T.cTFPVRTC1_4_RGB}if(!o.startTranscoding())throw o.close(),o.delete(),new RuntimeError_default("startTranscoding() failed");for(let t=0;t<e.levels.length;++t){const r={};a[t]=r,i=e.pixelWidth>>t,s=e.pixelHeight>>t;const n=o.getImageTranscodedSizeInBytes(t,0,0,c.value),u=new Uint8Array(n),l=o.transcodeImage(u,t,0,0,c.value,0,-1,-1);if(!defined_default(l))throw new RuntimeError_default("transcodeImage() failed.");_.push(u.buffer),r[faceOrder[0]]={internalFormat:R,width:i,height:s,levelBuffer:u}}return o.close(),o.delete(),a}async function initWorker(t,e){const r=t.webAssemblyConfig,n=defaultValue_default(import_basis_transcoder.default,self.BASIS);return(transcoderModule=defined_default(r.wasmBinaryFile)?await n(r):await n()).initializeBasis(),!0}function transcodeKTX2(t,e){const r=t.webAssemblyConfig;return defined_default(r)?initWorker(t,e):transcode(t,e)}var transcodeKTX2_default=createTaskProcessorWorker_default(transcodeKTX2);export{transcodeKTX2_default as default};