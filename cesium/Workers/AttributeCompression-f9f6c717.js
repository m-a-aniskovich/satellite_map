define(["exports","./Matrix2-e1298525","./Matrix3-41c58dde","./ComponentDatatype-cf1fa08e","./Check-6ede7e26","./defaultValue-fe22d8c0","./Math-0a2ac845"],(function(e,t,n,r,o,a,c){"use strict";const s={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",getMathType:function(e){switch(e){case s.SCALAR:return Number;case s.VEC2:return t.Cartesian2;case s.VEC3:return n.Cartesian3;case s.VEC4:return t.Cartesian4;case s.MAT2:return t.Matrix2;case s.MAT3:return n.Matrix3;case s.MAT4:return t.Matrix4;default:throw new o.DeveloperError("attributeType is not a valid value.")}},getNumberOfComponents:function(e){switch(e){case s.SCALAR:return 1;case s.VEC2:return 2;case s.VEC3:return 3;case s.VEC4:case s.MAT2:return 4;case s.MAT3:return 9;case s.MAT4:return 16;default:throw new o.DeveloperError("attributeType is not a valid value.")}},getAttributeLocationCount:function(e){switch(e){case s.SCALAR:case s.VEC2:case s.VEC3:case s.VEC4:return 1;case s.MAT2:return 2;case s.MAT3:return 3;case s.MAT4:return 4;default:throw new o.DeveloperError("attributeType is not a valid value.")}},getGlslType:function(e){switch(o.Check.typeOf.string("attributeType",e),e){case s.SCALAR:return"float";case s.VEC2:return"vec2";case s.VEC3:return"vec3";case s.VEC4:return"vec4";case s.MAT2:return"mat2";case s.MAT3:return"mat3";case s.MAT4:return"mat4";default:throw new o.DeveloperError("attributeType is not a valid value.")}}};var u=Object.freeze(s);const i=1/256,d={octEncodeInRange:function(e,t,r){o.Check.defined("vector",e),o.Check.defined("result",r);const a=n.Cartesian3.magnitudeSquared(e);if(Math.abs(a-1)>c.CesiumMath.EPSILON6)throw new o.DeveloperError("vector must be normalized.");if(r.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),r.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0){const e=r.x,t=r.y;r.x=(1-Math.abs(t))*c.CesiumMath.signNotZero(e),r.y=(1-Math.abs(e))*c.CesiumMath.signNotZero(t)}return r.x=c.CesiumMath.toSNorm(r.x,t),r.y=c.CesiumMath.toSNorm(r.y,t),r},octEncode:function(e,t){return d.octEncodeInRange(e,255,t)}},f=new t.Cartesian2,h=new Uint8Array(1);function C(e){return h[0]=e,h[0]}d.octEncodeToCartesian4=function(e,t){return d.octEncodeInRange(e,65535,f),t.x=C(f.x*i),t.y=C(f.x),t.z=C(f.y*i),t.w=C(f.y),t},d.octDecodeInRange=function(e,t,r,a){if(o.Check.defined("result",a),e<0||e>r||t<0||t>r)throw new o.DeveloperError(`x and y must be unsigned normalized integers between 0 and ${r}`);if(a.x=c.CesiumMath.fromSNorm(e,r),a.y=c.CesiumMath.fromSNorm(t,r),a.z=1-(Math.abs(a.x)+Math.abs(a.y)),a.z<0){const e=a.x;a.x=(1-Math.abs(a.y))*c.CesiumMath.signNotZero(e),a.y=(1-Math.abs(e))*c.CesiumMath.signNotZero(a.y)}return n.Cartesian3.normalize(a,a)},d.octDecode=function(e,t,n){return d.octDecodeInRange(e,t,255,n)},d.octDecodeFromCartesian4=function(e,t){o.Check.typeOf.object("encoded",e),o.Check.typeOf.object("result",t);const n=e.x,r=e.y,a=e.z,c=e.w;if(n<0||n>255||r<0||r>255||a<0||a>255||c<0||c>255)throw new o.DeveloperError("x, y, z, and w must be unsigned normalized integers between 0 and 255");const s=256*n+r,u=256*a+c;return d.octDecodeInRange(s,u,65535,t)},d.octPackFloat=function(e){return o.Check.defined("encoded",e),256*e.x+e.y};const l=new t.Cartesian2;function y(e){return e>>1^-(1&e)}d.octEncodeFloat=function(e){return d.octEncode(e,l),d.octPackFloat(l)},d.octDecodeFloat=function(e,t){o.Check.defined("value",e);const n=e/256,r=Math.floor(n),a=256*(n-r);return d.octDecode(r,a,t)},d.octPack=function(e,t,n,r){o.Check.defined("v1",e),o.Check.defined("v2",t),o.Check.defined("v3",n),o.Check.defined("result",r);const a=d.octEncodeFloat(e),c=d.octEncodeFloat(t),s=d.octEncode(n,l);return r.x=65536*s.x+a,r.y=65536*s.y+c,r},d.octUnpack=function(e,t,n,r){o.Check.defined("packed",e),o.Check.defined("v1",t),o.Check.defined("v2",n),o.Check.defined("v3",r);let a=e.x/65536;const c=Math.floor(a),s=65536*(a-c);a=e.y/65536;const u=Math.floor(a),i=65536*(a-u);d.octDecodeFloat(s,t),d.octDecodeFloat(i,n),d.octDecode(c,u,r)},d.compressTextureCoordinates=function(e){return o.Check.defined("textureCoordinates",e),4096*(4095*e.x|0)+(4095*e.y|0)},d.decompressTextureCoordinates=function(e,t){o.Check.defined("compressed",e),o.Check.defined("result",t);const n=e/4096,r=Math.floor(n);return t.x=r/4095,t.y=(e-4096*r)/4095,t},d.zigZagDeltaDecode=function(e,t,n){o.Check.defined("uBuffer",e),o.Check.defined("vBuffer",t),o.Check.typeOf.number.equals("uBuffer.length","vBuffer.length",e.length,t.length),a.defined(n)&&o.Check.typeOf.number.equals("uBuffer.length","heightBuffer.length",e.length,n.length);const r=e.length;let c=0,s=0,u=0;for(let o=0;o<r;++o)c+=y(e[o]),s+=y(t[o]),e[o]=c,t[o]=s,a.defined(n)&&(u+=y(n[o]),n[o]=u)},d.dequantize=function(e,t,n,a){o.Check.defined("typedArray",e),o.Check.defined("componentDatatype",t),o.Check.defined("type",n),o.Check.defined("count",a);const c=u.getNumberOfComponents(n);let s;switch(t){case r.ComponentDatatype.BYTE:s=127;break;case r.ComponentDatatype.UNSIGNED_BYTE:s=255;break;case r.ComponentDatatype.SHORT:s=32767;break;case r.ComponentDatatype.UNSIGNED_SHORT:s=65535;break;case r.ComponentDatatype.INT:s=2147483647;break;case r.ComponentDatatype.UNSIGNED_INT:s=4294967295;break;default:throw new o.DeveloperError(`Cannot dequantize component datatype: ${t}`)}const i=new Float32Array(a*c);for(let t=0;t<a;t++)for(let n=0;n<c;n++){const r=t*c+n;i[r]=Math.max(e[r]/s,-1)}return i},d.decodeRGB565=function(e,t){o.Check.defined("typedArray",e);const n=3*e.length;a.defined(t)&&o.Check.typeOf.number.equals("result.length","typedArray.length * 3",t.length,n);const r=e.length;a.defined(t)||(t=new Float32Array(3*r));const c=1/31;for(let n=0;n<r;n++){const r=e[n],o=r>>11,a=r>>5&63,s=31&r,u=3*n;t[u]=o*c,t[u+1]=.015873015873015872*a,t[u+2]=s*c}return t};var p=d;e.AttributeCompression=p}));