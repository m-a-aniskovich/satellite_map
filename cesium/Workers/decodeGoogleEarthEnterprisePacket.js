/*! For license information please see decodeGoogleEarthEnterprisePacket.js.LICENSE.txt */
import{createTaskProcessorWorker_default}from"./chunk-AI3KSNM6.js";import{RuntimeError_default}from"./chunk-66CXKODF.js";import{Check_default}from"./chunk-7FEGZO3D.js";import{__commonJS,__toESM,defined_default}from"./chunk-YS4KPNLC.js";var require_adler32=__commonJS({"node_modules/pako/lib/zlib/adler32.js"(e,t){"use strict";t.exports=(e,t,i,r)=>{let n=65535&e|0,a=e>>>16&65535|0,o=0;for(;0!==i;){o=i>2e3?2e3:i,i-=o;do{n=n+t[r++]|0,a=a+n|0}while(--o);n%=65521,a%=65521}return n|a<<16|0}}}),require_crc32=__commonJS({"node_modules/pako/lib/zlib/crc32.js"(e,t){"use strict";var i=new Uint32Array((()=>{let e,t=[];for(var i=0;i<256;i++){e=i;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t})());t.exports=(e,t,r,n)=>{const a=i,o=n+r;e^=-1;for(let i=n;i<o;i++)e=e>>>8^a[255&(e^t[i])];return-1^e}}}),require_inffast=__commonJS({"node_modules/pako/lib/zlib/inffast.js"(e,t){"use strict";var i=16209;t.exports=function(e,t){let r,n,a,o,s,l,d,c,f,h,u,m,_,w,b,p,g,k,E,y,v,x,T,S;const R=e.state;r=e.next_in,T=e.input,n=r+(e.avail_in-5),a=e.next_out,S=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),l=R.dmax,d=R.wsize,c=R.whave,f=R.wnext,h=R.window,u=R.hold,m=R.bits,_=R.lencode,w=R.distcode,b=(1<<R.lenbits)-1,p=(1<<R.distbits)-1;e:do{m<15&&(u+=T[r++]<<m,m+=8,u+=T[r++]<<m,m+=8),g=_[u&b];t:for(;;){if(k=g>>>24,u>>>=k,m-=k,k=g>>>16&255,0===k)S[a++]=65535&g;else{if(!(16&k)){if(0==(64&k)){g=_[(65535&g)+(u&(1<<k)-1)];continue t}if(32&k){R.mode=16191;break e}e.msg="invalid literal/length code",R.mode=i;break e}E=65535&g,k&=15,k&&(m<k&&(u+=T[r++]<<m,m+=8),E+=u&(1<<k)-1,u>>>=k,m-=k),m<15&&(u+=T[r++]<<m,m+=8,u+=T[r++]<<m,m+=8),g=w[u&p];i:for(;;){if(k=g>>>24,u>>>=k,m-=k,k=g>>>16&255,!(16&k)){if(0==(64&k)){g=w[(65535&g)+(u&(1<<k)-1)];continue i}e.msg="invalid distance code",R.mode=i;break e}if(y=65535&g,k&=15,m<k&&(u+=T[r++]<<m,m+=8,m<k&&(u+=T[r++]<<m,m+=8)),y+=u&(1<<k)-1,y>l){e.msg="invalid distance too far back",R.mode=i;break e}if(u>>>=k,m-=k,k=a-o,y>k){if(k=y-k,k>c&&R.sane){e.msg="invalid distance too far back",R.mode=i;break e}if(v=0,x=h,0===f){if(v+=d-k,k<E){E-=k;do{S[a++]=h[v++]}while(--k);v=a-y,x=S}}else if(f<k){if(v+=d+f-k,k-=f,k<E){E-=k;do{S[a++]=h[v++]}while(--k);if(v=0,f<E){k=f,E-=k;do{S[a++]=h[v++]}while(--k);v=a-y,x=S}}}else if(v+=f-k,k<E){E-=k;do{S[a++]=h[v++]}while(--k);v=a-y,x=S}for(;E>2;)S[a++]=x[v++],S[a++]=x[v++],S[a++]=x[v++],E-=3;E&&(S[a++]=x[v++],E>1&&(S[a++]=x[v++]))}else{v=a-y;do{S[a++]=S[v++],S[a++]=S[v++],S[a++]=S[v++],E-=3}while(E>2);E&&(S[a++]=S[v++],E>1&&(S[a++]=S[v++]))}break}}break}}while(r<n&&a<s);E=m>>3,r-=E,m-=E<<3,u&=(1<<m)-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=a<s?s-a+257:257-(a-s),R.hold=u,R.bits=m}}}),require_inftrees=__commonJS({"node_modules/pako/lib/zlib/inftrees.js"(e,t){"use strict";var i=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),a=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=(e,t,o,s,l,d,c,f)=>{const h=f.bits;let u,m,_,w,b,p,g=0,k=0,E=0,y=0,v=0,x=0,T=0,S=0,R=0,U=0,A=null;const I=new Uint16Array(16),O=new Uint16Array(16);let z,B,D,Z=null;for(g=0;g<=15;g++)I[g]=0;for(k=0;k<s;k++)I[t[o+k]]++;for(v=h,y=15;y>=1&&0===I[y];y--);if(v>y&&(v=y),0===y)return l[d++]=20971520,l[d++]=20971520,f.bits=1,0;for(E=1;E<y&&0===I[E];E++);for(v<E&&(v=E),S=1,g=1;g<=15;g++)if(S<<=1,S-=I[g],S<0)return-1;if(S>0&&(0===e||1!==y))return-1;for(O[1]=0,g=1;g<15;g++)O[g+1]=O[g]+I[g];for(k=0;k<s;k++)0!==t[o+k]&&(c[O[t[o+k]]++]=k);if(0===e?(A=Z=c,p=20):1===e?(A=i,Z=r,p=257):(A=n,Z=a,p=0),U=0,k=0,g=E,b=d,x=v,T=0,_=-1,R=1<<v,w=R-1,1===e&&R>852||2===e&&R>592)return 1;for(;;){z=g-T,c[k]+1<p?(B=0,D=c[k]):c[k]>=p?(B=Z[c[k]-p],D=A[c[k]-p]):(B=96,D=0),u=1<<g-T,m=1<<x,E=m;do{m-=u,l[b+(U>>T)+m]=z<<24|B<<16|D|0}while(0!==m);for(u=1<<g-1;U&u;)u>>=1;if(0!==u?(U&=u-1,U+=u):U=0,k++,0==--I[g]){if(g===y)break;g=t[o+c[k]]}if(g>v&&(U&w)!==_){for(0===T&&(T=v),b+=E,x=g-T,S=1<<x;x+T<y&&(S-=I[x+T],!(S<=0));)x++,S<<=1;if(R+=1<<x,1===e&&R>852||2===e&&R>592)return 1;_=U&w,l[_]=v<<24|x<<16|b-d|0}}return 0!==U&&(l[b+U]=g-T<<24|64<<16|0),f.bits=v,0}}}),require_constants=__commonJS({"node_modules/pako/lib/zlib/constants.js"(e,t){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}}),require_inflate=__commonJS({"node_modules/pako/lib/zlib/inflate.js"(e,t){"use strict";var i=require_adler32(),r=require_crc32(),n=require_inffast(),a=require_inftrees(),{Z_FINISH:o,Z_BLOCK:s,Z_TREES:l,Z_OK:d,Z_STREAM_END:c,Z_NEED_DICT:f,Z_STREAM_ERROR:h,Z_DATA_ERROR:u,Z_MEM_ERROR:m,Z_BUF_ERROR:_,Z_DEFLATED:w}=require_constants(),b=16180,p=16190,g=16191,k=16192,E=16194,y=16199,v=16200,x=16206,T=16209,S=16210,R=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function U(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var A,I,O=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<b||t.mode>16211?1:0},z=e=>{if(O(e))return h;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=b,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,d},B=e=>{if(O(e))return h;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,z(e)},D=(e,t)=>{let i;if(O(e))return h;const r=e.state;return t<0?(i=0,t=-t):(i=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?h:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=i,r.wbits=t,B(e))},Z=(e,t)=>{if(!e)return h;const i=new U;e.state=i,i.strm=e,i.window=null,i.mode=b;const r=D(e,t);return r!==d&&(e.state=null),r},M=!0,C=e=>{if(M){A=new Int32Array(512),I=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,A,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,I,0,e.work,{bits:5}),M=!1}e.lencode=A,e.lenbits=9,e.distcode=I,e.distbits=5},P=(e,t,i,r)=>{let n;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(i-a.wsize,i),0),a.wnext=0,a.whave=a.wsize):(n=a.wsize-a.wnext,n>r&&(n=r),a.window.set(t.subarray(i-r,i-r+n),a.wnext),(r-=n)?(a.window.set(t.subarray(i-r,i),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0};t.exports.inflateReset=B,t.exports.inflateReset2=D,t.exports.inflateResetKeep=z,t.exports.inflateInit=e=>Z(e,15),t.exports.inflateInit2=Z,t.exports.inflate=(e,t)=>{let U,A,I,z,B,D,Z,M,N,q,G,j,F,L,V,H,J,K,Y,W,X,Q,$=0;const ee=new Uint8Array(4);let te,ie;const re=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(O(e)||!e.output||!e.input&&0!==e.avail_in)return h;U=e.state,U.mode===g&&(U.mode=k),B=e.next_out,I=e.output,Z=e.avail_out,z=e.next_in,A=e.input,D=e.avail_in,M=U.hold,N=U.bits,q=D,G=Z,Q=d;e:for(;;)switch(U.mode){case b:if(0===U.wrap){U.mode=k;break}for(;N<16;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}if(2&U.wrap&&35615===M){0===U.wbits&&(U.wbits=15),U.check=0,ee[0]=255&M,ee[1]=M>>>8&255,U.check=r(U.check,ee,2,0),M=0,N=0,U.mode=16181;break}if(U.head&&(U.head.done=!1),!(1&U.wrap)||(((255&M)<<8)+(M>>8))%31){e.msg="incorrect header check",U.mode=T;break}if((15&M)!==w){e.msg="unknown compression method",U.mode=T;break}if(M>>>=4,N-=4,X=8+(15&M),0===U.wbits&&(U.wbits=X),X>15||X>U.wbits){e.msg="invalid window size",U.mode=T;break}U.dmax=1<<U.wbits,U.flags=0,e.adler=U.check=1,U.mode=512&M?16189:g,M=0,N=0;break;case 16181:for(;N<16;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}if(U.flags=M,(255&U.flags)!==w){e.msg="unknown compression method",U.mode=T;break}if(57344&U.flags){e.msg="unknown header flags set",U.mode=T;break}U.head&&(U.head.text=M>>8&1),512&U.flags&&4&U.wrap&&(ee[0]=255&M,ee[1]=M>>>8&255,U.check=r(U.check,ee,2,0)),M=0,N=0,U.mode=16182;case 16182:for(;N<32;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}U.head&&(U.head.time=M),512&U.flags&&4&U.wrap&&(ee[0]=255&M,ee[1]=M>>>8&255,ee[2]=M>>>16&255,ee[3]=M>>>24&255,U.check=r(U.check,ee,4,0)),M=0,N=0,U.mode=16183;case 16183:for(;N<16;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}U.head&&(U.head.xflags=255&M,U.head.os=M>>8),512&U.flags&&4&U.wrap&&(ee[0]=255&M,ee[1]=M>>>8&255,U.check=r(U.check,ee,2,0)),M=0,N=0,U.mode=16184;case 16184:if(1024&U.flags){for(;N<16;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}U.length=M,U.head&&(U.head.extra_len=M),512&U.flags&&4&U.wrap&&(ee[0]=255&M,ee[1]=M>>>8&255,U.check=r(U.check,ee,2,0)),M=0,N=0}else U.head&&(U.head.extra=null);U.mode=16185;case 16185:if(1024&U.flags&&(j=U.length,j>D&&(j=D),j&&(U.head&&(X=U.head.extra_len-U.length,U.head.extra||(U.head.extra=new Uint8Array(U.head.extra_len)),U.head.extra.set(A.subarray(z,z+j),X)),512&U.flags&&4&U.wrap&&(U.check=r(U.check,A,j,z)),D-=j,z+=j,U.length-=j),U.length))break e;U.length=0,U.mode=16186;case 16186:if(2048&U.flags){if(0===D)break e;j=0;do{X=A[z+j++],U.head&&X&&U.length<65536&&(U.head.name+=String.fromCharCode(X))}while(X&&j<D);if(512&U.flags&&4&U.wrap&&(U.check=r(U.check,A,j,z)),D-=j,z+=j,X)break e}else U.head&&(U.head.name=null);U.length=0,U.mode=16187;case 16187:if(4096&U.flags){if(0===D)break e;j=0;do{X=A[z+j++],U.head&&X&&U.length<65536&&(U.head.comment+=String.fromCharCode(X))}while(X&&j<D);if(512&U.flags&&4&U.wrap&&(U.check=r(U.check,A,j,z)),D-=j,z+=j,X)break e}else U.head&&(U.head.comment=null);U.mode=16188;case 16188:if(512&U.flags){for(;N<16;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}if(4&U.wrap&&M!==(65535&U.check)){e.msg="header crc mismatch",U.mode=T;break}M=0,N=0}U.head&&(U.head.hcrc=U.flags>>9&1,U.head.done=!0),e.adler=U.check=0,U.mode=g;break;case 16189:for(;N<32;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}e.adler=U.check=R(M),M=0,N=0,U.mode=p;case p:if(0===U.havedict)return e.next_out=B,e.avail_out=Z,e.next_in=z,e.avail_in=D,U.hold=M,U.bits=N,f;e.adler=U.check=1,U.mode=g;case g:if(t===s||t===l)break e;case k:if(U.last){M>>>=7&N,N-=7&N,U.mode=x;break}for(;N<3;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}switch(U.last=1&M,M>>>=1,N-=1,3&M){case 0:U.mode=16193;break;case 1:if(C(U),U.mode=y,t===l){M>>>=2,N-=2;break e}break;case 2:U.mode=16196;break;case 3:e.msg="invalid block type",U.mode=T}M>>>=2,N-=2;break;case 16193:for(M>>>=7&N,N-=7&N;N<32;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}if((65535&M)!=(M>>>16^65535)){e.msg="invalid stored block lengths",U.mode=T;break}if(U.length=65535&M,M=0,N=0,U.mode=E,t===l)break e;case E:U.mode=16195;case 16195:if(j=U.length,j){if(j>D&&(j=D),j>Z&&(j=Z),0===j)break e;I.set(A.subarray(z,z+j),B),D-=j,z+=j,Z-=j,B+=j,U.length-=j;break}U.mode=g;break;case 16196:for(;N<14;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}if(U.nlen=257+(31&M),M>>>=5,N-=5,U.ndist=1+(31&M),M>>>=5,N-=5,U.ncode=4+(15&M),M>>>=4,N-=4,U.nlen>286||U.ndist>30){e.msg="too many length or distance symbols",U.mode=T;break}U.have=0,U.mode=16197;case 16197:for(;U.have<U.ncode;){for(;N<3;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}U.lens[re[U.have++]]=7&M,M>>>=3,N-=3}for(;U.have<19;)U.lens[re[U.have++]]=0;if(U.lencode=U.lendyn,U.lenbits=7,te={bits:U.lenbits},Q=a(0,U.lens,0,19,U.lencode,0,U.work,te),U.lenbits=te.bits,Q){e.msg="invalid code lengths set",U.mode=T;break}U.have=0,U.mode=16198;case 16198:for(;U.have<U.nlen+U.ndist;){for(;$=U.lencode[M&(1<<U.lenbits)-1],V=$>>>24,H=$>>>16&255,J=65535&$,!(V<=N);){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}if(J<16)M>>>=V,N-=V,U.lens[U.have++]=J;else{if(16===J){for(ie=V+2;N<ie;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}if(M>>>=V,N-=V,0===U.have){e.msg="invalid bit length repeat",U.mode=T;break}X=U.lens[U.have-1],j=3+(3&M),M>>>=2,N-=2}else if(17===J){for(ie=V+3;N<ie;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}M>>>=V,N-=V,X=0,j=3+(7&M),M>>>=3,N-=3}else{for(ie=V+7;N<ie;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}M>>>=V,N-=V,X=0,j=11+(127&M),M>>>=7,N-=7}if(U.have+j>U.nlen+U.ndist){e.msg="invalid bit length repeat",U.mode=T;break}for(;j--;)U.lens[U.have++]=X}}if(U.mode===T)break;if(0===U.lens[256]){e.msg="invalid code -- missing end-of-block",U.mode=T;break}if(U.lenbits=9,te={bits:U.lenbits},Q=a(1,U.lens,0,U.nlen,U.lencode,0,U.work,te),U.lenbits=te.bits,Q){e.msg="invalid literal/lengths set",U.mode=T;break}if(U.distbits=6,U.distcode=U.distdyn,te={bits:U.distbits},Q=a(2,U.lens,U.nlen,U.ndist,U.distcode,0,U.work,te),U.distbits=te.bits,Q){e.msg="invalid distances set",U.mode=T;break}if(U.mode=y,t===l)break e;case y:U.mode=v;case v:if(D>=6&&Z>=258){e.next_out=B,e.avail_out=Z,e.next_in=z,e.avail_in=D,U.hold=M,U.bits=N,n(e,G),B=e.next_out,I=e.output,Z=e.avail_out,z=e.next_in,A=e.input,D=e.avail_in,M=U.hold,N=U.bits,U.mode===g&&(U.back=-1);break}for(U.back=0;$=U.lencode[M&(1<<U.lenbits)-1],V=$>>>24,H=$>>>16&255,J=65535&$,!(V<=N);){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}if(H&&0==(240&H)){for(K=V,Y=H,W=J;$=U.lencode[W+((M&(1<<K+Y)-1)>>K)],V=$>>>24,H=$>>>16&255,J=65535&$,!(K+V<=N);){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}M>>>=K,N-=K,U.back+=K}if(M>>>=V,N-=V,U.back+=V,U.length=J,0===H){U.mode=16205;break}if(32&H){U.back=-1,U.mode=g;break}if(64&H){e.msg="invalid literal/length code",U.mode=T;break}U.extra=15&H,U.mode=16201;case 16201:if(U.extra){for(ie=U.extra;N<ie;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}U.length+=M&(1<<U.extra)-1,M>>>=U.extra,N-=U.extra,U.back+=U.extra}U.was=U.length,U.mode=16202;case 16202:for(;$=U.distcode[M&(1<<U.distbits)-1],V=$>>>24,H=$>>>16&255,J=65535&$,!(V<=N);){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}if(0==(240&H)){for(K=V,Y=H,W=J;$=U.distcode[W+((M&(1<<K+Y)-1)>>K)],V=$>>>24,H=$>>>16&255,J=65535&$,!(K+V<=N);){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}M>>>=K,N-=K,U.back+=K}if(M>>>=V,N-=V,U.back+=V,64&H){e.msg="invalid distance code",U.mode=T;break}U.offset=J,U.extra=15&H,U.mode=16203;case 16203:if(U.extra){for(ie=U.extra;N<ie;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}U.offset+=M&(1<<U.extra)-1,M>>>=U.extra,N-=U.extra,U.back+=U.extra}if(U.offset>U.dmax){e.msg="invalid distance too far back",U.mode=T;break}U.mode=16204;case 16204:if(0===Z)break e;if(j=G-Z,U.offset>j){if(j=U.offset-j,j>U.whave&&U.sane){e.msg="invalid distance too far back",U.mode=T;break}j>U.wnext?(j-=U.wnext,F=U.wsize-j):F=U.wnext-j,j>U.length&&(j=U.length),L=U.window}else L=I,F=B-U.offset,j=U.length;j>Z&&(j=Z),Z-=j,U.length-=j;do{I[B++]=L[F++]}while(--j);0===U.length&&(U.mode=v);break;case 16205:if(0===Z)break e;I[B++]=U.length,Z--,U.mode=v;break;case x:if(U.wrap){for(;N<32;){if(0===D)break e;D--,M|=A[z++]<<N,N+=8}if(G-=Z,e.total_out+=G,U.total+=G,4&U.wrap&&G&&(e.adler=U.check=U.flags?r(U.check,I,G,B-G):i(U.check,I,G,B-G)),G=Z,4&U.wrap&&(U.flags?M:R(M))!==U.check){e.msg="incorrect data check",U.mode=T;break}M=0,N=0}U.mode=16207;case 16207:if(U.wrap&&U.flags){for(;N<32;){if(0===D)break e;D--,M+=A[z++]<<N,N+=8}if(4&U.wrap&&M!==(4294967295&U.total)){e.msg="incorrect length check",U.mode=T;break}M=0,N=0}U.mode=16208;case 16208:Q=c;break e;case T:Q=u;break e;case S:return m;default:return h}return e.next_out=B,e.avail_out=Z,e.next_in=z,e.avail_in=D,U.hold=M,U.bits=N,(U.wsize||G!==e.avail_out&&U.mode<T&&(U.mode<x||t!==o))&&P(e,e.output,e.next_out,G-e.avail_out)?(U.mode=S,m):(q-=e.avail_in,G-=e.avail_out,e.total_in+=q,e.total_out+=G,U.total+=G,4&U.wrap&&G&&(e.adler=U.check=U.flags?r(U.check,I,G,e.next_out-G):i(U.check,I,G,e.next_out-G)),e.data_type=U.bits+(U.last?64:0)+(U.mode===g?128:0)+(U.mode===y||U.mode===E?256:0),(0===q&&0===G||t===o)&&Q===d&&(Q=_),Q)},t.exports.inflateEnd=e=>{if(O(e))return h;let t=e.state;return t.window&&(t.window=null),e.state=null,d},t.exports.inflateGetHeader=(e,t)=>{if(O(e))return h;const i=e.state;return 0==(2&i.wrap)?h:(i.head=t,t.done=!1,d)},t.exports.inflateSetDictionary=(e,t)=>{const r=t.length;let n,a,o;return O(e)?h:(n=e.state,0!==n.wrap&&n.mode!==p?h:n.mode===p&&(a=1,a=i(a,t,r,0),a!==n.check)?u:(o=P(e,t,r,r),o?(n.mode=S,m):(n.havedict=1,d)))},t.exports.inflateInfo="pako inflate (from Nodeca project)"}}),require_common=__commonJS({"node_modules/pako/lib/utils/common.js"(e,t){"use strict";var i=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);t.exports.assign=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const t in r)i(r,t)&&(e[t]=r[t])}}return e},t.exports.flattenChunks=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const i=new Uint8Array(t);for(let t=0,r=0,n=e.length;t<n;t++){let n=e[t];i.set(n,r),r+=n.length}return i}}}),require_strings=__commonJS({"node_modules/pako/lib/utils/strings.js"(e,t){"use strict";var i=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}var r=new Uint8Array(256);for(let e=0;e<256;e++)r[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;r[254]=r[254]=1,t.exports.string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,i,r,n,a,o=e.length,s=0;for(n=0;n<o;n++)i=e.charCodeAt(n),55296==(64512&i)&&n+1<o&&(r=e.charCodeAt(n+1),56320==(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),n++)),s+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(s),a=0,n=0;a<s;n++)i=e.charCodeAt(n),55296==(64512&i)&&n+1<o&&(r=e.charCodeAt(n+1),56320==(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),n++)),i<128?t[a++]=i:i<2048?(t[a++]=192|i>>>6,t[a++]=128|63&i):i<65536?(t[a++]=224|i>>>12,t[a++]=128|i>>>6&63,t[a++]=128|63&i):(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63,t[a++]=128|i>>>6&63,t[a++]=128|63&i);return t},t.exports.buf2string=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let a,o;const s=new Array(2*n);for(o=0,a=0;a<n;){let t=e[a++];if(t<128){s[o++]=t;continue}let i=r[t];if(i>4)s[o++]=65533,a+=i-1;else{for(t&=2===i?31:3===i?15:7;i>1&&a<n;)t=t<<6|63&e[a++],i--;i>1?s[o++]=65533:t<65536?s[o++]=t:(t-=65536,s[o++]=55296|t>>10&1023,s[o++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&i)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let i=0;i<t;i++)r+=String.fromCharCode(e[i]);return r})(s,o)},t.exports.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let i=t-1;for(;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+r[e[i]]>t?i:t}}}),require_messages=__commonJS({"node_modules/pako/lib/zlib/messages.js"(e,t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}}),require_zstream=__commonJS({"node_modules/pako/lib/zlib/zstream.js"(e,t){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}}}),require_gzheader=__commonJS({"node_modules/pako/lib/zlib/gzheader.js"(e,t){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}}),require_inflate2=__commonJS({"node_modules/pako/lib/inflate.js"(e,t){"use strict";var i=require_inflate(),r=require_common(),n=require_strings(),a=require_messages(),o=require_zstream(),s=require_gzheader(),l=Object.prototype.toString,{Z_NO_FLUSH:d,Z_FINISH:c,Z_OK:f,Z_STREAM_END:h,Z_NEED_DICT:u,Z_STREAM_ERROR:m,Z_DATA_ERROR:_,Z_MEM_ERROR:w}=require_constants();function b(e){this.options=r.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;let d=i.inflateInit2(this.strm,t.windowBits);if(d!==f)throw new Error(a[d]);if(this.header=new s,i.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=n.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(d=i.inflateSetDictionary(this.strm,t.dictionary),d!==f)))throw new Error(a[d])}function p(e,t){const i=new b(t);if(i.push(e),i.err)throw i.msg||a[i.err];return i.result}b.prototype.push=function(e,t){const r=this.strm,a=this.options.chunkSize,o=this.options.dictionary;let s,b,p;if(this.ended)return!1;for(b=t===~~t?t:!0===t?c:d,"[object ArrayBuffer]"===l.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),s=i.inflate(r,b),s===u&&o&&(s=i.inflateSetDictionary(r,o),s===f?s=i.inflate(r,b):s===_&&(s=u));r.avail_in>0&&s===h&&r.state.wrap>0&&0!==e[r.next_in];)i.inflateReset(r),s=i.inflate(r,b);switch(s){case m:case _:case u:case w:return this.onEnd(s),this.ended=!0,!1}if(p=r.avail_out,r.next_out&&(0===r.avail_out||s===h))if("string"===this.options.to){let e=n.utf8border(r.output,r.next_out),t=r.next_out-e,i=n.buf2string(r.output,e);r.next_out=t,r.avail_out=a-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==f||0!==p){if(s===h)return s=i.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},b.prototype.onData=function(e){this.chunks.push(e)},b.prototype.onEnd=function(e){e===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.exports.Inflate=b,t.exports.inflate=p,t.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},t.exports.ungzip=p,t.exports.constants=require_constants()}}),compressedMagic=1953029805,compressedMagicSwap=2917034100;function decodeGoogleEarthEnterpriseData(e,t){if(decodeGoogleEarthEnterpriseData.passThroughDataForTesting)return t;Check_default.typeOf.object("key",e),Check_default.typeOf.object("data",t);const i=e.byteLength;if(0===i||i%4!=0)throw new RuntimeError_default("The length of key must be greater than 0 and a multiple of 4.");const r=new DataView(t),n=r.getUint32(0,!0);if(n===compressedMagic||n===compressedMagicSwap)return t;const a=new DataView(e);let o=0;const s=t.byteLength,l=s-s%8,d=i;let c,f=8;for(;o<l;)for(f=(f+8)%24,c=f;o<l&&c<d;)r.setUint32(o,r.getUint32(o,!0)^a.getUint32(c,!0),!0),r.setUint32(o+4,r.getUint32(o+4,!0)^a.getUint32(c+4,!0),!0),o+=8,c+=24;if(o<s)for(c>=d&&(f=(f+8)%24,c=f);o<s;)r.setUint8(o,r.getUint8(o)^a.getUint8(c)),o++,c++}decodeGoogleEarthEnterpriseData.passThroughDataForTesting=!1;var decodeGoogleEarthEnterpriseData_default=decodeGoogleEarthEnterpriseData;function isBitSet(e,t){return 0!=(e&t)}var isBitSet_default=isBitSet,childrenBitmasks=[1,2,4,8],anyChildBitmask=15,cacheFlagBitmask=16,imageBitmask=64,terrainBitmask=128;function GoogleEarthEnterpriseTileInformation(e,t,i,r,n,a){this._bits=e,this.cnodeVersion=t,this.imageryVersion=i,this.terrainVersion=r,this.imageryProvider=n,this.terrainProvider=a,this.ancestorHasTerrain=!1,this.terrainState=void 0}GoogleEarthEnterpriseTileInformation.clone=function(e,t){return defined_default(t)?(t._bits=e._bits,t.cnodeVersion=e.cnodeVersion,t.imageryVersion=e.imageryVersion,t.terrainVersion=e.terrainVersion,t.imageryProvider=e.imageryProvider,t.terrainProvider=e.terrainProvider):t=new GoogleEarthEnterpriseTileInformation(e._bits,e.cnodeVersion,e.imageryVersion,e.terrainVersion,e.imageryProvider,e.terrainProvider),t.ancestorHasTerrain=e.ancestorHasTerrain,t.terrainState=e.terrainState,t},GoogleEarthEnterpriseTileInformation.prototype.setParent=function(e){this.ancestorHasTerrain=e.ancestorHasTerrain||this.hasTerrain()},GoogleEarthEnterpriseTileInformation.prototype.hasSubtree=function(){return isBitSet_default(this._bits,cacheFlagBitmask)},GoogleEarthEnterpriseTileInformation.prototype.hasImagery=function(){return isBitSet_default(this._bits,imageBitmask)},GoogleEarthEnterpriseTileInformation.prototype.hasTerrain=function(){return isBitSet_default(this._bits,terrainBitmask)},GoogleEarthEnterpriseTileInformation.prototype.hasChildren=function(){return isBitSet_default(this._bits,anyChildBitmask)},GoogleEarthEnterpriseTileInformation.prototype.hasChild=function(e){return isBitSet_default(this._bits,childrenBitmasks[e])},GoogleEarthEnterpriseTileInformation.prototype.getChildBitmask=function(){return this._bits&anyChildBitmask};var GoogleEarthEnterpriseTileInformation_default=GoogleEarthEnterpriseTileInformation,import_inflate=__toESM(require_inflate2(),1),sizeOfUint16=Uint16Array.BYTES_PER_ELEMENT,sizeOfInt32=Int32Array.BYTES_PER_ELEMENT,sizeOfUint32=Uint32Array.BYTES_PER_ELEMENT,Types={METADATA:0,TERRAIN:1,DBROOT:2};function decodeGoogleEarthEnterprisePacket(e,t){const i=Types.fromString(e.type);let r=e.buffer;decodeGoogleEarthEnterpriseData_default(e.key,r);const n=uncompressPacket(r);r=n.buffer;const a=n.length;switch(i){case Types.METADATA:return processMetadata(r,a,e.quadKey);case Types.TERRAIN:return processTerrain(r,a,t);case Types.DBROOT:return t.push(r),{buffer:r}}}Types.fromString=function(e){return"Metadata"===e?Types.METADATA:"Terrain"===e?Types.TERRAIN:"DbRoot"===e?Types.DBROOT:void 0};var qtMagic=32301;function processMetadata(e,t,i){const r=new DataView(e);let n=0;const a=r.getUint32(n,!0);if(n+=sizeOfUint32,a!==qtMagic)throw new RuntimeError_default("Invalid magic");const o=r.getUint32(n,!0);if(n+=sizeOfUint32,1!==o)throw new RuntimeError_default("Invalid data type. Must be 1 for QuadTreePacket");const s=r.getUint32(n,!0);if(n+=sizeOfUint32,2!==s)throw new RuntimeError_default("Invalid QuadTreePacket version. Only version 2 is supported.");const l=r.getInt32(n,!0);n+=sizeOfInt32;const d=r.getInt32(n,!0);if(n+=sizeOfInt32,32!==d)throw new RuntimeError_default("Invalid instance size.");const c=r.getInt32(n,!0);n+=sizeOfInt32;const f=r.getInt32(n,!0);n+=sizeOfInt32;const h=r.getInt32(n,!0);if(n+=sizeOfInt32,c!==l*d+n)throw new RuntimeError_default("Invalid dataBufferOffset");if(c+f+h!==t)throw new RuntimeError_default("Invalid packet offsets");const u=[];for(let e=0;e<l;++e){const e=r.getUint8(n);++n,++n;const t=r.getUint16(n,!0);n+=sizeOfUint16;const i=r.getUint16(n,!0);n+=sizeOfUint16;const a=r.getUint16(n,!0);n+=sizeOfUint16,n+=sizeOfUint16,n+=sizeOfUint16,n+=sizeOfInt32,n+=sizeOfInt32,n+=8;const o=r.getUint8(n++),s=r.getUint8(n++);n+=sizeOfUint16,u.push(new GoogleEarthEnterpriseTileInformation_default(e,t,i,a,o,s))}const m=[];let _=0,w=0;const b=u[_++];return""===i?++w:m[i]=b,function e(t,i,r){let n=!1;if(4===r){if(i.hasSubtree())return;n=!0}for(let a=0;a<4;++a){const o=t+a.toString();if(n)m[o]=null;else if(r<4)if(i.hasChild(a)){if(_===l)return void console.log("Incorrect number of instances");const t=u[_++];m[o]=t,e(o,t,r+1)}else m[o]=null}}(i,b,w),m}var numMeshesPerPacket=5,numSubMeshesPerMesh=4;function processTerrain(e,t,i){const r=new DataView(e),n=function(e){for(let i=0;i<numSubMeshesPerMesh;++i){const i=r.getUint32(e,!0);if(e+=sizeOfUint32,(e+=i)>t)throw new RuntimeError_default("Malformed terrain packet found.")}return e};let a=0;const o=[];for(;o.length<numMeshesPerPacket;){const t=a;a=n(a);const r=e.slice(t,a);i.push(r),o.push(r)}return o}var compressedMagic2=1953029805,compressedMagicSwap2=2917034100;function uncompressPacket(e){const t=new DataView(e);let i=0;const r=t.getUint32(i,!0);if(i+=sizeOfUint32,r!==compressedMagic2&&r!==compressedMagicSwap2)throw new RuntimeError_default("Invalid magic");const n=t.getUint32(i,r===compressedMagic2);i+=sizeOfUint32;const a=new Uint8Array(e,i),o=import_inflate.default.inflate(a);if(o.length!==n)throw new RuntimeError_default("Size of packet doesn't match header");return o}var decodeGoogleEarthEnterprisePacket_default=createTaskProcessorWorker_default(decodeGoogleEarthEnterprisePacket);export{decodeGoogleEarthEnterprisePacket_default as default};