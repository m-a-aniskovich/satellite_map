/*! For license information please see chunk-ZVUAJKAL.js.LICENSE.txt */
import{EllipsoidRhumbLine_default}from"./chunk-6PWSSCRA.js";import{GeometryAttribute_default,Geometry_default,PrimitiveType_default}from"./chunk-OTBRPBCC.js";import{Cartesian2_default}from"./chunk-RSWBNJPT.js";import{ComponentDatatype_default}from"./chunk-Z6LPXA7S.js";import{Cartesian3_default,Cartographic_default,Ellipsoid_default}from"./chunk-PHQVHDVI.js";import{Math_default}from"./chunk-IZED7ODV.js";import{WebGLConstants_default}from"./chunk-VNRUVNIK.js";import{defaultValue_default}from"./chunk-C53JYYKX.js";import{Check_default}from"./chunk-7FEGZO3D.js";import{__commonJS,__toESM,defined_default}from"./chunk-YS4KPNLC.js";var require_earcut=__commonJS({"node_modules/earcut/src/earcut.js"(e,t){"use strict";function n(e,t,n){n=n||2;var i,u,s,o,d,f,h,x=t&&t.length,v=x?t[0]*n:e.length,y=a(e,0,v,n,!0),_=[];if(!y||y.next===y.prev)return _;if(x&&(y=function(e,t,n,i){var r,u,s,o=[];for(r=0,u=t.length;r<u;r++)(s=a(e,t[r]*i,r<u-1?t[r+1]*i:e.length,i,!1))===s.next&&(s.steiner=!0),o.push(p(s));for(o.sort(l),r=0;r<o.length;r++)n=c(o[r],n);return n}(e,t,y,n)),e.length>80*n){i=s=e[0],u=o=e[1];for(var m=n;m<v;m+=n)(d=e[m])<i&&(i=d),(f=e[m+1])<u&&(u=f),d>s&&(s=d),f>o&&(o=f);h=0!==(h=Math.max(s-i,o-u))?32767/h:0}return r(y,_,n,i,u,h,0),_}function a(e,t,n,a,i){var r,u;if(i===A(e,t,n,a)>0)for(r=t;r<n;r+=a)u=M(r,e[r],e[r+1],u);else for(r=n-a;r>=t;r-=a)u=M(r,e[r],e[r+1],u);return u&&_(u,u.next)&&(T(u),u=u.next),u}function i(e,t){if(!e)return e;t||(t=e);var n,a=e;do{if(n=!1,a.steiner||!_(a,a.next)&&0!==y(a.prev,a,a.next))a=a.next;else{if(T(a),(a=t=a.prev)===a.next)break;n=!0}}while(n||a!==t);return t}function r(e,t,n,a,l,c,f){if(e){!f&&c&&function(e,t,n,a){var i=e;do{0===i.z&&(i.z=h(i.x,i.y,t,n,a)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,a,i,r,u,s,o,d=1;do{for(n=e,e=null,r=null,u=0;n;){for(u++,a=n,s=0,t=0;t<d&&(s++,a=a.nextZ);t++);for(o=d;s>0||o>0&&a;)0!==s&&(0===o||!a||n.z<=a.z)?(i=n,n=n.nextZ,s--):(i=a,a=a.nextZ,o--),r?r.nextZ=i:e=i,i.prevZ=r,r=i;n=a}r.nextZ=null,d*=2}while(u>1)}(i)}(e,a,l,c);for(var p,x,v=e;e.prev!==e.next;)if(p=e.prev,x=e.next,c?s(e,a,l,c):u(e))t.push(p.i/n|0),t.push(e.i/n|0),t.push(x.i/n|0),T(e),e=x.next,v=x.next;else if((e=x)===v){f?1===f?r(e=o(i(e),t,n),t,n,a,l,c,2):2===f&&d(e,t,n,a,l,c):r(i(e),t,n,a,l,c,1);break}}}function u(e){var t=e.prev,n=e,a=e.next;if(y(t,n,a)>=0)return!1;for(var i=t.x,r=n.x,u=a.x,s=t.y,o=n.y,d=a.y,l=i<r?i<u?i:u:r<u?r:u,c=s<o?s<d?s:d:o<d?o:d,f=i>r?i>u?i:u:r>u?r:u,h=s>o?s>d?s:d:o>d?o:d,p=a.next;p!==t;){if(p.x>=l&&p.x<=f&&p.y>=c&&p.y<=h&&x(i,s,r,o,u,d,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function s(e,t,n,a){var i=e.prev,r=e,u=e.next;if(y(i,r,u)>=0)return!1;for(var s=i.x,o=r.x,d=u.x,l=i.y,c=r.y,f=u.y,p=s<o?s<d?s:d:o<d?o:d,v=l<c?l<f?l:f:c<f?c:f,_=s>o?s>d?s:d:o>d?o:d,m=l>c?l>f?l:f:c>f?c:f,C=h(p,v,t,n,a),S=h(_,m,t,n,a),b=e.prevZ,g=e.nextZ;b&&b.z>=C&&g&&g.z<=S;){if(b.x>=p&&b.x<=_&&b.y>=v&&b.y<=m&&b!==i&&b!==u&&x(s,l,o,c,d,f,b.x,b.y)&&y(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,g.x>=p&&g.x<=_&&g.y>=v&&g.y<=m&&g!==i&&g!==u&&x(s,l,o,c,d,f,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;b&&b.z>=C;){if(b.x>=p&&b.x<=_&&b.y>=v&&b.y<=m&&b!==i&&b!==u&&x(s,l,o,c,d,f,b.x,b.y)&&y(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;g&&g.z<=S;){if(g.x>=p&&g.x<=_&&g.y>=v&&g.y<=m&&g!==i&&g!==u&&x(s,l,o,c,d,f,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function o(e,t,n){var a=e;do{var r=a.prev,u=a.next.next;!_(r,u)&&m(r,a,a.next,u)&&b(r,u)&&b(u,r)&&(t.push(r.i/n|0),t.push(a.i/n|0),t.push(u.i/n|0),T(a),T(a.next),a=e=u),a=a.next}while(a!==e);return i(a)}function d(e,t,n,a,u,s){var o=e;do{for(var d=o.next.next;d!==o.prev;){if(o.i!==d.i&&v(o,d)){var l=g(o,d);return o=i(o,o.next),l=i(l,l.next),r(o,t,n,a,u,s,0),void r(l,t,n,a,u,s,0)}d=d.next}o=o.next}while(o!==e)}function l(e,t){return e.x-t.x}function c(e,t){var n=function(e,t){var n,a=t,i=e.x,r=e.y,u=-1/0;do{if(r<=a.y&&r>=a.next.y&&a.next.y!==a.y){var s=a.x+(r-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(s<=i&&s>u&&(u=s,n=a.x<a.next.x?a:a.next,s===i))return n}a=a.next}while(a!==t);if(!n)return null;var o,d=n,l=n.x,c=n.y,h=1/0;a=n;do{i>=a.x&&a.x>=l&&i!==a.x&&x(r<c?i:u,r,l,c,r<c?u:i,r,a.x,a.y)&&(o=Math.abs(r-a.y)/(i-a.x),b(a,e)&&(o<h||o===h&&(a.x>n.x||a.x===n.x&&f(n,a)))&&(n=a,h=o)),a=a.next}while(a!==d);return n}(e,t);if(!n)return t;var a=g(n,e);return i(a,a.next),i(n,n.next)}function f(e,t){return y(e.prev,e,t.prev)<0&&y(t.next,e,e.next)<0}function h(e,t,n,a,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-a)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function x(e,t,n,a,i,r,u,s){return(i-u)*(t-s)>=(e-u)*(r-s)&&(e-u)*(a-s)>=(n-u)*(t-s)&&(n-u)*(r-s)>=(i-u)*(a-s)}function v(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&m(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(b(e,t)&&b(t,e)&&function(e,t){var n=e,a=!1,i=(e.x+t.x)/2,r=(e.y+t.y)/2;do{n.y>r!=n.next.y>r&&n.next.y!==n.y&&i<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(a=!a),n=n.next}while(n!==e);return a}(e,t)&&(y(e.prev,e,t.prev)||y(e,t.prev,t))||_(e,t)&&y(e.prev,e,e.next)>0&&y(t.prev,t,t.next)>0)}function y(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function _(e,t){return e.x===t.x&&e.y===t.y}function m(e,t,n,a){var i=S(y(e,t,n)),r=S(y(e,t,a)),u=S(y(n,a,e)),s=S(y(n,a,t));return i!==r&&u!==s||!(0!==i||!C(e,n,t))||!(0!==r||!C(e,a,t))||!(0!==u||!C(n,e,a))||!(0!==s||!C(n,t,a))}function C(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function S(e){return e>0?1:e<0?-1:0}function b(e,t){return y(e.prev,e,e.next)<0?y(e,t,e.next)>=0&&y(e,e.prev,t)>=0:y(e,t,e.prev)<0||y(e,e.next,t)<0}function g(e,t){var n=new w(e.i,e.x,e.y),a=new w(t.i,t.x,t.y),i=e.next,r=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,a.next=n,n.prev=a,r.next=a,a.prev=r,a}function M(e,t,n,a){var i=new w(e,t,n);return a?(i.next=a.next,i.prev=a,a.next.prev=i,a.next=i):(i.prev=i,i.next=i),i}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function w(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,t,n,a){for(var i=0,r=t,u=n-a;r<n;r+=a)i+=(e[u]-e[r])*(e[r+1]+e[u+1]),u=r;return i}t.exports=n,t.exports.default=n,n.deviation=function(e,t,n,a){var i=t&&t.length,r=i?t[0]*n:e.length,u=Math.abs(A(e,0,r,n));if(i)for(var s=0,o=t.length;s<o;s++){var d=t[s]*n,l=s<o-1?t[s+1]*n:e.length;u-=Math.abs(A(e,d,l,n))}var c=0;for(s=0;s<a.length;s+=3){var f=a[s]*n,h=a[s+1]*n,p=a[s+2]*n;c+=Math.abs((e[f]-e[p])*(e[h+1]-e[f+1])-(e[f]-e[h])*(e[p+1]-e[f+1]))}return 0===u&&0===c?0:Math.abs((c-u)/u)},n.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},a=0,i=0;i<e.length;i++){for(var r=0;r<e[i].length;r++)for(var u=0;u<t;u++)n.vertices.push(e[i][r][u]);i>0&&(a+=e[i-1].length,n.holes.push(a))}return n}}}),WindingOrder={CLOCKWISE:WebGLConstants_default.CW,COUNTER_CLOCKWISE:WebGLConstants_default.CCW,validate:function(e){return e===WindingOrder.CLOCKWISE||e===WindingOrder.COUNTER_CLOCKWISE}},WindingOrder_default=Object.freeze(WindingOrder),import_earcut=__toESM(require_earcut(),1),scaleToGeodeticHeightN=new Cartesian3_default,scaleToGeodeticHeightP=new Cartesian3_default,PolygonPipeline={computeArea2D:function(e){Check_default.defined("positions",e),Check_default.typeOf.number.greaterThanOrEquals("positions.length",e.length,3);const t=e.length;let n=0;for(let a=t-1,i=0;i<t;a=i++){const t=e[a],r=e[i];n+=t.x*r.y-r.x*t.y}return.5*n},computeWindingOrder2D:function(e){return PolygonPipeline.computeArea2D(e)>0?WindingOrder_default.COUNTER_CLOCKWISE:WindingOrder_default.CLOCKWISE},triangulate:function(e,t){Check_default.defined("positions",e);const n=Cartesian2_default.packArray(e);return(0,import_earcut.default)(n,t,2)}},subdivisionV0Scratch=new Cartesian3_default,subdivisionV1Scratch=new Cartesian3_default,subdivisionV2Scratch=new Cartesian3_default,subdivisionS0Scratch=new Cartesian3_default,subdivisionS1Scratch=new Cartesian3_default,subdivisionS2Scratch=new Cartesian3_default,subdivisionMidScratch=new Cartesian3_default,subdivisionT0Scratch=new Cartesian2_default,subdivisionT1Scratch=new Cartesian2_default,subdivisionT2Scratch=new Cartesian2_default,subdivisionTexcoordMidScratch=new Cartesian2_default;PolygonPipeline.computeSubdivision=function(e,t,n,a,i){i=defaultValue_default(i,Math_default.RADIANS_PER_DEGREE);const r=defined_default(a);Check_default.typeOf.object("ellipsoid",e),Check_default.defined("positions",t),Check_default.defined("indices",n),Check_default.typeOf.number.greaterThanOrEquals("indices.length",n.length,3),Check_default.typeOf.number.equals("indices.length % 3","0",n.length%3,0),Check_default.typeOf.number.greaterThan("granularity",i,0);const u=n.slice(0);let s;const o=t.length,d=new Array(3*o),l=new Array(2*o);let c=0,f=0;for(s=0;s<o;s++){const e=t[s];if(d[c++]=e.x,d[c++]=e.y,d[c++]=e.z,r){const e=a[s];l[f++]=e.x,l[f++]=e.y}}const h=[],p={},x=e.maximumRadius,v=Math_default.chordLength(i,x),y=v*v;for(;u.length>0;){const e=u.pop(),t=u.pop(),n=u.pop(),a=Cartesian3_default.fromArray(d,3*n,subdivisionV0Scratch),i=Cartesian3_default.fromArray(d,3*t,subdivisionV1Scratch),o=Cartesian3_default.fromArray(d,3*e,subdivisionV2Scratch);let c,f,v;r&&(c=Cartesian2_default.fromArray(l,2*n,subdivisionT0Scratch),f=Cartesian2_default.fromArray(l,2*t,subdivisionT1Scratch),v=Cartesian2_default.fromArray(l,2*e,subdivisionT2Scratch));const _=Cartesian3_default.multiplyByScalar(Cartesian3_default.normalize(a,subdivisionS0Scratch),x,subdivisionS0Scratch),m=Cartesian3_default.multiplyByScalar(Cartesian3_default.normalize(i,subdivisionS1Scratch),x,subdivisionS1Scratch),C=Cartesian3_default.multiplyByScalar(Cartesian3_default.normalize(o,subdivisionS2Scratch),x,subdivisionS2Scratch),S=Cartesian3_default.magnitudeSquared(Cartesian3_default.subtract(_,m,subdivisionMidScratch)),b=Cartesian3_default.magnitudeSquared(Cartesian3_default.subtract(m,C,subdivisionMidScratch)),g=Cartesian3_default.magnitudeSquared(Cartesian3_default.subtract(C,_,subdivisionMidScratch)),M=Math.max(S,b,g);let T,w,A;M>y?S===M?(T=`${Math.min(n,t)} ${Math.max(n,t)}`,s=p[T],defined_default(s)||(w=Cartesian3_default.add(a,i,subdivisionMidScratch),Cartesian3_default.multiplyByScalar(w,.5,w),d.push(w.x,w.y,w.z),s=d.length/3-1,p[T]=s,r&&(A=Cartesian2_default.add(c,f,subdivisionTexcoordMidScratch),Cartesian2_default.multiplyByScalar(A,.5,A),l.push(A.x,A.y))),u.push(n,s,e),u.push(s,t,e)):b===M?(T=`${Math.min(t,e)} ${Math.max(t,e)}`,s=p[T],defined_default(s)||(w=Cartesian3_default.add(i,o,subdivisionMidScratch),Cartesian3_default.multiplyByScalar(w,.5,w),d.push(w.x,w.y,w.z),s=d.length/3-1,p[T]=s,r&&(A=Cartesian2_default.add(f,v,subdivisionTexcoordMidScratch),Cartesian2_default.multiplyByScalar(A,.5,A),l.push(A.x,A.y))),u.push(t,s,n),u.push(s,e,n)):g===M&&(T=`${Math.min(e,n)} ${Math.max(e,n)}`,s=p[T],defined_default(s)||(w=Cartesian3_default.add(o,a,subdivisionMidScratch),Cartesian3_default.multiplyByScalar(w,.5,w),d.push(w.x,w.y,w.z),s=d.length/3-1,p[T]=s,r&&(A=Cartesian2_default.add(v,c,subdivisionTexcoordMidScratch),Cartesian2_default.multiplyByScalar(A,.5,A),l.push(A.x,A.y))),u.push(e,s,t),u.push(s,n,t)):(h.push(n),h.push(t),h.push(e))}const _={attributes:{position:new GeometryAttribute_default({componentDatatype:ComponentDatatype_default.DOUBLE,componentsPerAttribute:3,values:d})},indices:h,primitiveType:PrimitiveType_default.TRIANGLES};return r&&(_.attributes.st=new GeometryAttribute_default({componentDatatype:ComponentDatatype_default.FLOAT,componentsPerAttribute:2,values:l})),new Geometry_default(_)};var subdivisionC0Scratch=new Cartographic_default,subdivisionC1Scratch=new Cartographic_default,subdivisionC2Scratch=new Cartographic_default,subdivisionCartographicScratch=new Cartographic_default;PolygonPipeline.computeRhumbLineSubdivision=function(e,t,n,a,i){i=defaultValue_default(i,Math_default.RADIANS_PER_DEGREE);const r=defined_default(a);Check_default.typeOf.object("ellipsoid",e),Check_default.defined("positions",t),Check_default.defined("indices",n),Check_default.typeOf.number.greaterThanOrEquals("indices.length",n.length,3),Check_default.typeOf.number.equals("indices.length % 3","0",n.length%3,0),Check_default.typeOf.number.greaterThan("granularity",i,0);const u=n.slice(0);let s;const o=t.length,d=new Array(3*o),l=new Array(2*o);let c=0,f=0;for(s=0;s<o;s++){const e=t[s];if(d[c++]=e.x,d[c++]=e.y,d[c++]=e.z,r){const e=a[s];l[f++]=e.x,l[f++]=e.y}}const h=[],p={},x=e.maximumRadius,v=Math_default.chordLength(i,x),y=new EllipsoidRhumbLine_default(void 0,void 0,e),_=new EllipsoidRhumbLine_default(void 0,void 0,e),m=new EllipsoidRhumbLine_default(void 0,void 0,e);for(;u.length>0;){const t=u.pop(),n=u.pop(),a=u.pop(),i=Cartesian3_default.fromArray(d,3*a,subdivisionV0Scratch),o=Cartesian3_default.fromArray(d,3*n,subdivisionV1Scratch),c=Cartesian3_default.fromArray(d,3*t,subdivisionV2Scratch);let f,x,C;r&&(f=Cartesian2_default.fromArray(l,2*a,subdivisionT0Scratch),x=Cartesian2_default.fromArray(l,2*n,subdivisionT1Scratch),C=Cartesian2_default.fromArray(l,2*t,subdivisionT2Scratch));const S=e.cartesianToCartographic(i,subdivisionC0Scratch),b=e.cartesianToCartographic(o,subdivisionC1Scratch),g=e.cartesianToCartographic(c,subdivisionC2Scratch);y.setEndPoints(S,b);const M=y.surfaceDistance;_.setEndPoints(b,g);const T=_.surfaceDistance;m.setEndPoints(g,S);const w=m.surfaceDistance,A=Math.max(M,T,w);let O,E,P,Z,k;A>v?M===A?(O=`${Math.min(a,n)} ${Math.max(a,n)}`,s=p[O],defined_default(s)||(E=y.interpolateUsingFraction(.5,subdivisionCartographicScratch),P=.5*(S.height+b.height),Z=Cartesian3_default.fromRadians(E.longitude,E.latitude,P,e,subdivisionMidScratch),d.push(Z.x,Z.y,Z.z),s=d.length/3-1,p[O]=s,r&&(k=Cartesian2_default.add(f,x,subdivisionTexcoordMidScratch),Cartesian2_default.multiplyByScalar(k,.5,k),l.push(k.x,k.y))),u.push(a,s,t),u.push(s,n,t)):T===A?(O=`${Math.min(n,t)} ${Math.max(n,t)}`,s=p[O],defined_default(s)||(E=_.interpolateUsingFraction(.5,subdivisionCartographicScratch),P=.5*(b.height+g.height),Z=Cartesian3_default.fromRadians(E.longitude,E.latitude,P,e,subdivisionMidScratch),d.push(Z.x,Z.y,Z.z),s=d.length/3-1,p[O]=s,r&&(k=Cartesian2_default.add(x,C,subdivisionTexcoordMidScratch),Cartesian2_default.multiplyByScalar(k,.5,k),l.push(k.x,k.y))),u.push(n,s,a),u.push(s,t,a)):w===A&&(O=`${Math.min(t,a)} ${Math.max(t,a)}`,s=p[O],defined_default(s)||(E=m.interpolateUsingFraction(.5,subdivisionCartographicScratch),P=.5*(g.height+S.height),Z=Cartesian3_default.fromRadians(E.longitude,E.latitude,P,e,subdivisionMidScratch),d.push(Z.x,Z.y,Z.z),s=d.length/3-1,p[O]=s,r&&(k=Cartesian2_default.add(C,f,subdivisionTexcoordMidScratch),Cartesian2_default.multiplyByScalar(k,.5,k),l.push(k.x,k.y))),u.push(t,s,n),u.push(s,a,n)):(h.push(a),h.push(n),h.push(t))}const C={attributes:{position:new GeometryAttribute_default({componentDatatype:ComponentDatatype_default.DOUBLE,componentsPerAttribute:3,values:d})},indices:h,primitiveType:PrimitiveType_default.TRIANGLES};return r&&(C.attributes.st=new GeometryAttribute_default({componentDatatype:ComponentDatatype_default.FLOAT,componentsPerAttribute:2,values:l})),new Geometry_default(C)},PolygonPipeline.scaleToGeodeticHeight=function(e,t,n,a){n=defaultValue_default(n,Ellipsoid_default.WGS84);let i=scaleToGeodeticHeightN,r=scaleToGeodeticHeightP;if(t=defaultValue_default(t,0),a=defaultValue_default(a,!0),defined_default(e)){const u=e.length;for(let s=0;s<u;s+=3)Cartesian3_default.fromArray(e,s,r),a&&(r=n.scaleToGeodeticSurface(r,r)),0!==t&&(i=n.geodeticSurfaceNormal(r,i),Cartesian3_default.multiplyByScalar(i,t,i),Cartesian3_default.add(r,i,r)),e[s]=r.x,e[s+1]=r.y,e[s+2]=r.z}return e};var PolygonPipeline_default=PolygonPipeline;export{WindingOrder_default,PolygonPipeline_default};