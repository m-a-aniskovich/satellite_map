/*! For license information please see chunk-AI3KSNM6.js.LICENSE.txt */
import{defined_default}from"./chunk-YS4KPNLC.js";function formatError(r){let e;const s=r.name,a=r.message;e=defined_default(s)&&defined_default(a)?`${s}: ${a}`:r.toString();const t=r.stack;return defined_default(t)&&(e+=`\n${t}`),e}var formatError_default=formatError;function createTaskProcessorWorker(r){return self.onmessage=async function({data:e}){const s=[],a={id:e.id,result:void 0,error:void 0};self.CESIUM_BASE_URL=e.baseUrl;try{const t=await r(e.parameters,s);a.result=t}catch(r){r instanceof Error?a.error={name:r.name,message:r.message,stack:r.stack}:a.error=r}e.canTransferArrayBuffer||(s.length=0);try{postMessage(a,s)}catch(r){a.result=void 0,a.error=`postMessage failed with error: ${formatError_default(r)}\n  with responseMessage: ${JSON.stringify(a)}`,postMessage(a)}},self.onmessageerror=function(r){postMessage({id:r.data?.id,error:`postMessage failed with error: ${JSON.stringify(r)}`})},self}var createTaskProcessorWorker_default=createTaskProcessorWorker;export{createTaskProcessorWorker_default};