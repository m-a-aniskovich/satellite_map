{"version":3,"file":"js/969.cfa0faa2.js","mappings":"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","sources":["webpack://SatVis/./src/App.vue","webpack://SatVis/./src/App.vue?9d78","webpack://SatVis/./src/components/Satvis.vue","webpack://SatVis/./src/stores/cesium.js","webpack://SatVis/./src/stores/sat.js","webpack://SatVis/./src/components/SatelliteSelect.vue","webpack://SatVis/./src/components/SatelliteSelect.vue?44fd","webpack://SatVis/./src/modules/util/DeviceDetect.js","webpack://SatVis/./src/components/Satvis.vue?c47a","webpack://SatVis/./src/components/Router.js","webpack://SatVis/./src/modules/util/pinia-plugin-url-sync.ts","webpack://SatVis/./src/modules/util/CesiumPerformanceStats.js","webpack://SatVis/./src/modules/Orbit.js","webpack://SatVis/./src/modules/util/PushManager.js","webpack://SatVis/./src/modules/util/CesiumSampledPositionRawValueAccess.js","webpack://SatVis/./src/modules/util/CesiumCallbackHelper.js","webpack://SatVis/./src/modules/SatelliteProperties.js","webpack://SatVis/./src/modules/util/CesiumComponentCollection.js","webpack://SatVis/./src/modules/util/CesiumTimelineHelper.js","webpack://SatVis/./src/modules/util/DescriptionHelper.js","webpack://SatVis/./src/modules/SatelliteComponentCollection.js","webpack://SatVis/./src/modules/GroundStationEntity.js","webpack://SatVis/./src/modules/util/CesiumCleanupHelper.js","webpack://SatVis/./src/modules/SatelliteManager.js","webpack://SatVis/./src/modules/CesiumController.js","webpack://SatVis/./src/app.js","webpack://SatVis/./src/css/infobox.ecss"],"sourcesContent":["<template>\n  <div class=\"app\">\n    <router-view />\n  </div>\n</template>\n\n<script>\nimport \"@cesium/widgets/Source/widgets.css\";\nimport \"./css/main.css\";\n\nexport default {\n};\n</script>\n","import { render } from \"./App.vue?vue&type=template&id=6a189f7d\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"cesium\">\n    <div v-show=\"showUI\" id=\"toolbarLeft\">\n      <div class=\"toolbarButtons\">\n        <o-tooltip label=\"Satellite selection\" :triggers=\"tooltipTriggers\" position=\"right\">\n          <button type=\"button\" class=\"cesium-button cesium-toolbar-button\" @click=\"toggleMenu('cat')\">\n            <i class=\"icon svg-sat\"></i>\n          </button>\n        </o-tooltip>\n        <o-tooltip label=\"Satellite elements\" :triggers=\"tooltipTriggers\" position=\"right\">\n          <button type=\"button\" class=\"cesium-button cesium-toolbar-button\" @click=\"toggleMenu('sat')\">\n            <font-awesome-icon icon=\"fas fa-layer-group\" />\n          </button>\n        </o-tooltip>\n        <o-tooltip label=\"Ground station\" :triggers=\"tooltipTriggers\" position=\"right\">\n          <button type=\"button\" class=\"cesium-button cesium-toolbar-button\" @click=\"toggleMenu('gs')\">\n            <i class=\"icon svg-groundstation\"></i>\n          </button>\n        </o-tooltip>\n        <o-tooltip label=\"Map\" :triggers=\"tooltipTriggers\" position=\"right\">\n          <button type=\"button\" class=\"cesium-button cesium-toolbar-button\" @click=\"toggleMenu('map')\">\n            <font-awesome-icon icon=\"fas fa-globe-africa\" />\n          </button>\n        </o-tooltip>\n        <o-tooltip v-if=\"cc.minimalUI\" label=\"Mobile\" :triggers=\"tooltipTriggers\" position=\"right\">\n          <button type=\"button\" class=\"cesium-button cesium-toolbar-button\" @click=\"toggleMenu('ios')\">\n            <font-awesome-icon icon=\"fas fa-mobile-alt\" />\n          </button>\n        </o-tooltip>\n        <o-tooltip label=\"Debug\" :triggers=\"tooltipTriggers\" position=\"right\">\n          <button type=\"button\" class=\"cesium-button cesium-toolbar-button\" @click=\"toggleMenu('dbg')\">\n            <font-awesome-icon icon=\"fas fa-hammer\" />\n          </button>\n        </o-tooltip>\n      </div>\n      <div v-show=\"menu.cat\" class=\"toolbarSwitches\">\n        <satellite-select />\n      </div>\n      <div v-show=\"menu.sat\" class=\"toolbarSwitches\">\n        <div class=\"toolbarTitle\">\n          Satellite elements\n        </div>\n        <label v-for=\"componentName in cc.sats.availableComponents\" :key=\"componentName\" class=\"toolbarSwitch\">\n          <input v-model=\"enabledComponents\" type=\"checkbox\" :value=\"componentName\">\n          <span class=\"slider\"></span>\n          {{ componentName }}\n        </label>\n        <!--\n        <label class=\"toolbarSwitch\">\n          <input type=\"button\" @click=\"cc.viewer.trackedEntity = undefined\">\n          Untrack Entity\n        </label>\n        -->\n      </div>\n      <div v-show=\"menu.gs\" class=\"toolbarSwitches\">\n        <div class=\"toolbarTitle\">\n          Ground station\n        </div>\n        <label class=\"toolbarSwitch\">\n          <input v-model=\"pickMode\" type=\"checkbox\">\n          <span class=\"slider\"></span>\n          Pick on globe\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input type=\"button\" @click=\"cc.setGroundStationFromGeolocation()\">\n          Set from geolocation\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input type=\"button\" @click=\"cc.sats.focusGroundStation()\">\n          Focus\n        </label>\n      </div>\n      <div v-show=\"menu.map\" class=\"toolbarSwitches\">\n        <div class=\"toolbarTitle\">\n          Layers\n        </div>\n        <label v-for=\"name in cc.imageryProviderNames\" :key=\"name\" class=\"toolbarSwitch\">\n          <input v-model=\"layers\" type=\"checkbox\" :value=\"name\">\n          <span class=\"slider\"></span>\n          {{ name }}\n        </label>\n        <div class=\"toolbarTitle\">\n          Terrain\n        </div>\n        <label v-for=\"name in cc.terrainProviderNames\" :key=\"name\" class=\"toolbarSwitch\">\n          <input v-model=\"terrainProvider\" type=\"radio\" :value=\"name\">\n          <span class=\"slider\"></span>\n          {{ name }}\n        </label>\n        <div class=\"toolbarTitle\">\n          View\n        </div>\n        <label v-for=\"name in cc.sceneModes\" :key=\"name\" class=\"toolbarSwitch\">\n          <input v-model=\"sceneMode\" type=\"radio\" :value=\"name\">\n          <span class=\"slider\"></span>\n          {{ name }}\n        </label>\n        <div class=\"toolbarTitle\">\n          Camera\n        </div>\n        <label v-for=\"name in cc.cameraModes\" :key=\"name\" class=\"toolbarSwitch\">\n          <input v-model=\"cameraMode\" type=\"radio\" :value=\"name\">\n          <span class=\"slider\"></span>\n          {{ name }}\n        </label>\n      </div>\n      <div v-show=\"menu.ios\" class=\"toolbarSwitches\">\n        <div class=\"toolbarTitle\">\n          Mobile\n        </div>\n        <label class=\"toolbarSwitch\">\n          <input v-model=\"cc.viewer.scene.useWebVR\" type=\"checkbox\">\n          <span class=\"slider\"></span>\n          VR\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input v-model=\"cc.viewer.clock.shouldAnimate\" type=\"checkbox\">\n          <span class=\"slider\"></span>\n          Play\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input type=\"button\" @click=\"cc.viewer.clockViewModel.multiplier *= 2\">\n          Increase play speed\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input type=\"button\" @click=\"cc.viewer.clockViewModel.multiplier /= 2\">\n          Decrease play speed\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input type=\"button\" @click=\"$router.go({path: '', force: true})\">\n          Reload\n        </label>\n      </div>\n      <div v-show=\"menu.dbg\" class=\"toolbarSwitches\">\n        <div class=\"toolbarTitle\">\n          Debug\n        </div>\n        <label class=\"toolbarSwitch\">\n          <input v-model=\"showFps\" type=\"checkbox\">\n          <span class=\"slider\"></span>\n          FPS\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input v-model=\"cc.viewer.scene.requestRenderMode\" type=\"checkbox\">\n          <span class=\"slider\"></span>\n          RequestRender\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input v-model=\"qualityPreset\" true-value=\"high\" false-value=\"low\" type=\"checkbox\">\n          <span class=\"slider\"></span>\n          High Quality\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input v-model=\"cc.viewer.scene.fog.enabled\" type=\"checkbox\">\n          <span class=\"slider\"></span>\n          Fog\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input v-model=\"cc.viewer.scene.globe.enableLighting\" type=\"checkbox\">\n          <span class=\"slider\"></span>\n          Lighting\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input v-model=\"cc.viewer.scene.highDynamicRange\" type=\"checkbox\">\n          <span class=\"slider\"></span>\n          HDR\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input v-model=\"cc.viewer.scene.globe.showGroundAtmosphere\" type=\"checkbox\">\n          <span class=\"slider\"></span>\n          Atmosphere\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input type=\"button\" @click=\"cc.jumpTo('Everest')\">\n          Jump to Everest\n        </label>\n        <label class=\"toolbarSwitch\">\n          <input type=\"button\" @click=\"cc.jumpTo('HalfDome')\">\n          Jump to HalfDome\n        </label>\n      </div>\n    </div>\n    <div id=\"toolbarRight\">\n      <o-tooltip v-if=\"showUI\" label=\"Github\" :triggers=\"tooltipTriggers\" position=\"left\">\n        <a class=\"cesium-button cesium-toolbar-button\" href=\"https://github.com/Flowm/satvis/\" target=\"_blank\" rel=\"noopener\">\n          <font-awesome-icon icon=\"fab fa-github\" />\n        </a>\n      </o-tooltip>\n      <o-tooltip label=\"Toggle UI\" :triggers=\"tooltipTriggers\" position=\"left\">\n        <button type=\"button\" class=\"cesium-button cesium-toolbar-button\" @click=\"toggleUI\">\n          <font-awesome-icon icon=\"fas fa-eye\" />\n        </button>\n      </o-tooltip>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapWritableState } from \"pinia\";\nimport { useCesiumStore } from \"../stores/cesium\";\nimport { useSatStore } from \"../stores/sat\";\n\nimport SatelliteSelect from \"./SatelliteSelect.vue\";\nimport { DeviceDetect } from \"../modules/util/DeviceDetect\";\n\nexport default {\n  components: {\n    \"satellite-select\": SatelliteSelect,\n  },\n  data() {\n    return {\n      menu: {\n        cat: false,\n        sat: false,\n        gs: false,\n        map: false,\n        ios: false,\n        dbg: false,\n      },\n      showUI: true,\n      tooltipTriggers: DeviceDetect.canHover() ? [\"hover\"] : [\"contextmenu\"],\n    };\n  },\n  computed: {\n    ...mapWritableState(useCesiumStore, [\n      \"layers\",\n      \"terrainProvider\",\n      \"sceneMode\",\n      \"cameraMode\",\n      \"qualityPreset\",\n      \"showFps\",\n      \"background\",\n      \"pickMode\",\n    ]),\n    ...mapWritableState(useSatStore, [\n      \"enabledComponents\",\n      \"groundstation\",\n    ]),\n  },\n  watch: {\n    layers: {\n      handler(newLayers, oldLayers) {\n        // Ensure only a single base layer is active\n        const newBaseLayers = newLayers.filter((layer) => cc.baseLayers.includes(layer));\n        if (newBaseLayers.length > 1) {\n          const oldBaseLayers = oldLayers.filter((layer) => cc.baseLayers.includes(layer));\n          this.layers = newBaseLayers.filter((layer) => !oldBaseLayers.includes(layer));\n          return;\n        }\n        cc.imageryLayers = newLayers;\n      },\n      deep: true,\n    },\n    terrainProvider(newProvider) {\n      cc.terrainProvider = newProvider;\n    },\n    sceneMode(newMode) {\n      cc.sceneMode = newMode;\n    },\n    cameraMode(newMode) {\n      cc.cameraMode = newMode;\n    },\n    qualityPreset: {\n      handler(value) {\n        cc.qualityPreset = value;\n      },\n      immediate: true,\n    },\n    showFps(value) {\n      cc.showFps = value;\n    },\n    background(value) {\n      cc.background = value;\n    },\n    enabledComponents: {\n      handler(newComponents) {\n        cc.sats.enabledComponents = newComponents;\n      },\n      deep: true,\n    },\n    groundstation(newPosition, oldPosition) {\n      // Ignore if new and old positions are identical\n      if (oldPosition && oldPosition[0] === newPosition[0] && oldPosition[1] === newPosition[1]) {\n        return;\n      }\n      cc.setGroundStationFromLatLon(...newPosition);\n    },\n  },\n  mounted() {\n    if (this.$route.query.time) {\n      cc.setTime(this.$route.query.time);\n    }\n    this.showUI = !DeviceDetect.inIframe();\n  },\n  methods: {\n    toggleMenu(name) {\n      const oldState = this.menu[name];\n      Object.keys(this.menu).forEach((k) => {\n        this.menu[k] = false;\n      });\n      this.menu[name] = !oldState;\n    },\n    toggleUI() {\n      this.showUI = !this.showUI;\n      if (!cc.minimalUI) {\n        cc.showUI = this.showUI;\n      }\n    },\n  },\n};\n</script>\n","import { defineStore } from \"pinia\";\n\nexport const useCesiumStore = defineStore(\"cesium\", {\n  state: () => ({\n    layers: [\"OfflineHighres\"],\n    terrainProvider: \"None\",\n    sceneMode: \"3D\",\n    cameraMode: \"Fixed\",\n    qualityPreset: \"high\",\n    background: true,\n    showFps: false,\n    pickMode: false,\n  }),\n  urlsync: {\n    enabled: true,\n    config: [{\n      name: \"layers\",\n      url: \"layers\",\n      serialize: (v) => v.join(\",\"),\n      deserialize: (v) => v.split(\",\").filter((e) => e),\n      default: [\"OfflineHighres\"],\n    }, {\n      name: \"terrainProvider\",\n      url: \"terrain\",\n      default: \"None\",\n    }, {\n      name: \"sceneMode\",\n      url: \"scene\",\n      default: \"3D\",\n    }, {\n      name: \"cameraMode\",\n      url: \"camera\",\n      default: \"Fixed\",\n    }, {\n      name: \"qualityPreset\",\n      url: \"quality\",\n      default: \"high\",\n    }, {\n      name: \"showFps\",\n      url: \"fps\",\n      default: \"false\",\n    }, {\n      name: \"background\",\n      url: \"bg\",\n      serialize: (v) => `${v}`,\n      deserialize: (v) => v === \"true\",\n      default: \"true\",\n    }],\n  },\n});\n","import { defineStore } from \"pinia\";\n\nexport const useSatStore = defineStore(\"sat\", {\n  state: () => ({\n    enabledComponents: [\"Point\", \"Label\"],\n    availableSatellitesByTag: [],\n    availableTags: [],\n    enabledSatellites: [],\n    enabledTags: [],\n    groundstation: [],\n    trackedSatellite: \"\",\n  }),\n  urlsync: {\n    enabled: true,\n    config: [{\n      name: \"enabledComponents\",\n      url: \"elements\",\n      serialize: (v) => v.join(\",\").replaceAll(\" \", \"-\"),\n      deserialize: (v) => v.replaceAll(\"-\", \" \").split(\",\").filter((e) => e),\n      default: [\"Point\", \"Label\"],\n    }, {\n      name: \"enabledSatellites\",\n      url: \"sats\",\n      serialize: (v) => v.join(\",\").replaceAll(\" \", \"~\"),\n      deserialize: (v) => v.replaceAll(\"~\", \" \").split(\",\").filter((e) => e),\n      default: [],\n    }, {\n      name: \"enabledTags\",\n      url: \"tags\",\n      serialize: (v) => v.join(\",\").replaceAll(\" \", \"-\"),\n      deserialize: (v) => v.replaceAll(\"-\", \" \").split(\",\").filter((e) => e),\n      default: [],\n    }, {\n      name: \"groundstation\",\n      url: \"gs\",\n      serialize: (v) => v.map((c) => c.toFixed(4)).join(\",\"),\n      deserialize: (v) => v.split(\",\").map((c) => parseFloat(c, 10)),\n      default: [],\n    }, {\n      name: \"trackedSatellite\",\n      url: \"track\",\n      default: \"\",\n    }],\n  },\n});\n","<template>\n  <div class=\"satellite-select\">\n    <div class=\"toolbarTitle\">\n      Enabled satellite groups\n    </div>\n    <div class=\"toolbarContent\">\n      <vue-multiselect\n        v-model=\"enabledTags\"\n        :options=\"availableTags\"\n        :multiple=\"true\"\n        :searchable=\"false\"\n        placeholder=\"0 satellite groups selected\"\n      />\n    </div>\n    <div class=\"toolbarTitle\">\n      Enabled satellites\n    </div>\n    <div class=\"toolbarContent\">\n      <vue-multiselect\n        v-model=\"allEnabledSatellites\"\n        :options=\"availableSatellites\"\n        :multiple=\"true\"\n        group-values=\"sats\"\n        group-label=\"tag\"\n        :group-select=\"true\"\n        placeholder=\"Type to search\"\n        :close-on-select=\"false\"\n        :limit=\"0\"\n        :limit-text=\"count => `${count} satellite${ count > 1 ? 's' : '' } selected`\"\n        :options-limit=\"100000\"\n      >\n        <template #noResult>\n          No matching satellites\n        </template>\n      </vue-multiselect>\n    </div>\n  </div>\n</template>\n\n<script>\nimport VueMultiselect from \"vue-multiselect\";\nimport { mapWritableState } from \"pinia\";\n\nimport { useSatStore } from \"../stores/sat\";\n\nexport default {\n  components: {\n    VueMultiselect,\n  },\n  data() {\n    return {\n    };\n  },\n  computed: {\n    ...mapWritableState(useSatStore, [\n      \"availableSatellitesByTag\",\n      \"availableTags\",\n      \"enabledSatellites\",\n      \"enabledTags\",\n      \"trackedSatellite\",\n    ]),\n    availableSatellites() {\n      let satlist = Object.keys(this.availableSatellitesByTag).map((tag) => ({\n        tag,\n        sats: this.availableSatellitesByTag[tag],\n      }));\n      if (satlist.length === 0) {\n        satlist = [];\n      }\n      return satlist;\n    },\n    satellitesEnabledByTag() {\n      return this.getSatellitesFromTags(this.enabledTags);\n    },\n    allEnabledSatellites: {\n      get() {\n        return this.satellitesEnabledByTag.concat(this.enabledSatellites ?? []);\n      },\n      set(sats) {\n        const enabledTags = this.availableTags.filter((tag) => !this.availableSatellitesByTag[tag].some((sat) => !sats.includes(sat)));\n        const satellitesInEnabledTags = this.getSatellitesFromTags(enabledTags);\n        const enabledSatellites = sats.filter((sat) => !satellitesInEnabledTags.includes(sat));\n        cc.sats.enabledSatellites = enabledSatellites;\n        cc.sats.enabledTags = enabledTags;\n      },\n    },\n  },\n  watch: {\n    enabledSatellites(sats) {\n      cc.sats.enabledSatellites = sats;\n    },\n    enabledTags(tags) {\n      cc.sats.enabledTags = tags;\n    },\n    trackedSatellite(satellite) {\n      cc.sats.trackedSatellite = satellite;\n    },\n  },\n  methods: {\n    getSatellitesFromTags(taglist) {\n      return taglist.map((tag) => this.availableSatellitesByTag[tag] || []).flat();\n    },\n  },\n};\n</script>\n\n<style scoped>\n.satellite-select {\n  width: 300px;\n}\n</style>\n\n<style>\n@import \"vue-multiselect/dist/vue-multiselect.css\";\n\n.multiselect__single {\n  display: none;\n}\n</style>\n","import { render } from \"./SatelliteSelect.vue?vue&type=template&id=498b01ad&scoped=true\"\nimport script from \"./SatelliteSelect.vue?vue&type=script&lang=js\"\nexport * from \"./SatelliteSelect.vue?vue&type=script&lang=js\"\n\nimport \"./SatelliteSelect.vue?vue&type=style&index=0&id=498b01ad&scoped=true&lang=css\"\nimport \"./SatelliteSelect.vue?vue&type=style&index=1&id=498b01ad&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-498b01ad\"]])\n\nexport default __exports__","export class DeviceDetect {\n  static inIframe() {\n    try {\n      return window.self !== window.top;\n    } catch (e) {\n      return true;\n    }\n  }\n\n  static hasTouch() {\n    return window.matchMedia(\"(pointer: coarse)\").matches;\n  }\n\n  static canHover() {\n    return !window.matchMedia(\"(hover: none)\").matches;\n  }\n\n  static isIos() {\n    const userAgent = window.navigator.userAgent.toLowerCase();\n    return /iphone|ipad|ipod/.test(userAgent);\n  }\n\n  static isSafari() {\n    const userAgent = window.navigator.userAgent.toLowerCase();\n    return /safari/.test(userAgent);\n  }\n\n  static isInStandaloneMode() {\n    return (\"standalone\" in window.navigator) && (window.navigator.standalone);\n  }\n\n  static isiPhoneWithNotch() {\n    return this.isIos() && /iPhone X/.test(this.getiPhoneModel());\n  }\n\n  static isiPhoneWithNotchVisible() {\n    return this.isiPhoneWithNotch() && (this.isInStandaloneMode() || !this.isSafari());\n  }\n\n  static getiPhoneModel() {\n    // Detect iPhone model\n    // Based on: https://51degrees.com/blog/website-optimisation-for-apple-devices-ipad-and-iphone\n    const ratio = window.devicePixelRatio;\n    if (window.screen.height / window.screen.width === 896 / 414) {\n      switch (ratio) {\n        case 2:\n          return \"iPhone XR\";\n        case 3:\n          return \"iPhone XS Max\";\n        default:\n          return \"iPhone XR, iPhone XS Max\";\n      }\n    } else if (window.screen.height / window.screen.width === 812 / 375) {\n      return \"iPhone X, iPhone XS\";\n    } else if (window.screen.height / window.screen.width === 736 / 414) {\n      return \"iPhone 6 Plus, 6s Plus, 7 Plus or 8 Plus\";\n    } else if (window.screen.height / window.screen.width === 667 / 375) {\n      if (ratio === 2) {\n        return \"iPhone 6, 6s, 7 or 8\";\n      }\n      return \"iPhone 6 Plus, 6s Plus , 7 Plus or 8 Plus (display zoom)\";\n    } else if (window.screen.height / window.screen.width === 1.775) {\n      return \"iPhone 5, 5C, 5S, SE or 6, 6s, 7 and 8 (display zoom)\";\n    } else if ((window.screen.height / window.screen.width === 1.5) && (ratio === 2)) {\n      return \"iPhone 4 or 4s\";\n    } else if ((window.screen.height / window.screen.width === 1.5) && (ratio === 1)) {\n      return \"iPhone 1, 3G or 3GS\";\n    } else {\n      return \"Not an iPhone\";\n    }\n  }\n}\n","import { render } from \"./Satvis.vue?vue&type=template&id=6c95c8e5\"\nimport script from \"./Satvis.vue?vue&type=script&lang=js\"\nexport * from \"./Satvis.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHistory } from \"vue-router\";\n\nimport Satvis from \"./Satvis.vue\";\n\nexport default createRouter({\n  history: createWebHistory(document.location.pathname.match(\".*/\")[0]),\n  routes: [\n    { path: \"/\", component: Satvis },\n    { path: \"/move.html\", component: Satvis },\n    { path: \"/ot.html\", component: Satvis },\n  ],\n});\n","import { PiniaPluginContext } from \"pinia\";\n\nexport interface SyncConfigEntry {\n  name: String;           // Object name/path in pinia store\n  url?: String;           // Alternative name of url param, defaults to name\n  serialize?: Function;   // Convert state to url string\n  deserialize?: Function; // Convert url string to state\n  valid?: Function;       // Run validation function after deserialization to filter invalid values\n  default?: Any;          // Default value (removes this value from url)\n}\nconst defaultSerialize = (v) => String(v);\nconst defaultDeserialize = (v) => String(v);\n\nfunction resolve(path, obj, separator = \".\") {\n  const properties = Array.isArray(path) ? path : path.split(separator);\n  return properties.reduce((prev, curr) => prev && prev[curr], obj);\n}\n\nfunction urlToState(store: Store, syncConfig: SyncConfigEntry[]): void {\n  const { router, customConfig } = store;\n  const route = router.currentRoute.value;\n  store.defaults = {};\n\n  // Override store default values with custom app config\n  if (customConfig[store.$id]) {\n    Object.entries(customConfig[store.$id]).forEach(([key, val]) => {\n      store[key] = val;\n    });\n  };\n\n  syncConfig.forEach((config: SyncConfigEntry) => {\n    const param = config.url || config.name;\n    const deserialize = config.deserialize || defaultDeserialize;\n\n    // Save default value of merged app config\n    store.defaults[config.name] = store[config.name];\n\n    const query = { ...route.query };\n    if (!(param in query)) {\n      return;\n    }\n    try {\n      console.info(\"Parse url param\", param, route.query[param]);\n      const value = deserialize(query[param]);\n      if (\"valid\" in config && !config.valid(value)) {\n        throw new TypeError(\"Validation failed\");\n      }\n      // TODO: Resolve nested values\n      store[config.name] = value;\n    } catch (error) {\n      console.error(`Invalid url param ${param} ${route.query[param]}: ${error}`);\n      query[param] = undefined;\n      router.replace({ query });\n    }\n  });\n}\n\nfunction stateToUrl(store: Store, syncConfig: SyncConfigEntry[]): void {\n  const { router } = store;\n  const route = router.currentRoute.value;\n\n  const params = new URLSearchParams(location.search);\n  syncConfig.forEach((config: SyncConfigEntry) => {\n    const value = resolve(config.name, store);\n    const param = config.url || config.name;\n    const serialize = config.serialize || defaultSerialize;\n    console.info(\"State update\", config.name, value);\n\n    if (config.name in store.defaults && serialize(store.defaults[config.name]) === serialize(value)) {\n      params.delete(param);\n    } else {\n      params.set(param, serialize(value));\n    }\n  });\n  window.history.pushState({}, \"\", `?${params.toString().replaceAll(\"%2C\", \",\")}`);\n}\n\nfunction createUrlSync({ options, store }: PiniaPluginContext): void {\n  // console.info(\"createUrlSync\", options);\n  if (!options.urlsync?.enabled && !options.urlsync?.config) {\n    return;\n  }\n\n  // Set state from url params on page load\n  store.router.isReady().then(() => {\n    urlToState(store, options.urlsync.config);\n  });\n\n  // Subscribe to store updates and sync them to url params\n  store.$subscribe(() => {\n    stateToUrl(store, options.urlsync.config);\n  });\n}\n\nexport default createUrlSync;\n","import { getTimestamp } from \"cesium\";\n\n// A Cesium Performance Monitor that logs avarage and worst performance over a sample period\nexport class CesiumPerformanceStats {\n  constructor(scene, logContinuously = false) {\n    this.scene = scene;\n    this.sampleCount = 60;\n    this.idx = 0;\n    this.postRenderTimes = [];\n    this.discardNext = true;\n\n    this.avgFps = 0;\n    this.avgFrameTime = 0;\n    this.worstFrameTime = 0;\n\n    // Disable requestRenderMode to caclulate time betweeen consecutive postRender events\n    // This is required as many updates happen during clock onTick events before scene.preUpdate is called\n    this.scene.requestRenderMode = false;\n\n    this.scene.preUpdate.addEventListener(() => {\n      performance.mark(\"preUpdate\");\n    });\n\n    this.scene.postRender.addEventListener(() => {\n      performance.mark(\"postRender\");\n      this.postRenderTimes[this.idx] = getTimestamp();\n      this.idx = (this.idx + 1) % this.sampleCount;\n      if (this.idx === 0) {\n        if (this.discardNext) {\n          this.discardNext = false;\n        } else {\n          this.calculateStats();\n          if (logContinuously) {\n            console.log(this.formatStats());\n          }\n        }\n      }\n      performance.measure(\"SceneRender\", \"preUpdate\", \"postRender\");\n    });\n  }\n\n  calculateStats() {\n    this.worstFrameTime = 0;\n    for (let i = 0; i < this.sampleCount - 1; i += 1) {\n      const frametime = this.postRenderTimes[i + 1] - this.postRenderTimes[i];\n      if (frametime > this.worstFrameTime) {\n        this.worstFrameTime = frametime;\n      }\n    }\n    const duration = this.postRenderTimes[this.sampleCount - 1] - this.postRenderTimes[0];\n    this.avgFps = this.sampleCount / (duration / 1000);\n    this.avgFrameTime = duration / this.sampleCount;\n  }\n\n  reset(discardNext = true) {\n    this.idx = 0;\n    this.discardNext = discardNext;\n    this.avgFps = 0;\n    this.avgFrameTime = 0;\n    this.worstFrameTime = 0;\n  }\n\n  getStats() {\n    return {\n      avgFps: this.avgFps,\n      avgFrameTime: this.avgFrameTime,\n      worstFrameTime: this.worstFrameTime,\n    };\n  }\n\n  formatStats() {\n    const fmt = (n) => n.toFixed(2).padStart(8);\n    return `Avg FPS: ${fmt(this.avgFps)}; Avg Frametime: ${fmt(this.avgFrameTime)}; Worst Frametime: ${fmt(this.worstFrameTime)};`;\n  }\n}\n","import * as satellitejs from \"satellite.js\";\nimport dayjs from \"dayjs\";\n\nconst deg2rad = Math.PI / 180;\nconst rad2deg = 180 / Math.PI;\n\nexport default class Orbit {\n  constructor(name, tle) {\n    this.name = name;\n    this.tle = tle.split(\"\\n\");\n    this.satrec = satellitejs.twoline2satrec(this.tle[1], this.tle[2]);\n  }\n\n  get satnum() {\n    return this.satrec.satnum;\n  }\n\n  get error() {\n    return this.satrec.error;\n  }\n\n  get orbitalPeriod() {\n    const meanMotionRad = this.satrec.no;\n    const period = (2 * Math.PI) / meanMotionRad;\n    return period;\n  }\n\n  positionECI(time) {\n    return satellitejs.propagate(this.satrec, time).position;\n  }\n\n  positionECF(time) {\n    const positionEci = this.positionECI(time);\n    const gmst = satellitejs.gstime(time);\n    const positionEcf = satellitejs.eciToEcf(positionEci, gmst);\n    return positionEcf;\n  }\n\n  positionGeodetic(timestamp, calculateVelocity = false) {\n    const { position: positionEci, velocity: velocityVector } = satellitejs.propagate(this.satrec, timestamp);\n    const gmst = satellitejs.gstime(timestamp);\n    const positionGd = satellitejs.eciToGeodetic(positionEci, gmst);\n\n    return {\n      longitude: positionGd.longitude * rad2deg,\n      latitude: positionGd.latitude * rad2deg,\n      height: positionGd.height * 1000,\n      ...(calculateVelocity && {\n        velocity: Math.sqrt(velocityVector.x * velocityVector.x +\n          velocityVector.y * velocityVector.y +\n          velocityVector.z * velocityVector.z),\n      }),\n    };\n  }\n\n  computePassesElevation(\n    groundStationPosition,\n    startDate = dayjs().toDate(),\n    endDate = dayjs(startDate).add(7, \"day\").toDate(),\n    minElevation = 10,\n    maxPasses = 50,\n  ) {\n    const groundStation = { ...groundStationPosition };\n    groundStation.latitude *= deg2rad;\n    groundStation.longitude *= deg2rad;\n    groundStation.height /= 1000;\n\n    const date = new Date(startDate);\n    const passes = [];\n    let pass = false;\n    let ongoingPass = false;\n    let lastElevation = 0;\n    while (date < endDate) {\n      const positionEcf = this.positionECF(date);\n      const lookAngles = satellitejs.ecfToLookAngles(groundStation, positionEcf);\n      const elevation = lookAngles.elevation / deg2rad;\n\n      if (elevation > minElevation) {\n        if (!ongoingPass) {\n          // Start of new pass\n          pass = {\n            name: this.name,\n            start: date.getTime(),\n            azimuthStart: lookAngles.azimuth,\n            maxElevation: elevation,\n            azimuthApex: lookAngles.azimuth,\n          };\n          ongoingPass = true;\n        } else if (elevation > pass.maxElevation) {\n          // Ongoing pass\n          pass.maxElevation = elevation;\n          pass.apex = date.getTime();\n          pass.azimuthApex = lookAngles.azimuth;\n        }\n        date.setSeconds(date.getSeconds() + 5);\n      } else if (ongoingPass) {\n        // End of pass\n        pass.end = date.getTime();\n        pass.duration = pass.end - pass.start;\n        pass.azimuthEnd = lookAngles.azimuth;\n        pass.azimuthStart /= deg2rad;\n        pass.azimuthApex /= deg2rad;\n        pass.azimuthEnd /= deg2rad;\n        passes.push(pass);\n        if (passes.length > maxPasses) {\n          break;\n        }\n        ongoingPass = false;\n        lastElevation = -180;\n        date.setMinutes(date.getMinutes() + this.orbitalPeriod * 0.5);\n      } else {\n        const deltaElevation = elevation - lastElevation;\n        lastElevation = elevation;\n        if (deltaElevation < 0) {\n          date.setMinutes(date.getMinutes() + this.orbitalPeriod * 0.5);\n          lastElevation = -180;\n        } else if (elevation < -20) {\n          date.setMinutes(date.getMinutes() + 5);\n        } else if (elevation < -5) {\n          date.setMinutes(date.getMinutes() + 1);\n        } else if (elevation < -1) {\n          date.setSeconds(date.getSeconds() + 5);\n        } else {\n          date.setSeconds(date.getSeconds() + 2);\n        }\n      }\n    }\n    return passes;\n  }\n}\n","import dayjs from \"dayjs\";\n\nexport class PushManager {\n  constructor(options = {}) {\n    this.options = options;\n    this.timers = [];\n  }\n\n  get available() {\n    if (\"webkit\" in window) {\n      return true;\n    }\n    if (!(\"Notification\" in window) || !(\"ServiceWorkerRegistration\" in window)) {\n      console.log(\"Notification API not supported!\");\n      return false;\n    }\n    switch (Notification.permission) {\n      case \"granted\":\n        return true;\n      case \"default\":\n        this.requestPermission();\n        return true;\n      case \"denied\":\n        return false;\n      default:\n        return false;\n    }\n  }\n\n  requestPermission() {\n    Notification.requestPermission((result) => {\n      console.log(`Notifcation permission result: ${result}`);\n    });\n  }\n\n  get active() {\n    return this.timers.length > 0;\n  }\n\n  clearTimers() {\n    this.timers.forEach((timer) => {\n      clearTimeout(timer.id);\n    });\n    this.timers = [];\n  }\n\n  persistentNotification(message, options) {\n    if (!this.available) {\n      return;\n    }\n    const optionsMerged = { ...this.options, ...options };\n    try {\n      navigator.serviceWorker.getRegistration()\n        .then((reg) => reg.showNotification(message, optionsMerged))\n        .catch((err) => console.log(`Service Worker registration error: ${err}`));\n    } catch (err) {\n      console.log(`Notification API error: ${err}`);\n    }\n  }\n\n  notifyInMs(ms, message, options) {\n    if (!this.available) {\n      return;\n    }\n    console.log(`Notify \"${message}\" in ${ms / 1000}s`);\n    setTimeout(() => { this.persistentNotification(message, options); }, ms);\n  }\n\n  notifyAtDate(date, message, options) {\n    if (!this.available) {\n      return;\n    }\n    const waitMs = dayjs(date).diff(dayjs());\n    if (waitMs < 0) {\n      return;\n    }\n    if (this.timers.some((timer) => Math.abs(timer.date.diff(date, \"seconds\")) < 10)) {\n      console.log(\"Ignore duplicate entry\");\n      return;\n    }\n    console.log(`Notify \"${message}\" at ${date}s ${dayjs(date).unix()}`);\n\n    if (\"webkit\" in window) {\n      const content = {\n        date: dayjs(date).unix(),\n        delay: waitMs / 1000,\n        message,\n      };\n      window.webkit.messageHandlers.iosNotify.postMessage(content);\n    } else {\n      const id = setTimeout(() => { this.persistentNotification(message, options); }, waitMs);\n      this.timers.push({\n        id,\n        date,\n        message,\n      });\n    }\n  }\n}\n","import { SampledPositionProperty, binarySearch, JulianDate } from \"cesium\";\n/* eslint-disable func-names, no-underscore-dangle, no-bitwise */\n\n/**\n * Gets the original values stored in the sampled property for the provided timeframe.\n *\n * @param {JulianDate} start The start time for which to retrieve the values.\n * @param {JulianDate} end The end time for which to retrieve the values.\n * @returns {object} An array of all values within the provided timeframe.\n */\nSampledPositionProperty.prototype.getRawValues = function (start, end) {\n  const times = this._property._times;\n  if (times.length === 0) {\n    return [];\n  }\n  const innerType = this._property._innerType;\n  const values = this._property._values;\n\n  let startIndex = binarySearch(times, start, JulianDate.compare);\n  let endIndex = binarySearch(times, end, JulianDate.compare);\n  if (startIndex < 0) {\n    startIndex = ~startIndex;\n  }\n  if (endIndex < 0) {\n    endIndex = ~endIndex;\n  }\n  const result = [];\n  for (let i = startIndex; i < endIndex; i += 1) {\n    result.push(innerType.unpack(values, i * innerType.packedLength));\n  }\n  return result;\n};\n\n/**\n * Gets the number of samples stored in the sampled property.\n *\n * @returns {number} The number of samples stored in the sampled property.\n */\nSampledPositionProperty.prototype.length = function () {\n  return this._property._times.length;\n};\n","import * as Cesium from \"cesium\";\n\nexport class CesiumCallbackHelper {\n  /**\n   * Register an event listener that will execute a callback every refreshRate ticks of clock time.\n   * @param {Cesium.Viewer} viewer - Cesium viewer\n   * @param {Function} callback - function to execute\n   * @param {Number} refreshRate - in ticks\n   * @param {Cesium.Event} event - event to listen to (e.g. viewer.clock.onTick)\n   * @returns {Function} - function to remove the event listener\n   */\n  static createPeriodicTickCallback(viewer, refreshRate, callback, event = viewer.clock.onTick) {\n    let ticks = 0;\n    return event.addEventListener(() => {\n      if (ticks < refreshRate) {\n        ticks += 1;\n        return;\n      }\n      callback(viewer.clock.currentTime);\n      ticks = 0;\n    });\n  }\n\n  /**\n   * Register an event listener that will execute a callback every refreshRate seconds of clock time.\n   * @param {Cesium.Viewer} viewer - Cesium viewer\n   * @param {Function} callback - function to execute\n   * @param {Number} refreshRate - in seconds\n   * @param {Cesium.Event} event - event to listen to (e.g. viewer.clock.onTick)\n   * @returns {Function} - function to remove the event listener\n   */\n  static createPeriodicTimeCallback(viewer, refreshRate, callback, event = viewer.clock.onTick) {\n    let lastUpdated = viewer.clock.currentTime;\n    return event.addEventListener(() => {\n      const time = viewer.clock.currentTime;\n      const delta = Math.abs(Cesium.JulianDate.secondsDifference(time, lastUpdated));\n      if (delta < refreshRate) {\n        return;\n      }\n      callback(time);\n      lastUpdated = time;\n    });\n  }\n}\n","import * as Cesium from \"@cesium/engine\";\nimport dayjs from \"dayjs\";\nimport { useToast } from \"vue-toastification\";\n\nimport Orbit from \"./Orbit\";\nimport { PushManager } from \"./util/PushManager\";\nimport \"./util/CesiumSampledPositionRawValueAccess\";\n\nimport satvisIcon from \"../assets/android-chrome-192x192.png\";\nimport { CesiumCallbackHelper } from \"./util/CesiumCallbackHelper\";\n\nexport class SatelliteProperties {\n  constructor(tle, tags = []) {\n    this.name = tle.split(\"\\n\")[0].trim();\n    if (tle.startsWith(\"0 \")) {\n      this.name = this.name.substring(2);\n    }\n    this.orbit = new Orbit(this.name, tle);\n    this.satnum = this.orbit.satnum;\n    this.tags = tags;\n\n    this.groundStationPosition = undefined;\n    this.passes = [];\n    this.passInterval = undefined;\n    this.passIntervals = new Cesium.TimeIntervalCollection();\n    this.pm = new PushManager({\n      icon: satvisIcon,\n    });\n  }\n\n  hasTag(tag) {\n    return this.tags.includes(tag);\n  }\n\n  addTags(tags) {\n    this.tags = [...new Set(this.tags.concat(tags))];\n  }\n\n  position(time) {\n    return this.sampledPosition.fixed.getValue(time);\n  }\n\n  getSampledInertialPositionsForNextOrbit(start) {\n    const end = Cesium.JulianDate.addSeconds(start, this.orbit.orbitalPeriod * 60, new Cesium.JulianDate());\n    const positions = this.sampledPosition.inertial.getRawValues(start, end);\n    // Readd the first position to the end of the array to close the loop\n    return [...positions, positions[0]];\n  }\n\n  createSampledPosition(viewer, callback) {\n    this.updateSampledPosition(viewer.clock.currentTime);\n    callback(this.sampledPosition);\n\n    const samplingRefreshRate = (this.orbit.orbitalPeriod * 60) / 4;\n    const removeCallback = CesiumCallbackHelper.createPeriodicTimeCallback(viewer, samplingRefreshRate, (time) => {\n      this.updateSampledPosition(time);\n      callback(this.sampledPosition);\n    });\n    return () => {\n      removeCallback();\n      this.sampledPosition = undefined;\n    };\n  }\n\n  updateSampledPosition(time) {\n    // Determine sampling interval based on sampled positions per orbit and orbital period\n    // 120 samples per orbit seems to be a good compromise between performance and accuracy\n    const samplingPointsPerOrbit = 120;\n    const orbitalPeriod = this.orbit.orbitalPeriod * 60;\n    const samplingInterval = orbitalPeriod / samplingPointsPerOrbit;\n    // console.log(\"updateSampledPosition\", this.name, this.orbit.orbitalPeriod, samplingInterval.toFixed(2));\n\n    // Always keep half an orbit backwards and 1.5 full orbits forward in the sampled position\n    const request = new Cesium.TimeInterval({\n      start: Cesium.JulianDate.addSeconds(time, -orbitalPeriod / 2, new Cesium.JulianDate()),\n      stop: Cesium.JulianDate.addSeconds(time, orbitalPeriod * 1.5, new Cesium.JulianDate()),\n    });\n\n    // (Re)create sampled position if it does not exist or if it does not contain the current time\n    if (!this.sampledPosition || !Cesium.TimeInterval.contains(this.sampledPosition.interval, time)) {\n      this.initSampledPosition(request.start);\n    }\n\n    // Determine which parts of the requested interval are missing\n    const intersect = Cesium.TimeInterval.intersect(this.sampledPosition.interval, request);\n    const missingSecondsEnd = Cesium.JulianDate.secondsDifference(request.stop, intersect.stop);\n    const missingSecondsStart = Cesium.JulianDate.secondsDifference(intersect.start, request.start);\n    // console.log(`updateSampledPosition ${this.name}`,\n    //   `Missing ${missingSecondsStart.toFixed(2)}s ${missingSecondsEnd.toFixed(2)}s`,\n    //   `Request ${Cesium.TimeInterval.toIso8601(request, 0)}`,\n    //   `Current ${Cesium.TimeInterval.toIso8601(this.sampledPosition.interval, 0)}`,\n    //   `Intersect ${Cesium.TimeInterval.toIso8601(intersect, 0)}`,\n    // );\n\n    if (missingSecondsStart > 0) {\n      const samplingStart = Cesium.JulianDate.addSeconds(intersect.start, -missingSecondsStart, new Cesium.JulianDate());\n      const samplingStop = this.sampledPosition.interval.start;\n      this.addSamples(samplingStart, samplingStop, samplingInterval);\n    }\n    if (missingSecondsEnd > 0) {\n      const samplingStart = this.sampledPosition.interval.stop;\n      const samplingStop = Cesium.JulianDate.addSeconds(intersect.stop, missingSecondsEnd, new Cesium.JulianDate());\n      this.addSamples(samplingStart, samplingStop, samplingInterval);\n    }\n\n    // Remove no longer needed samples\n    const removeBefore = new Cesium.TimeInterval({\n      start: Cesium.JulianDate.fromIso8601(\"1957\"),\n      stop: request.start,\n      isStartIncluded: false,\n      isStopIncluded: false,\n    });\n    const removeAfter = new Cesium.TimeInterval({\n      start: request.stop,\n      stop: Cesium.JulianDate.fromIso8601(\"2100\"),\n      isStartIncluded: false,\n      isStopIncluded: false,\n    });\n    this.sampledPosition.fixed.removeSamples(removeBefore);\n    this.sampledPosition.inertial.removeSamples(removeBefore);\n    this.sampledPosition.fixed.removeSamples(removeAfter);\n    this.sampledPosition.inertial.removeSamples(removeAfter);\n\n    this.sampledPosition.interval = request;\n  }\n\n  initSampledPosition(currentTime) {\n    this.sampledPosition = {};\n    this.sampledPosition.interval = new Cesium.TimeInterval({\n      start: currentTime,\n      stop: currentTime,\n      isStartIncluded: false,\n      isStopIncluded: false,\n    });\n    this.sampledPosition.fixed = new Cesium.SampledPositionProperty();\n    this.sampledPosition.fixed.backwardExtrapolationType = Cesium.ExtrapolationType.HOLD;\n    this.sampledPosition.fixed.forwardExtrapolationType = Cesium.ExtrapolationType.HOLD;\n    this.sampledPosition.fixed.setInterpolationOptions({\n      interpolationDegree: 5,\n      interpolationAlgorithm: Cesium.LagrangePolynomialApproximation,\n    });\n    this.sampledPosition.inertial = new Cesium.SampledPositionProperty(Cesium.ReferenceFrame.INERTIAL);\n    this.sampledPosition.inertial.backwardExtrapolationType = Cesium.ExtrapolationType.HOLD;\n    this.sampledPosition.inertial.forwardExtrapolationType = Cesium.ExtrapolationType.HOLD;\n    this.sampledPosition.inertial.setInterpolationOptions({\n      interpolationDegree: 5,\n      interpolationAlgorithm: Cesium.LagrangePolynomialApproximation,\n    });\n    this.sampledPosition.valid = true;\n  }\n\n  addSamples(start, stop, samplingInterval) {\n    const times = [];\n    const positionsFixed = [];\n    const positionsInertial = [];\n    for (let time = start; Cesium.JulianDate.compare(stop, time) >= 0; time = Cesium.JulianDate.addSeconds(time, samplingInterval, new Cesium.JulianDate())) {\n      const { positionFixed, positionInertial } = this.computePosition(time);\n      times.push(time);\n      positionsFixed.push(positionFixed);\n      positionsInertial.push(positionInertial);\n    }\n    // Add all samples at once as adding a sorted array avoids searching for the correct position every time\n    this.sampledPosition.fixed.addSamples(times, positionsFixed);\n    this.sampledPosition.inertial.addSamples(times, positionsInertial);\n  }\n\n  computePositionInertialTEME(time) {\n    const eci = this.orbit.positionECI(Cesium.JulianDate.toDate(time));\n    if (this.orbit.error) {\n      this.sampledPosition.valid = false;\n      return Cesium.Cartesian3.ZERO;\n    }\n    return new Cesium.Cartesian3(eci.x * 1000, eci.y * 1000, eci.z * 1000);\n  }\n\n  computePosition(timestamp) {\n    const positionInertialTEME = this.computePositionInertialTEME(timestamp);\n\n    const temeToFixed = Cesium.Transforms.computeTemeToPseudoFixedMatrix(timestamp);\n    if (!Cesium.defined(temeToFixed)) {\n      console.error(\"Reference frame transformation data failed to load\");\n    }\n    const positionFixed = Cesium.Matrix3.multiplyByVector(temeToFixed, positionInertialTEME, new Cesium.Cartesian3());\n\n    const fixedToIcrf = Cesium.Transforms.computeFixedToIcrfMatrix(timestamp);\n    if (!Cesium.defined(fixedToIcrf)) {\n      console.error(\"Reference frame transformation data failed to load\");\n    }\n    const positionInertialICRF = Cesium.Matrix3.multiplyByVector(fixedToIcrf, positionFixed, new Cesium.Cartesian3());\n\n    // Show computed sampled position\n    // window.cc.viewer.entities.add({\n    //  //position: positionFixed,\n    //  position: new Cesium.ConstantPositionProperty(positionInertialICRF, Cesium.ReferenceFrame.INERTIAL),\n    //  point: {\n    //    pixelSize: 8,\n    //    color: Cesium.Color.TRANSPARENT,\n    //    outlineColor: Cesium.Color.YELLOW,\n    //    outlineWidth: 2,\n    //  }\n    // });\n\n    return { positionFixed, positionInertial: positionInertialICRF };\n  }\n\n  groundTrack(julianDate, samplesFwd = 0, samplesBwd = 120, interval = 30) {\n    const groundTrack = [];\n\n    const startTime = -samplesBwd * interval;\n    const stopTime = samplesFwd * interval;\n    for (let time = startTime; time <= stopTime; time += interval) {\n      const timestamp = Cesium.JulianDate.addSeconds(julianDate, time, new Cesium.JulianDate());\n      const cartographic = Cesium.Cartographic.fromCartesian(this.position(timestamp));\n      const groudPosition = Cesium.Cartesian3.fromRadians(cartographic.longitude, cartographic.latitude, 1000);\n      groundTrack.push(groudPosition);\n    }\n    return groundTrack;\n  }\n\n  get groundStationAvailable() {\n    return (typeof this.groundStationPosition !== \"undefined\");\n  }\n\n  updatePasses(time) {\n    if (!this.groundStationAvailable) {\n      return false;\n    }\n    // Check if still inside of current pass interval\n    if (typeof this.passInterval !== \"undefined\" &&\n        Cesium.TimeInterval.contains(new Cesium.TimeInterval({ start: this.passInterval.start, stop: this.passInterval.stop }), time)) {\n      return false;\n    }\n    this.passInterval = {\n      start: Cesium.JulianDate.addDays(time, -1, Cesium.JulianDate.clone(time)),\n      stop: Cesium.JulianDate.addDays(time, 1, Cesium.JulianDate.clone(time)),\n      stopPrediction: Cesium.JulianDate.addDays(time, 4, Cesium.JulianDate.clone(time)),\n    };\n\n    const passes = this.orbit.computePassesElevation(\n      this.groundStationPosition,\n      Cesium.JulianDate.toDate(this.passInterval.start),\n      Cesium.JulianDate.toDate(this.passInterval.stopPrediction),\n    );\n    if (!passes) {\n      return false;\n    }\n\n    this.passes = passes;\n    this.computePassIntervals();\n    return true;\n  }\n\n  clearPasses() {\n    this.passInterval = undefined;\n    this.passes = [];\n    this.passIntervals = new Cesium.TimeIntervalCollection();\n  }\n\n  computePassIntervals() {\n    const passIntervalArray = this.passes.map((pass) => {\n      const startJulian = Cesium.JulianDate.fromDate(new Date(pass.start));\n      const endJulian = Cesium.JulianDate.fromDate(new Date(pass.end));\n      return new Cesium.TimeInterval({\n        start: startJulian,\n        stop: endJulian,\n      });\n    });\n    this.passIntervals = new Cesium.TimeIntervalCollection(passIntervalArray);\n  }\n\n  notifyPasses(aheadMin = 5) {\n    const toast = useToast();\n\n    if (!this.groundStationAvailable) {\n      toast.warning(\"Ground station required to notify for passes\");\n      return;\n    }\n    const passes = this.orbit.computePassesElevation(this.groundStationPosition);\n    if (!passes) {\n      toast.info(`No passes for ${this.name}`);\n      return;\n    }\n\n    passes.forEach((pass) => {\n      const start = dayjs(pass.start).startOf(\"second\");\n      this.pm.notifyAtDate(start.subtract(aheadMin, \"minute\"), `${pass.name} pass in ${aheadMin} minutes`);\n      this.pm.notifyAtDate(start, `${pass.name} pass starting now`);\n      // this.pm.notifyAtDate(dayjs().add(5, \"second\"), `${pass.name} test pass in ${aheadMin} minutes`);\n    });\n    toast.success(`Notifying for ${passes.length} passes of ${this.name}`);\n  }\n}\n","import * as Cesium from \"@cesium/engine\";\n\nimport { CesiumCallbackHelper } from \"./CesiumCallbackHelper\";\n\n/** CesiumComponentCollection\n  *\n  * A wrapper class for Cesium entities and primitives that all belong to a common object being represented.\n  * The individual entities or primitives are created on demand by the inheriting child class and are added\n  * to a common entity collection or primitive collection shared between all ComponentCollections.\n */\nexport class CesiumComponentCollection {\n  #components = {};\n\n  static geometries = [];\n\n  static primitive = undefined;\n\n  static primitivePendingUpdate = false;\n\n  static primitivePendingCreation = false;\n\n  constructor(viewer, lazy = true) {\n    this.viewer = viewer;\n    // Create entities only when needed and delete them on disable\n    this.lazy = lazy;\n  }\n\n  get components() {\n    return this.#components;\n  }\n\n  get componentNames() {\n    return Object.keys(this.components);\n  }\n\n  get created() {\n    return this.componentNames.length > 0;\n  }\n\n  show(componentNames = this.componentNames) {\n    componentNames.forEach((componentName) => {\n      this.enableComponent(componentName);\n    });\n  }\n\n  hide(componentNames = this.componentNames) {\n    componentNames.forEach((componentName) => {\n      this.disableComponent(componentName);\n    });\n  }\n\n  enableComponent(name) {\n    if (!(name in this.components)) {\n      return;\n    }\n    const component = this.components[name];\n    if (component instanceof Cesium.Entity && !this.viewer.entities.contains(component)) {\n      this.viewer.entities.add(component);\n    } else if (component instanceof Cesium.Primitive && !this.viewer.scene.primitives.contains(component)) {\n      this.viewer.scene.primitives.add(component);\n    } else if (component instanceof Cesium.GeometryInstance) {\n      this.constructor.geometries.push(component);\n      this.recreateGeometryInstancePrimitive();\n    }\n    if (!this.defaultEntity) {\n      this.defaultEntity = component;\n    }\n  }\n\n  disableComponent(name) {\n    if (!(name in this.components)) {\n      return;\n    }\n    const component = this.components[name];\n    if (component instanceof Cesium.Entity) {\n      this.viewer.entities.remove(component);\n    } else if (component instanceof Cesium.Primitive) {\n      this.viewer.scene.primitives.remove(component);\n    } else if (component instanceof Cesium.GeometryInstance) {\n      this.constructor.geometries = this.constructor.geometries.filter((geometry) => geometry !== component);\n      this.recreateGeometryInstancePrimitive();\n    }\n    if (this.lazy) {\n      delete this.components[name];\n    }\n  }\n\n  recreateGeometryInstancePrimitive() {\n    if (this.constructor.primitivePendingUpdate) {\n      return;\n    }\n    this.constructor.primitivePendingUpdate = true;\n    const removeCallback = CesiumCallbackHelper.createPeriodicTickCallback(this.viewer, 30, () => {\n      if (this.constructor.primitivePendingCreation) {\n        return;\n      }\n      this.constructor.primitivePendingUpdate = false;\n      if (this.constructor.geometries.length === 0) {\n        this.viewer.scene.primitives.remove(this.constructor.primitive);\n        this.constructor.primitive = undefined;\n        this.viewer.scene.requestRender();\n        return;\n      }\n      this.constructor.primitivePendingCreation = true;\n      const primitive = new Cesium.Primitive({\n        geometryInstances: this.constructor.geometries,\n        appearance: new Cesium.PolylineColorAppearance(),\n      });\n      // Force asyncrounous primitve creation before adding to scene\n      let lastState = -1;\n      const readyCallback = this.viewer.clock.onTick.addEventListener(() => {\n        if (!primitive.ready) {\n          // eslint-disable-next-line no-underscore-dangle\n          const state = primitive._state;\n          if (state !== lastState) {\n            lastState = state;\n            // Trigger primitive update to progress through creation states\n            primitive.update(this.viewer.scene.frameState);\n            return;\n          }\n          return;\n        }\n        // Update model matrix right before adding to scene\n        const icrfToFixed = Cesium.Transforms.computeIcrfToFixedMatrix(this.viewer.clock.currentTime);\n        if (Cesium.defined(icrfToFixed)) {\n          primitive.modelMatrix = Cesium.Matrix4.fromRotationTranslation(icrfToFixed);\n        }\n        if (this.constructor.primitive) {\n          this.viewer.scene.primitives.remove(this.constructor.primitive);\n        }\n        this.viewer.scene.primitives.add(primitive);\n        this.constructor.primitive = primitive;\n        this.viewer.scene.requestRender();\n        this.constructor.primitivePendingCreation = false;\n        readyCallback();\n      });\n      removeCallback();\n    });\n  }\n\n  /**\n   * Returns an array of all components that are added to the viewer.\n   * If component creation is\n   */\n  get visibleComponents() {\n    return Object.values(this.components).filter((component) => {\n      if (component instanceof Cesium.Entity) {\n        return this.viewer.entities.contains(component);\n      }\n      if (component instanceof Cesium.Primitive) {\n        return this.viewer.scene.primitives.contains(component);\n      }\n      return false;\n    });\n  }\n\n  get isSelected() {\n    return Object.values(this.components).some((entity) => this.viewer.selectedEntity === entity);\n  }\n\n  get isTracked() {\n    return Object.values(this.components).some((entity) => this.viewer.trackedEntity === entity);\n  }\n\n  track(animate = false) {\n    if (!this.defaultEntity) {\n      return;\n    }\n    if (!animate) {\n      this.viewer.trackedEntity = this.defaultEntity;\n      return;\n    }\n\n    this.viewer.trackedEntity = undefined;\n    const clockRunning = this.viewer.clock.shouldAnimate;\n    this.viewer.clock.shouldAnimate = false;\n\n    this.viewer.flyTo(this.defaultEntity, {\n      offset: new Cesium.HeadingPitchRange(0, -Cesium.Math.PI_OVER_FOUR, 1580000),\n    }).then((result) => {\n      if (result) {\n        this.viewer.trackedEntity = this.defaultEntity;\n        this.viewer.clock.shouldAnimate = clockRunning;\n      }\n    });\n  }\n\n  setSelectedOnTickCallback(onTickCallback = () => {}, onUnselectCallback = () => {}) {\n    const onTickEventRemovalCallback = this.viewer.clock.onTick.addEventListener((clock) => {\n      onTickCallback(clock);\n    });\n    const onSelectedEntityChangedRemovalCallback = this.viewer.selectedEntityChanged.addEventListener(() => {\n      onTickEventRemovalCallback();\n      onSelectedEntityChangedRemovalCallback();\n      onUnselectCallback();\n    });\n  }\n\n  setTrackedOnTickCallback(onTickCallback = () => {}, onUntrackCallback = () => {}) {\n    const onTickEventRemovalCallback = this.viewer.clock.onTick.addEventListener((clock) => {\n      onTickCallback(clock);\n    });\n    const onTrackedEntityChangedRemovalCallback = this.viewer.trackedEntityChanged.addEventListener(() => {\n      onTickEventRemovalCallback();\n      onTrackedEntityChangedRemovalCallback();\n      onUntrackCallback();\n    });\n  }\n\n  artificiallyTrack(onTickCallback = () => {}, onUntrackCallback = () => {}) {\n    const cameraTracker = new Cesium.EntityView(this.defaultEntity, this.viewer.scene, this.viewer.scene.globe.ellipsoid);\n    this.setTrackedOnTickCallback((clock) => {\n      cameraTracker.update(clock.currentTime);\n      onTickCallback();\n    }, () => {\n      onUntrackCallback();\n      // Restore default view angle if no new entity is tracked\n      if (typeof this.viewer.trackedEntity === \"undefined\") {\n        this.viewer.flyTo(this.defaultEntity, {\n          offset: new Cesium.HeadingPitchRange(0, Cesium.Math.toRadians(-90.0), 2000000),\n        });\n      }\n    });\n  }\n\n  createCesiumEntity(componentName, entityKey, entityValue, name, description, position, moving) {\n    const entity = new Cesium.Entity({\n      name,\n      description,\n      position,\n      viewFrom: new Cesium.Cartesian3(0, -3600000, 4200000),\n    });\n\n    if (moving) {\n      entity.orientation = new Cesium.VelocityOrientationProperty(position);\n    }\n\n    entity[entityKey] = entityValue;\n    this.components[componentName] = entity;\n  }\n}\n","import * as Cesium from \"@cesium/engine\";\n\nexport class CesiumTimelineHelper {\n  static clearHighlightRanges(viewer) {\n    // eslint-disable-next-line\n    if (!viewer.timeline || viewer.timeline._highlightRanges.length === 0) {\n      return;\n    }\n    // eslint-disable-next-line\n    viewer.timeline._highlightRanges = [];\n    viewer.timeline.updateFromClock();\n    viewer.timeline.zoomTo(viewer.clock.startTime, viewer.clock.stopTime);\n  }\n\n  static addHighlightRanges(viewer, ranges) {\n    if (!viewer.timeline) {\n      return;\n    }\n    ranges.forEach((range) => {\n      const startJulian = Cesium.JulianDate.fromDate(new Date(range.start));\n      const endJulian = Cesium.JulianDate.fromDate(new Date(range.end));\n      const highlightRange = viewer.timeline.addHighlightRange(Cesium.Color.BLUE, 100, 0);\n      highlightRange.setRange(startJulian, endJulian);\n      viewer.timeline.updateFromClock();\n      viewer.timeline.zoomTo(viewer.clock.startTime, viewer.clock.stopTime);\n    });\n  }\n\n  static updateHighlightRanges(viewer, ranges) {\n    this.clearHighlightRanges(viewer);\n    this.addHighlightRanges(viewer, ranges);\n  }\n}\n","import * as Cesium from \"@cesium/engine\";\nimport dayjs from \"dayjs\";\nimport relativeTime from \"dayjs/plugin/relativeTime\";\n\ndayjs.extend(relativeTime);\n\nexport class DescriptionHelper {\n  /** cachedCallbackProperty\n   * Caches the results of a callback property to prevent unnecessary recalculation.\n   * @param {function} callback - The amount of simulation time to use the calculated result\n   * @param {number} updateTreshold - The amount of simulation time to use the calculated result\n   * @param {number} usageTreshold - The number of invocations to serve the same result\n   */\n  static cachedCallbackProperty(callback, updateTreshold = 1, usageTreshold = 1000) {\n    let cache;\n    return new Cesium.CallbackProperty((time) => {\n      if (cache && Cesium.JulianDate.equalsEpsilon(time, cache.time, updateTreshold) && cache.usage < usageTreshold) {\n        // console.log(\"Cached callback\", time, cache.usage);\n        cache.usage += 1;\n        return cache.content;\n      }\n      const content = callback(time);\n      cache = {\n        time,\n        content,\n        usage: 0,\n      };\n      return content;\n    }, false);\n  }\n\n  static renderDescription(time, name, position, passes, isGroundStation, tle) {\n    const description = `\n      <div class=\"ib\">\n        <h3>Position</h3>\n        <table class=\"ibt\">\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>Latitude</th>\n              <th>Longitude</th>\n              ${isGroundStation ? \"\" : \"<th>Altitude</th>\"}\n              ${isGroundStation ? \"\" : \"<th>Velocity</th>\"}\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>${name}</td>\n              <td>${position.latitude.toFixed(2)}&deg</td>\n              <td>${position.longitude.toFixed(2)}&deg</td>\n              ${isGroundStation ? \"\" : `<td>${(position.height / 1000).toFixed(2)} km</td>`}\n              ${isGroundStation ? \"\" : `<td>${position.velocity.toFixed(2)} km/s</td>`}\n            </tr>\n          </tbody>\n        </table>\n        ${this.renderPasses(passes, time, isGroundStation)}\n        ${typeof tle === \"undefined\" ? \"\" : this.renderTLE(tle)}\n      </div>\n    `;\n    return description;\n  }\n\n  static renderPasses(passes, time, isGroundStation) {\n    if (passes.length === 0) {\n      if (isGroundStation) {\n        return `\n          <h3>Passes</h3>\n          <div class=\"ib-text\">No passes available</div>\n          `;\n      }\n      return `\n        <h3>Passes</h3>\n        <div class=\"ib-text\">No ground station set</div>\n        `;\n    }\n\n    const start = dayjs(time);\n    const upcomingPassIdx = passes.findIndex((pass) => dayjs(pass.end).isAfter(start));\n    if (upcomingPassIdx < 0) {\n      return \"\";\n    }\n    const upcomingPasses = passes.slice(upcomingPassIdx);\n\n    const showPassName = isGroundStation;\n    const htmlName = showPassName ? \"<th>Name</th>\\n\" : \"\";\n    const html = `\n      <h3>Passes</h3>\n      <table class=\"ibt\">\n        <thead>\n          <tr>\n            ${htmlName}\n            <th>Countdown</th>\n            <th>Start</th>\n            <th>End</th>\n            <th>El</th>\n            <th>Az</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${upcomingPasses.map((pass) => this.renderPass(start, pass, showPassName)).join(\"\")}\n        </tbody>\n      </table>\n    `;\n    return html;\n  }\n\n  static renderPass(time, pass, showPassName) {\n    function pad2(num) {\n      return String(num).padStart(2, \"0\");\n    }\n    let countdown = \"ONGOING\";\n    if (dayjs(pass.end).diff(time) < 0) {\n      countdown = \"PREVIOUS\";\n    } else if (dayjs(pass.start).diff(time) > 0) {\n      countdown = `${pad2(dayjs(pass.start).diff(time, \"days\"))}:${pad2(dayjs(pass.start).diff(time, \"hours\") % 24)}:${pad2(dayjs(pass.start).diff(time, \"minutes\") % 60)}:${pad2(dayjs(pass.start).diff(time, \"seconds\") % 60)}`;\n    }\n    const htmlName = showPassName ? `<td>${pass.name}</td>\\n` : \"\";\n    const html = `\n      <tr>\n        ${htmlName}\n        <td>${countdown}</td>\n        <td><a onclick='parent.postMessage(${JSON.stringify(pass)}, \"*\")'>${dayjs(pass.start).format(\"DD.MM HH:mm:ss\")}</td>\n        <td>${dayjs(pass.end).format(\"HH:mm:ss\")}</td>\n        <td class=\"ibt-right\">${pass.maxElevation.toFixed(0)}&deg</td>\n        <td class=\"ibt-right\">${pass.azimuthApex.toFixed(2)}&deg</td>\n      </tr>\n    `;\n    return html;\n  }\n\n  static renderTLE(tle) {\n    const html = `\n      <h3>TLE</h3>\n      <div class=\"ib-code\"><code>${tle.slice(1, 3).join(\"\\n\")}</code></div>`;\n    return html;\n  }\n}\n","import * as Cesium from \"@cesium/engine\";\nimport CesiumSensorVolumes from \"cesium-sensor-volumes\";\n\nimport { SatelliteProperties } from \"./SatelliteProperties\";\nimport { CesiumComponentCollection } from \"./util/CesiumComponentCollection\";\nimport { CesiumTimelineHelper } from \"./util/CesiumTimelineHelper\";\nimport { DescriptionHelper } from \"./util/DescriptionHelper\";\nimport { CesiumCallbackHelper } from \"./util/CesiumCallbackHelper\";\n\nexport class SatelliteComponentCollection extends CesiumComponentCollection {\n  constructor(viewer, tle, tags) {\n    super(viewer);\n    this.props = new SatelliteProperties(tle, tags);\n    this.eventListeners = {};\n  }\n\n  enableComponent(name) {\n    if (!this.created) {\n      this.init();\n    }\n    if (!this.props.sampledPosition.valid) {\n      console.error(`No valid position data available for ${this.props.name}`);\n      return;\n    }\n    if (!(name in this.components)) {\n      this.createComponent(name);\n      this.updatedSampledPositionForComponents();\n    }\n\n    super.enableComponent(name);\n\n    if (name === \"3D model\") {\n      // Adjust label offset to avoid overlap with model\n      if (this.components.Label) {\n        this.components.Label.label.pixelOffset = new Cesium.Cartesian2(20, 0);\n      }\n    } else if (name === \"Orbit\" && this.components[name] instanceof Cesium.Primitive) {\n      // Update the model matrix periodically to keep the orbit in the inertial frame\n      if (!this.orbitPrimitiveUpdater) {\n        this.orbitPrimitiveUpdater = CesiumCallbackHelper.createPeriodicTimeCallback(this.viewer, 0.5, (time) => {\n          if (!this.components.Orbit) {\n            // Remove callback if orbit is disabled\n            this.orbitPrimitiveUpdater();\n            return;\n          }\n          const icrfToFixed = Cesium.Transforms.computeIcrfToFixedMatrix(time);\n          if (Cesium.defined(icrfToFixed)) {\n            this.components.Orbit.modelMatrix = Cesium.Matrix4.fromRotationTranslation(icrfToFixed);\n          }\n        });\n      }\n    } else if (name === \"Orbit\" && this.components[name] instanceof Cesium.GeometryInstance) {\n      // Update the model matrix of the primitive containing all orbit geometries periodically to keep the orbit in the inertial frame\n      if (!this.constructor.geometryPrimitiveUpdater) {\n        this.constructor.geometryPrimitiveUpdater = CesiumCallbackHelper.createPeriodicTimeCallback(this.viewer, 0.5, (time) => {\n          const icrfToFixed = Cesium.Transforms.computeIcrfToFixedMatrix(time);\n          if (Cesium.defined(icrfToFixed) && this.constructor.primitive) {\n            this.constructor.primitive.modelMatrix = Cesium.Matrix4.fromRotationTranslation(icrfToFixed);\n          }\n        });\n      }\n    }\n  }\n\n  disableComponent(name) {\n    if (name === \"3D model\") {\n      // Restore old label offset\n      if (this.components.Label) {\n        this.components.Label.label.pixelOffset = new Cesium.Cartesian2(10, 0);\n      }\n    }\n    super.disableComponent(name);\n\n    if (this.componentNames.length === 0) {\n      // Remove event listeners when no components are enabled\n      this.deinit();\n    }\n  }\n\n  init() {\n    this.createDescription();\n\n    this.eventListeners.sampledPosition = this.props.createSampledPosition(this.viewer, () => {\n      this.updatedSampledPositionForComponents(true);\n    });\n\n    // Set up event listeners\n    this.eventListeners.selectedEntity = this.viewer.selectedEntityChanged.addEventListener((entity) => {\n      if (!entity || entity?.name === \"Ground station\") {\n        CesiumTimelineHelper.clearHighlightRanges(this.viewer);\n        return;\n      }\n      if (this.isSelected) {\n        this.props.updatePasses(this.viewer.clock.currentTime);\n        CesiumTimelineHelper.updateHighlightRanges(this.viewer, this.props.passes);\n      }\n    });\n\n    this.eventListeners.trackedEntity = this.viewer.trackedEntityChanged.addEventListener(() => {\n      if (this.isTracked) {\n        this.artificiallyTrack();\n      }\n      if (\"Orbit\" in this.components && !this.isCorrectOrbitComponent()) {\n        // Recreate Orbit to change visualisation type\n        this.disableComponent(\"Orbit\");\n        this.enableComponent(\"Orbit\");\n      }\n    });\n  }\n\n  deinit() {\n    // Remove event listeners\n    this.eventListeners.sampledPosition();\n    this.eventListeners.selectedEntity();\n    this.eventListeners.trackedEntity();\n  }\n\n  updatedSampledPositionForComponents(update = false) {\n    const { fixed, inertial } = this.props.sampledPosition;\n\n    Object.entries(this.components).forEach(([type, component]) => {\n      if (type === \"Orbit\") {\n        component.position = inertial;\n        if (update && (component instanceof Cesium.Primitive || component instanceof Cesium.GeometryInstance)) {\n          // Primitives need to be recreated to update the geometry\n          this.disableComponent(\"Orbit\");\n          this.enableComponent(\"Orbit\");\n        }\n      } else if (type === \"Sensor cone\") {\n        component.position = fixed;\n        component.orientation = new Cesium.CallbackProperty((time) => {\n          const position = this.props.position(time);\n          const hpr = new Cesium.HeadingPitchRoll(0, Cesium.Math.toRadians(180), 0);\n          return Cesium.Transforms.headingPitchRollQuaternion(position, hpr);\n        }, false);\n      } else {\n        component.position = fixed;\n        component.orientation = new Cesium.VelocityOrientationProperty(fixed);\n      }\n    });\n    // Request a single frame after satellite position updates when the clock is paused\n    if (!this.viewer.clock.shouldAnimate) {\n      const removeCallback = this.viewer.clock.onTick.addEventListener(() => {\n        this.viewer.scene.requestRender();\n        removeCallback();\n      });\n    }\n  }\n\n  createComponent(name) {\n    switch (name) {\n      case \"Point\":\n        this.createPoint();\n        break;\n      case \"Label\":\n        this.createLabel();\n        break;\n      case \"Orbit\":\n        this.createOrbit();\n        break;\n      case \"Orbit track\":\n        this.createOrbitTrack();\n        break;\n      case \"Ground track\":\n        this.createGroundTrack();\n        break;\n      case \"Sensor cone\":\n        this.createCone();\n        break;\n      case \"3D model\":\n        this.createModel();\n        break;\n      case \"Ground station link\":\n        this.createGroundStationLink();\n        break;\n      default:\n        console.error(\"Unknown component\");\n    }\n  }\n\n  createDescription() {\n    this.description = DescriptionHelper.cachedCallbackProperty((time) => {\n      const cartographic = this.props.orbit.positionGeodetic(Cesium.JulianDate.toDate(time), true);\n      const content = DescriptionHelper.renderDescription(time, this.props.name, cartographic, this.props.passes, false, this.props.orbit.tle);\n      return content;\n    });\n  }\n\n  createCesiumSatelliteEntity(entityName, entityKey, entityValue) {\n    this.createCesiumEntity(entityName, entityKey, entityValue, this.props.name, this.description, this.props.sampledPosition.fixed, true);\n  }\n\n  createPoint() {\n    const point = new Cesium.PointGraphics({\n      pixelSize: 6,\n      color: Cesium.Color.WHITE,\n      outlineColor: Cesium.Color.DIMGREY,\n      outlineWidth: 1,\n    });\n    this.createCesiumSatelliteEntity(\"Point\", \"point\", point);\n  }\n\n  createBox() {\n    const size = 1000;\n    const box = new Cesium.BoxGraphics({\n      dimensions: new Cesium.Cartesian3(size, size, size),\n      material: Cesium.Color.WHITE,\n    });\n    this.createCesiumSatelliteEntity(\"Box\", \"box\", box);\n  }\n\n  createModel() {\n    const model = new Cesium.ModelGraphics({\n      uri: `./data/models/${this.props.name.split(\" \").join(\"-\")}.glb`,\n      minimumPixelSize: 50,\n      maximumScale: 10000,\n    });\n    this.createCesiumSatelliteEntity(\"3D model\", \"model\", model);\n  }\n\n  createLabel() {\n    const label = new Cesium.LabelGraphics({\n      text: this.props.name,\n      font: \"15px Arial\",\n      style: Cesium.LabelStyle.FILL_AND_OUTLINE,\n      outlineColor: Cesium.Color.DIMGREY,\n      outlineWidth: 2,\n      horizontalOrigin: Cesium.HorizontalOrigin.LEFT,\n      pixelOffset: new Cesium.Cartesian2(10, 0),\n      distanceDisplayCondition: new Cesium.DistanceDisplayCondition(2000, 8e7),\n      translucencyByDistance: new Cesium.NearFarScalar(6e7, 1.0, 8e7, 0.0),\n    });\n    this.createCesiumSatelliteEntity(\"Label\", \"label\", label);\n  }\n\n  createOrbit() {\n    if (this.isTracked) {\n      // Use a path graphic to visualize the currently tracked satellite's orbit\n      this.createOrbitPath();\n    } else {\n      // For all other satellites use a polyline geometry to visualize the orbit for significantly improved performance.\n      // A polyline geometry is used instead of a polyline graphic as entities don't support adjusting the model matrix\n      // in order to display the orbit in the inertial frame.\n      this.createOrbitPolylineGeometry();\n    }\n  }\n\n  isCorrectOrbitComponent() {\n    return this.isTracked ? this.components.Orbit instanceof Cesium.Entity : this.components.Orbit instanceof Cesium.Primitive;\n  }\n\n  createOrbitPath() {\n    const path = new Cesium.PathGraphics({\n      leadTime: (this.props.orbit.orbitalPeriod * 60) / 2 + 5,\n      trailTime: (this.props.orbit.orbitalPeriod * 60) / 2 + 5,\n      material: Cesium.Color.WHITE.withAlpha(0.15),\n      resolution: 600,\n      width: 2,\n    });\n    this.createCesiumEntity(\"Orbit\", \"path\", path, this.props.name, this.description, this.props.sampledPosition.inertial, true);\n  }\n\n  createOrbitPolylinePrimitive() {\n    const primitive = new Cesium.Primitive({\n      geometryInstances: new Cesium.GeometryInstance({\n        geometry: new Cesium.PolylineGeometry({\n          positions: this.props.getSampledInertialPositionsForNextOrbit(this.viewer.clock.currentTime),\n          width: 2,\n          arcType: Cesium.ArcType.NONE,\n          // granularity: Cesium.Math.RADIANS_PER_DEGREE * 10,\n          vertexFormat: Cesium.PolylineColorAppearance.VERTEX_FORMAT,\n        }),\n        attributes: {\n          color: Cesium.ColorGeometryInstanceAttribute.fromColor(new Cesium.Color(1.0, 1.0, 1.0, 0.15)),\n        },\n        id: this.props.name,\n      }),\n      appearance: new Cesium.PolylineColorAppearance(),\n      asynchronous: false,\n    });\n    const icrfToFixed = Cesium.Transforms.computeIcrfToFixedMatrix(this.viewer.clock.currentTime);\n    if (Cesium.defined(icrfToFixed)) {\n      // TODO: Cache the model matrix\n      primitive.modelMatrix = Cesium.Matrix4.fromRotationTranslation(icrfToFixed);\n    }\n    this.components.Orbit = primitive;\n  }\n\n  createOrbitPolylineGeometry() {\n    // Currently unused\n    const geometryInstance = new Cesium.GeometryInstance({\n      geometry: new Cesium.PolylineGeometry({\n        positions: this.props.getSampledInertialPositionsForNextOrbit(this.viewer.clock.currentTime),\n        width: 2,\n        arcType: Cesium.ArcType.NONE,\n        // granularity: Cesium.Math.RADIANS_PER_DEGREE * 10,\n        vertexFormat: Cesium.PolylineColorAppearance.VERTEX_FORMAT,\n      }),\n      attributes: {\n        color: Cesium.ColorGeometryInstanceAttribute.fromColor(new Cesium.Color(1.0, 1.0, 1.0, 0.15)),\n      },\n      id: this.props.name,\n    });\n    this.components.Orbit = geometryInstance;\n  }\n\n  createOrbitTrack(leadTime = this.props.orbit.orbitalPeriod * 60, trailTime = 0) {\n    const path = new Cesium.PathGraphics({\n      leadTime,\n      trailTime,\n      material: Cesium.Color.GOLD.withAlpha(0.15),\n      resolution: 600,\n      width: 2,\n    });\n    this.createCesiumSatelliteEntity(\"Orbit track\", \"path\", path);\n  }\n\n  createGroundTrack(width = 165) {\n    if (this.props.orbit.orbitalPeriod > 60 * 2) {\n      // Ground track unavailable for non-LEO satellites\n      return;\n    }\n    const corridor = new Cesium.CorridorGraphics({\n      cornerType: Cesium.CornerType.MITERED,\n      material: Cesium.Color.ORANGE.withAlpha(0.2),\n      positions: new Cesium.CallbackProperty((time) => this.props.groundTrack(time), false),\n      width: width * 1000,\n    });\n    this.createCesiumSatelliteEntity(\"Ground track\", \"corridor\", corridor);\n  }\n\n  createCone(fov = 10) {\n    if (this.props.orbit.orbitalPeriod > 60 * 2) {\n      // Cone graphic unavailable for non-LEO satellites\n      return;\n    }\n    const entity = new Cesium.Entity();\n    entity.addProperty(\"conicSensor\");\n    entity.conicSensor = new CesiumSensorVolumes.ConicSensorGraphics({\n      radius: 1000000,\n      innerHalfAngle: Cesium.Math.toRadians(0),\n      outerHalfAngle: Cesium.Math.toRadians(fov),\n      lateralSurfaceMaterial: Cesium.Color.GOLD.withAlpha(0.15),\n      intersectionColor: Cesium.Color.GOLD.withAlpha(0.3),\n      intersectionWidth: 1,\n    });\n    this.components[\"Sensor cone\"] = entity;\n  }\n\n  createGroundStationLink() {\n    if (!this.props.groundStationAvailable) {\n      return;\n    }\n    const polyline = new Cesium.PolylineGraphics({\n      followSurface: false,\n      material: new Cesium.PolylineGlowMaterialProperty({\n        glowPower: 0.5,\n        color: Cesium.Color.FORESTGREEN,\n      }),\n      positions: new Cesium.CallbackProperty((time) => {\n        const satPosition = this.props.position(time);\n        const groundPosition = this.props.groundStationPosition.cartesian;\n        const positions = [satPosition, groundPosition];\n        return positions;\n      }, false),\n      show: new Cesium.CallbackProperty((time) => this.props.passIntervals.contains(time), false),\n      width: 5,\n    });\n    this.createCesiumSatelliteEntity(\"Ground station link\", \"polyline\", polyline);\n  }\n\n  set groundStation(position) {\n    // No groundstation calculation for GEO satellites\n    if (this.props.orbit.orbitalPeriod > 60 * 12) {\n      return;\n    }\n\n    this.props.groundStationPosition = position;\n    this.props.clearPasses();\n    if (this.isSelected || this.isTracked) {\n      this.props.updatePasses(this.viewer.clock.currentTime);\n      if (this.isSelected) {\n        CesiumTimelineHelper.updateHighlightRanges(this.viewer, this.props.passes);\n      }\n    }\n    if (this.created) {\n      this.createGroundStationLink();\n    }\n  }\n}\n","import * as Cesium from \"@cesium/engine\";\nimport dayjs from \"dayjs\";\nimport { CesiumComponentCollection } from \"./util/CesiumComponentCollection\";\nimport { DescriptionHelper } from \"./util/DescriptionHelper\";\n\nimport icon from \"../images/icons/dish.svg\";\n\nexport class GroundStationEntity extends CesiumComponentCollection {\n  constructor(viewer, sats, position) {\n    super(viewer);\n    this.sats = sats;\n\n    this.name = \"Ground station\";\n    this.position = position;\n\n    this.createEntities();\n  }\n\n  createEntities() {\n    this.createDescription();\n    this.createGroundStation();\n  }\n\n  createGroundStation() {\n    const billboard = new Cesium.BillboardGraphics({\n      image: icon,\n      horizontalOrigin: Cesium.HorizontalOrigin.CENTER,\n      verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n      scaleByDistance: new Cesium.NearFarScalar(1e2, 0.2, 4e7, 0.1),\n    });\n    this.createCesiumEntity(\"Groundstation\", \"billboard\", billboard, this.name, this.description, this.position.cartesian, false);\n  }\n\n  createDescription() {\n    this.description = DescriptionHelper.cachedCallbackProperty((time) => {\n      const passes = this.passes(time);\n      const content = DescriptionHelper.renderDescription(time, this.name, this.position, passes, true);\n      return content;\n    });\n  }\n\n  passes(time, deltaHours = 48) {\n    let passes = [];\n    // Aggregate passes from all visible satellites\n    this.sats.visibleSatellites.forEach((sat) => {\n      sat.props.updatePasses(this.viewer.clock.currentTime);\n      passes.push(...sat.props.passes);\n    });\n\n    // Filter passes based on time\n    passes = passes.filter((pass) => dayjs(pass.start).diff(time, \"hours\") < deltaHours);\n\n    // Sort passes by time\n    passes = passes.sort((a, b) => a.start - b.start);\n    return passes;\n  }\n}\n","import { CesiumCallbackHelper } from \"./CesiumCallbackHelper\";\n\nexport class CesiumCleanupHelper {\n  // Cleanup leftover Cesium internal data after removing satellites\n  // https://github.com/CesiumGS/cesium/issues/7184\n  static cleanup(viewer) {\n    const onTickEventRemovalCallback = CesiumCallbackHelper.createPeriodicTickCallback(viewer, 1, () => {\n      console.info(\"Removing leftover Cesium internal data\");\n      onTickEventRemovalCallback();\n      /* eslint-disable no-underscore-dangle */\n      const labelCollection = viewer.scene.primitives?._primitives[0]?._primitives[0]._primitives[0]._labelCollection;\n      if (labelCollection) {\n        labelCollection._spareBillboards.forEach((billboard) => {\n          labelCollection._billboardCollection.remove(billboard);\n        });\n        labelCollection._spareBillboards.length = 0;\n      }\n      /* eslint-enable no-underscore-dangle */\n    });\n  }\n}\n","import { SatelliteComponentCollection } from \"./SatelliteComponentCollection\";\nimport { GroundStationEntity } from \"./GroundStationEntity\";\n\nimport { useSatStore } from \"../stores/sat\";\nimport { CesiumCleanupHelper } from \"./util/CesiumCleanupHelper\";\n\nexport class SatelliteManager {\n  #enabledComponents = [\"Point\", \"Label\"];\n\n  #enabledTags = [];\n\n  #enabledSatellites = [];\n\n  constructor(viewer) {\n    this.viewer = viewer;\n\n    this.satellites = [];\n    this.availableComponents = [\"Point\", \"Label\", \"Orbit\", \"Orbit track\", \"Ground track\", \"Sensor cone\", \"3D model\"];\n\n    this.viewer.trackedEntityChanged.addEventListener(() => {\n      if (this.trackedSatellite) {\n        this.getSatellite(this.trackedSatellite).show(this.#enabledComponents);\n      }\n      useSatStore().trackedSatellite = this.trackedSatellite;\n    });\n  }\n\n  addFromTleUrls(urlTagList) {\n    // Initiate async download of all TLE URLs and update store afterwards\n    const promises = urlTagList.map(([url, tags]) => this.addFromTleUrl(url, tags, false));\n    Promise.all(promises).then(() => this.updateStore());\n  }\n\n  addFromTleUrl(url, tags, updateStore = true) {\n    return fetch(url, {\n      mode: \"no-cors\",\n    }).then((response) => {\n      if (!response.ok) {\n        throw Error(response.statusText);\n      }\n      return response;\n    }).then((response) => response.text())\n      .then((data) => {\n        const lines = data.split(/\\r?\\n/);\n        for (let i = 3; i < lines.length; i + 3) {\n          const tle = lines.splice(i - 3, i).join(\"\\n\");\n          this.addFromTle(tle, tags, updateStore);\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  addFromTle(tle, tags, updateStore = true) {\n    const sat = new SatelliteComponentCollection(this.viewer, tle, tags);\n    this.#add(sat);\n    if (updateStore) {\n      this.updateStore();\n    }\n  }\n\n  #add(newSat) {\n    const existingSat = this.satellites.find((sat) => sat.props.satnum === newSat.props.satnum && sat.props.name === newSat.props.name);\n    if (existingSat) {\n      existingSat.props.addTags(newSat.props.tags);\n      if (newSat.props.tags.some((tag) => this.#enabledTags.includes(tag))) {\n        existingSat.show(this.#enabledComponents);\n      }\n      return;\n    }\n    if (this.groundStationAvailable) {\n      newSat.groundStation = this.groundStation.position;\n    }\n    this.satellites.push(newSat);\n\n    if (this.satIsActive(newSat)) {\n      newSat.show(this.#enabledComponents);\n      if (this.pendingTrackedSatellite === newSat.props.name) {\n        this.trackedSatellite = newSat.props.name;\n      }\n    }\n  }\n\n  updateStore() {\n    const satStore = useSatStore();\n    satStore.availableTags = this.tags;\n    satStore.availableSatellitesByTag = this.taglist;\n  }\n\n  get taglist() {\n    const taglist = {};\n    this.satellites.forEach((sat) => {\n      sat.props.tags.forEach((tag) => {\n        (taglist[tag] = taglist[tag] || []).push(sat.props.name);\n      });\n    });\n    Object.values(taglist).forEach((tag) => {\n      tag.sort();\n    });\n    return taglist;\n  }\n\n  get selectedSatellite() {\n    const satellite = this.satellites.find((sat) => sat.isSelected);\n    return satellite ? satellite.props.name : \"\";\n  }\n\n  get trackedSatellite() {\n    const satellite = this.satellites.find((sat) => sat.isTracked);\n    return satellite ? satellite.props.name : \"\";\n  }\n\n  set trackedSatellite(name) {\n    if (!name) {\n      if (this.trackedSatellite) {\n        this.viewer.trackedEntity = undefined;\n      }\n      return;\n    }\n    if (name === this.trackedSatellite) {\n      return;\n    }\n\n    const sat = this.getSatellite(name);\n    if (sat) {\n      sat.track();\n      this.pendingTrackedSatellite = undefined;\n    } else {\n      // Satellite does not exist (yet?)\n      this.pendingTrackedSatellite = name;\n    }\n  }\n\n  get visibleSatellites() {\n    return this.satellites.filter((sat) => sat.created);\n  }\n\n  get monitoredSatellites() {\n    return this.satellites.filter((sat) => sat.props.pm.active).map((sat) => sat.props.name);\n  }\n\n  set monitoredSatellites(sats) {\n    this.satellites.forEach((sat) => {\n      if (sats.includes(sat.props.name)) {\n        sat.props.notifyPasses();\n      } else {\n        sat.props.pm.clearTimers();\n      }\n    });\n  }\n\n  get satelliteNames() {\n    return this.satellites.map((sat) => sat.props.name);\n  }\n\n  getSatellite(name) {\n    return this.satellites.find((sat) => sat.props.name === name);\n  }\n\n  get enabledSatellites() {\n    return this.#enabledSatellites;\n  }\n\n  set enabledSatellites(newSats) {\n    this.#enabledSatellites = newSats;\n    this.showEnabledSatellites();\n\n    const satStore = useSatStore();\n    satStore.enabledSatellites = newSats;\n  }\n\n  get tags() {\n    const tags = this.satellites.map((sat) => sat.props.tags);\n    return [...new Set([].concat(...tags))];\n  }\n\n  getSatellitesWithTag(tag) {\n    return this.satellites.filter((sat) => sat.props.hasTag(tag));\n  }\n\n  /**\n   * Returns true if the satellite is enabled by tag or name\n   * @param {SatelliteComponentCollection} sat\n   * @returns {boolean} true if the satellite is enabled\n   */\n  satIsActive(sat) {\n    const enabledByTag = this.#enabledTags.some((tag) => sat.props.hasTag(tag));\n    const enabledByName = this.#enabledSatellites.includes(sat.props.name);\n    return enabledByTag || enabledByName;\n  }\n\n  get activeSatellites() {\n    return this.satellites.filter((sat) => this.satIsActive(sat));\n  }\n\n  showEnabledSatellites() {\n    this.satellites.forEach((sat) => {\n      if (this.satIsActive(sat)) {\n        sat.show(this.#enabledComponents);\n      } else {\n        sat.hide();\n      }\n    });\n    if (this.visibleSatellites.length === 0) {\n      CesiumCleanupHelper.cleanup(this.viewer);\n    }\n  }\n\n  get enabledTags() {\n    return this.#enabledTags;\n  }\n\n  set enabledTags(newTags) {\n    this.#enabledTags = newTags;\n    this.showEnabledSatellites();\n\n    const satStore = useSatStore();\n    satStore.enabledTags = newTags;\n  }\n\n  get components() {\n    const components = this.satellites.map((sat) => sat.components);\n    return [...new Set([].concat(...components))];\n  }\n\n  get enabledComponents() {\n    return this.#enabledComponents;\n  }\n\n  set enabledComponents(newComponents) {\n    const oldComponents = this.#enabledComponents;\n    const add = newComponents.filter((x) => !oldComponents.includes(x));\n    const del = oldComponents.filter((x) => !newComponents.includes(x));\n    add.forEach((component) => {\n      this.enableComponent(component);\n    });\n    del.forEach((component) => {\n      this.disableComponent(component);\n    });\n  }\n\n  enableComponent(componentName) {\n    if (!this.#enabledComponents.includes(componentName)) {\n      this.#enabledComponents.push(componentName);\n    }\n\n    this.activeSatellites.forEach((sat) => {\n      sat.enableComponent(componentName);\n    });\n  }\n\n  disableComponent(componentName) {\n    this.#enabledComponents = this.#enabledComponents.filter((name) => name !== componentName);\n\n    this.activeSatellites.forEach((sat) => {\n      sat.disableComponent(componentName);\n    });\n  }\n\n  get groundStationAvailable() {\n    return (typeof this.groundStation !== \"undefined\");\n  }\n\n  focusGroundStation() {\n    if (this.groundStationAvailable) {\n      this.groundStation.track();\n    }\n  }\n\n  setGroundStation(position) {\n    if (this.groundStationAvailable) {\n      this.groundStation.hide();\n    }\n    if (position.height < 1) {\n      position.height = 0;\n    }\n\n    // Create groundstation entity\n    this.groundStation = new GroundStationEntity(this.viewer, this, position);\n    this.groundStation.show();\n\n    // Set groundstation for all satellites\n    this.satellites.forEach((sat) => {\n      sat.groundStation = this.groundStation.position;\n    });\n\n    // Update store for url state\n    const satStore = useSatStore();\n    satStore.groundstation = [position.latitude, position.longitude];\n  }\n}\n","import * as Cesium from \"@cesium/engine\";\nimport { Viewer } from \"@cesium/widgets\";\nimport dayjs from \"dayjs\";\nimport utc from \"dayjs/plugin/utc\";\nimport * as Sentry from \"@sentry/browser\";\nimport { icon } from \"@fortawesome/fontawesome-svg-core\";\nimport { faBell, faInfo } from \"@fortawesome/free-solid-svg-icons\";\n\nimport { DeviceDetect } from \"./util/DeviceDetect\";\nimport { CesiumPerformanceStats } from \"./util/CesiumPerformanceStats\";\nimport { SatelliteManager } from \"./SatelliteManager\";\nimport { useCesiumStore } from \"../stores/cesium\";\nimport infoBoxCss from \"../css/infobox.ecss\";\n\ndayjs.extend(utc);\n\nexport class CesiumController {\n  constructor() {\n    this.initConstants();\n    this.preloadReferenceFrameData();\n    this.minimalUI = DeviceDetect.inIframe() || DeviceDetect.isIos();\n\n    this.viewer = new Viewer(\"cesiumContainer\", {\n      animation: !this.minimalUI,\n      baseLayer: this.createImageryLayer(\"OfflineHighres\"),\n      baseLayerPicker: false,\n      fullscreenButton: !this.minimalUI,\n      fullscreenElement: document.body,\n      geocoder: false,\n      homeButton: false,\n      navigationHelpButton: false,\n      navigationInstructionsInitiallyVisible: false,\n      sceneModePicker: false,\n      selectionIndicator: false,\n      timeline: !this.minimalUI,\n      vrButton: !this.minimalUI,\n      contextOptions: {\n        webgl: {\n          alpha: true,\n        },\n      },\n    });\n\n    // Cesium default settings\n    this.viewer.clock.shouldAnimate = true;\n    this.viewer.scene.globe.enableLighting = true;\n    this.viewer.scene.highDynamicRange = true;\n    this.viewer.scene.maximumRenderTimeChange = 1 / 30;\n    this.viewer.scene.requestRenderMode = true;\n\n    // Cesium Performance Tools\n    // this.viewer.scene.debugShowFramesPerSecond = true;\n    // this.FrameRateMonitor = Cesium.FrameRateMonitor.fromScene(this.viewer.scene);\n    // this.viewer.scene.postRender.addEventListener((scene) => {\n    //   console.log(this.FrameRateMonitor.lastFramesPerSecond)\n    // });\n    // this.enablePerformanceLogger(true);\n\n    // Export CesiumController for debugger\n    window.cc = this;\n\n    // CesiumController config\n    this.sceneModes = [\"3D\", \"2D\", \"Columbus\"];\n    this.cameraModes = [\"Fixed\", \"Inertial\"];\n\n    this.createInputHandler();\n    this.addErrorHandler();\n    this.styleInfoBox();\n\n    // Create Satellite Manager\n    this.sats = new SatelliteManager(this.viewer);\n\n    // Add privacy policy to credits when not running in iframe\n    if (!DeviceDetect.inIframe()) {\n      this.viewer.creditDisplay.addStaticCredit(new Cesium.Credit(`<a href=\"/privacy.html\" target=\"_blank\"><u>Privacy</u></a>`, true));\n    }\n    this.viewer.creditDisplay.addStaticCredit(new Cesium.Credit(`Satellite TLE data provided by <a href=\"https://celestrak.org/NORAD/elements/\" target=\"_blank\"><u>Celestrak</u></a>`));\n\n    // Fix Cesium logo in minimal ui mode\n    if (this.minimalUI) {\n      setTimeout(() => { this.fixLogo(); }, 2500);\n    }\n\n    this.activeLayers = [];\n  }\n\n  initConstants() {\n    this.imageryProviders = {\n      Offline: {\n        create: () => Cesium.TileMapServiceImageryProvider.fromUrl(Cesium.buildModuleUrl(\"Assets/Textures/NaturalEarthII\")),\n        alpha: 1,\n        base: true,\n      },\n      OfflineHighres: {\n        create: () => Cesium.TileMapServiceImageryProvider.fromUrl(\"data/cesium-assets/imagery/NaturalEarthII\", {\n          maximumLevel: 5,\n          credit: \"Imagery courtesy Natural Earth\",\n        }),\n        alpha: 1,\n        base: true,\n      },\n      ArcGis: {\n        create: () => Cesium.ArcGisMapServerImageryProvider.fromUrl(\"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer\"),\n        alpha: 1,\n        base: true,\n      },\n      OSM: {\n        create: () => new Cesium.OpenStreetMapImageryProvider({\n          url: \"https://a.tile.openstreetmap.org/\",\n        }),\n        alpha: 1,\n        base: true,\n      },\n      Topo: {\n        create: () => new Cesium.UrlTemplateImageryProvider({\n          url: \"https://api.maptiler.com/maps/topo-v2/{z}/{x}/{y}@2x.png?key=tiHE8Ed08u6ZoFjbE32Z\",\n          credit: `<a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a> <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>`,\n        }),\n        alpha: 1,\n        base: true,\n      },\n      BlackMarble: {\n        create: () => new Cesium.WebMapServiceImageryProvider({\n          url: \"https://gibs.earthdata.nasa.gov/wms/epsg4326/best/wms.cgi\",\n          layers: \"VIIRS_Black_Marble\",\n          style: \"default\",\n          tileMatrixSetID: \"250m\",\n          format: \"image/png\",\n          tileWidth: 512,\n          tileHeight: 512,\n          credit: \"NASA Global Imagery Browse Services for EOSDIS\",\n        }),\n        alpha: 1,\n        base: true,\n      },\n      Tiles: {\n        create: () => new Cesium.TileCoordinatesImageryProvider(),\n        alpha: 1,\n        base: false,\n      },\n      \"GOES-IR\": {\n        create: () => new Cesium.WebMapServiceImageryProvider({\n          url: \"https://mesonet.agron.iastate.edu/cgi-bin/wms/goes/conus_ir.cgi?\",\n          layers: \"goes_conus_ir\",\n          credit: \"Infrared data courtesy Iowa Environmental Mesonet\",\n          parameters: {\n            transparent: \"true\",\n            format: \"image/png\",\n          },\n        }),\n        alpha: 0.5,\n        base: false,\n      },\n      Nextrad: {\n        create: () => new Cesium.WebMapServiceImageryProvider({\n          url: \"https://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi?\",\n          layers: \"nexrad-n0r\",\n          credit: \"US Radar data courtesy Iowa Environmental Mesonet\",\n          parameters: {\n            transparent: \"true\",\n            format: \"image/png\",\n          },\n        }),\n        alpha: 0.5,\n        base: false,\n      },\n    };\n    this.terrainProviders = {\n      None: {\n        create: () => new Cesium.EllipsoidTerrainProvider(),\n      },\n      Maptiler: {\n        create: () => Cesium.CesiumTerrainProvider.fromUrl(\"https://api.maptiler.com/tiles/terrain-quantized-mesh/?key=tiHE8Ed08u6ZoFjbE32Z\", {\n          credit: \"<a href=\\\"https://www.maptiler.com/copyright/\\\" target=\\\"_blank\\\">© MapTiler</a> <a href=\\\"https://www.openstreetmap.org/copyright\\\" target=\\\"_blank\\\">© OpenStreetMap contributors</a>\",\n          requestVertexNormals: true,\n        }),\n      },\n      ArcGIS: {\n        create: () => Cesium.ArcGISTiledElevationTerrainProvider.fromUrl(\"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer\"),\n        visible: false,\n      },\n    };\n  }\n\n  preloadReferenceFrameData() {\n    // Preload reference frame data for a timeframe of 180 days\n    const timeInterval = new Cesium.TimeInterval({\n      start: Cesium.JulianDate.addDays(Cesium.JulianDate.now(), -60, new Cesium.JulianDate()),\n      stop: Cesium.JulianDate.addDays(Cesium.JulianDate.now(), 120, new Cesium.JulianDate()),\n    });\n    Cesium.Transforms.preloadIcrfFixed(timeInterval).then(() => {\n      console.log(\"Reference frame data loaded\");\n    });\n  }\n\n  get imageryProviderNames() {\n    return Object.keys(this.imageryProviders);\n  }\n\n  get baseLayers() {\n    return Object.entries(this.imageryProviders).filter(([, val]) => val.base).map(([key]) => key);\n  }\n\n  get overlayLayers() {\n    return Object.entries(this.imageryProviders).filter(([, val]) => !val.base).map(([key]) => key);\n  }\n\n  set imageryLayers(newLayerNames) {\n    this.clearImageryLayers();\n    newLayerNames.forEach((layerName) => {\n      const [name, alpha] = layerName.split(\"_\");\n      const layer = this.createImageryLayer(name, alpha);\n      if (layer) {\n        this.viewer.scene.imageryLayers.add(layer);\n      }\n    });\n  }\n\n  clearImageryLayers() {\n    this.viewer.scene.imageryLayers.removeAll();\n  }\n\n  createImageryLayer(imageryProviderName, alpha) {\n    if (!this.imageryProviderNames.includes(imageryProviderName)) {\n      console.error(\"Unknown imagery layer\");\n      return false;\n    }\n\n    const provider = this.imageryProviders[imageryProviderName];\n    const layer = Cesium.ImageryLayer.fromProviderAsync(provider.create());\n    if (alpha === undefined) {\n      layer.alpha = provider.alpha;\n    } else {\n      layer.alpha = alpha;\n    }\n    return layer;\n  }\n\n  get terrainProviderNames() {\n    return Object.entries(this.terrainProviders).filter(([, val]) => val.visible ?? true).map(([key]) => key);\n  }\n\n  set terrainProvider(terrainProviderName) {\n    this.updateTerrainProvider(terrainProviderName);\n  }\n\n  async updateTerrainProvider(terrainProviderName) {\n    if (!this.terrainProviderNames.includes(terrainProviderName)) {\n      console.error(\"Unknown terrain provider\");\n      return;\n    }\n\n    const provider = await this.terrainProviders[terrainProviderName].create();\n    this.viewer.terrainProvider = provider;\n  }\n\n  set sceneMode(sceneMode) {\n    switch (sceneMode) {\n      case \"3D\":\n        this.viewer.scene.morphTo3D();\n        break;\n      case \"2D\":\n        this.viewer.scene.morphTo2D();\n        break;\n      case \"Columbus\":\n        this.viewer.scene.morphToColumbusView();\n        break;\n      default:\n        console.error(\"Unknown scene mode\");\n    }\n  }\n\n  jumpTo(location) {\n    switch (location) {\n      case \"Everest\": {\n        const target = new Cesium.Cartesian3(300770.50872389384, 5634912.131394585, 2978152.2865545116);\n        const offset = new Cesium.Cartesian3(6344.974098678562, -793.3419798081741, 2499.9508860763162);\n        this.viewer.camera.lookAt(target, offset);\n        this.viewer.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);\n        break;\n      }\n      case \"HalfDome\": {\n        const target = new Cesium.Cartesian3(-2489625.0836225147, -4393941.44443024, 3882535.9454173897);\n        const offset = new Cesium.Cartesian3(-6857.40902037546, 412.3284835694358, 2147.5545426812023);\n        this.viewer.camera.lookAt(target, offset);\n        this.viewer.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);\n        break;\n      }\n      default:\n        console.error(\"Unknown location\");\n    }\n  }\n\n  set cameraMode(cameraMode) {\n    switch (cameraMode) {\n      case \"Inertial\":\n        this.viewer.scene.postUpdate.addEventListener(this.cameraTrackEci);\n        break;\n      case \"Fixed\":\n        this.viewer.scene.postUpdate.removeEventListener(this.cameraTrackEci);\n        break;\n      default:\n        console.error(\"Unknown camera mode\");\n    }\n  }\n\n  cameraTrackEci(scene, time) {\n    if (scene.mode !== Cesium.SceneMode.SCENE3D) {\n      return;\n    }\n\n    const icrfToFixed = Cesium.Transforms.computeIcrfToFixedMatrix(time);\n    if (Cesium.defined(icrfToFixed)) {\n      const { camera } = scene;\n      const offset = Cesium.Cartesian3.clone(camera.position);\n      const transform = Cesium.Matrix4.fromRotationTranslation(icrfToFixed);\n      camera.lookAtTransform(transform, offset);\n    }\n  }\n\n  setTime(current, start = dayjs.utc(current).subtract(12, \"hour\").toISOString(), stop = dayjs.utc(current).add(7, \"day\").toISOString()) {\n    this.viewer.clock.startTime = Cesium.JulianDate.fromIso8601(dayjs.utc(start).toISOString());\n    this.viewer.clock.stopTime = Cesium.JulianDate.fromIso8601(dayjs.utc(stop).toISOString());\n    this.viewer.clock.currentTime = Cesium.JulianDate.fromIso8601(dayjs.utc(current).toISOString());\n    if (typeof this.viewer.timeline !== \"undefined\") {\n      this.viewer.timeline.updateFromClock();\n      this.viewer.timeline.zoomTo(this.viewer.clock.startTime, this.viewer.clock.stopTime);\n    }\n  }\n\n  createInputHandler() {\n    const handler = new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas);\n    handler.setInputAction((event) => {\n      const { pickMode } = useCesiumStore();\n      if (!pickMode) {\n        return;\n      }\n      this.setGroundStationFromClickEvent(event);\n    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n  }\n\n  setGroundStationFromClickEvent(event) {\n    const cartesian = this.viewer.camera.pickEllipsoid(event.position);\n    const didHitGlobe = Cesium.defined(cartesian);\n    if (didHitGlobe) {\n      const coordinates = {};\n      const cartographicPosition = Cesium.Cartographic.fromCartesian(cartesian);\n      coordinates.longitude = Cesium.Math.toDegrees(cartographicPosition.longitude);\n      coordinates.latitude = Cesium.Math.toDegrees(cartographicPosition.latitude);\n      coordinates.height = Cesium.Math.toDegrees(cartographicPosition.height);\n      coordinates.cartesian = cartesian;\n      this.sats.setGroundStation(coordinates);\n      useCesiumStore().pickMode = false;\n    }\n  }\n\n  setGroundStationFromGeolocation() {\n    navigator.geolocation.getCurrentPosition((position) => {\n      if (typeof position === \"undefined\") {\n        return;\n      }\n      const coordinates = {};\n      coordinates.longitude = position.coords.longitude;\n      coordinates.latitude = position.coords.latitude;\n      coordinates.height = position.coords.altitude;\n      coordinates.cartesian = Cesium.Cartesian3.fromDegrees(coordinates.longitude, coordinates.latitude, coordinates.height);\n      this.sats.setGroundStation(coordinates);\n    });\n  }\n\n  setGroundStationFromLatLon(lat, lon, height = 0) {\n    if (!lat || !lon) {\n      return;\n    }\n    const coordinates = {\n      longitude: lon,\n      latitude: lat,\n      height,\n    };\n    coordinates.longitude = lon;\n    coordinates.latitude = lat;\n    coordinates.height = height;\n    coordinates.cartesian = Cesium.Cartesian3.fromDegrees(coordinates.longitude, coordinates.latitude, coordinates.height);\n    this.sats.setGroundStation(coordinates);\n  }\n\n  set showUI(enabled) {\n    if (enabled) {\n      /* eslint-disable no-underscore-dangle */\n      this.viewer._animation.container.style.visibility = \"\";\n      this.viewer._timeline.container.style.visibility = \"\";\n      this.viewer._fullscreenButton._container.style.visibility = \"\";\n      this.viewer._vrButton._container.style.visibility = \"\";\n      this.viewer._bottomContainer.style.left = this.oldBottomContainerStyleLeft;\n      this.viewer._bottomContainer.style.bottom = \"30px\";\n    } else {\n      this.viewer._animation.container.style.visibility = \"hidden\";\n      this.viewer._timeline.container.style.visibility = \"hidden\";\n      this.viewer._fullscreenButton._container.style.visibility = \"hidden\";\n      this.viewer._vrButton._container.style.visibility = \"hidden\";\n      this.oldBottomContainerStyleLeft = this.viewer._bottomContainer.style.left;\n      this.viewer._bottomContainer.style.left = \"5px\";\n      this.viewer._bottomContainer.style.bottom = \"0px\";\n      /* eslint-enable no-underscore-dangle */\n    }\n  }\n\n  get showUI() {\n    // eslint-disable-next-line\n    return this.viewer._timeline.container.style.visibility !== \"hidden\";\n  }\n\n  fixLogo() {\n    if (this.minimalUI) {\n      // eslint-disable-next-line\n      this.viewer._bottomContainer.style.left = \"5px\";\n    }\n    if (DeviceDetect.isiPhoneWithNotchVisible()) {\n      // eslint-disable-next-line\n      this.viewer._bottomContainer.style.bottom = \"20px\";\n    }\n  }\n\n  set qualityPreset(quality) {\n    switch (quality) {\n      case \"low\":\n        // Ignore browser's device pixel ratio and use CSS pixels instead of device pixels for render resolution\n        this.viewer.useBrowserRecommendedResolution = true;\n        break;\n      case \"high\":\n        // Use browser's device pixel ratio for render resolution\n        this.viewer.useBrowserRecommendedResolution = false;\n        break;\n      default:\n        console.error(\"Unknown quality preset\");\n    }\n  }\n\n  set showFps(value) {\n    cc.viewer.scene.debugShowFramesPerSecond = value;\n  }\n\n  set background(active) {\n    if (!active) {\n      this.viewer.scene.backgroundColor = Cesium.Color.TRANSPARENT;\n      this.viewer.scene.moon = undefined;\n      this.viewer.scene.skyAtmosphere = undefined;\n      this.viewer.scene.skyBox = undefined;\n      this.viewer.scene.sun = undefined;\n      document.documentElement.style.background = \"transparent\";\n      document.body.style.background = \"transparent\";\n      document.getElementById(\"cesiumContainer\").style.background = \"transparent\";\n    }\n  }\n\n  enablePerformanceStats(logContinuously = false) {\n    this.performanceStats = new CesiumPerformanceStats(this.viewer.scene, logContinuously);\n  }\n\n  addErrorHandler() {\n    // Rethrow scene render errors\n    this.viewer.scene.rethrowRenderErrors = true;\n    this.viewer.scene.renderError.addEventListener((scene, error) => {\n      console.error(scene, error);\n      Sentry.captureException(error);\n    });\n\n    // Proxy and log CesiumWidget render loop errors that only display a UI error message\n    const widget = this.viewer.cesiumWidget;\n    const proxied = widget.showErrorPanel;\n    widget.showErrorPanel = function widgetError(title, message, error) {\n      proxied.apply(this, [title, message, error]);\n      Sentry.captureException(error);\n    };\n  }\n\n  styleInfoBox() {\n    const infoBox = this.viewer.infoBox.container.getElementsByClassName(\"cesium-infoBox\")[0];\n    const close = this.viewer.infoBox.container.getElementsByClassName(\"cesium-infoBox-close\")[0];\n    if (infoBox && close) {\n      // Container for additional buttons\n      const container = document.createElement(\"div\");\n      container.setAttribute(\"class\", \"cesium-infoBox-container\");\n      infoBox.insertBefore(container, close);\n\n      // Notify button\n      const notifyButton = document.createElement(\"button\");\n      notifyButton.setAttribute(\"type\", \"button\");\n      notifyButton.setAttribute(\"class\", \"cesium-button cesium-infoBox-custom\");\n      notifyButton.innerHTML = icon(faBell).html;\n      notifyButton.addEventListener(\"click\", () => {\n        if (this.sats.selectedSatellite) {\n          this.sats.getSatellite(this.sats.selectedSatellite).props.notifyPasses();\n        } else if (this.sats.groundStationAvailable && this.sats.groundStation.isSelected) {\n          this.sats.enabledSatellites.forEach((sat) => {\n            sat.props.notifyPasses();\n          });\n        }\n      });\n      container.appendChild(notifyButton);\n\n      // Info button\n      const infoButton = document.createElement(\"button\");\n      infoButton.setAttribute(\"type\", \"button\");\n      infoButton.setAttribute(\"class\", \"cesium-button cesium-infoBox-custom\");\n      infoButton.innerHTML = icon(faInfo).html;\n      infoButton.addEventListener(\"click\", () => {\n        if (!this.sats.selectedSatellite) {\n          return;\n        }\n        const { satnum } = this.sats.getSatellite(this.sats.selectedSatellite).props;\n        const url = `https://www.n2yo.com/satellite/?s=${satnum}`;\n        window.open(url, \"_blank\", \"noopener\");\n      });\n      container.appendChild(infoButton);\n    }\n\n    const { frame } = this.viewer.infoBox;\n    frame.addEventListener(\"load\", () => {\n      // Inline infobox css as iframe does not use service worker\n      const { head } = frame.contentDocument;\n      const links = head.getElementsByTagName(\"link\");\n      [...links].forEach((link) => {\n        head.removeChild(link);\n      });\n\n      const style = frame.contentDocument.createElement(\"style\");\n      const css = infoBoxCss.toString();\n      const node = document.createTextNode(css);\n      style.appendChild(node);\n      head.appendChild(style);\n    }, false);\n\n    // Allow js in infobox\n    frame.setAttribute(\"sandbox\", \"allow-same-origin allow-popups allow-forms allow-scripts\");\n    frame.src = \"about:blank\";\n\n    // Allow time changes from infobox\n    window.addEventListener(\"message\", (e) => {\n      const pass = e.data;\n      if (\"start\" in pass) {\n        this.setTime(pass.start);\n      }\n    });\n  }\n}\n","import { createApp, markRaw } from \"vue\";\nimport { createPinia } from \"pinia\";\nimport { Workbox } from \"workbox-window\";\nimport { Tooltip } from \"@oruga-ui/oruga-next\";\nimport Toast from \"vue-toastification\";\nimport * as Sentry from \"@sentry/browser\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { faLayerGroup, faGlobeAfrica, faMobileAlt, faHammer, faEye } from \"@fortawesome/free-solid-svg-icons\";\nimport { faGithub } from \"@fortawesome/free-brands-svg-icons\";\n\nimport App from \"./App.vue\";\nimport router from \"./components/Router\";\nimport piniaUrlSync from \"./modules/util/pinia-plugin-url-sync\";\nimport { CesiumController } from \"./modules/CesiumController\";\n\nfunction satvisSetup(customConfig = {}) {\n  // Enable sentry for production version\n  if (window.location.href.includes(\"satvis.space\")) {\n    Sentry.init({ dsn: \"https://6c17c8b3e731026b3e9e0df0ecfc1b83@o294643.ingest.us.sentry.io/1541793\" });\n  }\n\n  // Setup and init app\n  const app = createApp(App);\n  const cc = new CesiumController();\n  app.config.globalProperties.cc = cc;\n  const pinia = createPinia();\n  pinia.use(({ store }) => { store.router = markRaw(router); });\n  pinia.use(({ store }) => { store.customConfig = markRaw(customConfig); });\n  pinia.use(piniaUrlSync);\n  app.use(pinia);\n  app.use(router);\n  app.use(Tooltip);\n  app.use(Toast, {\n    position: \"bottom-right\",\n  });\n  library.add(faLayerGroup, faGlobeAfrica, faMobileAlt, faHammer, faEye, faGithub);\n  app.component(\"FontAwesomeIcon\", FontAwesomeIcon);\n  app.mount(\"#app\");\n\n  // Register service worker\n  if (\"serviceWorker\" in navigator && !window.location.href.includes(\"localhost\")) {\n    const wb = new Workbox(\"sw.js\");\n    wb.addEventListener(\"controlling\", (evt) => {\n      if (evt.isUpdate) {\n        console.log(\"Reloading page for latest content\");\n        window.location.reload();\n      }\n    });\n    wb.register();\n  }\n\n  return { app, cc };\n}\n\nexport default satvisSetup;\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_AT_RULE_IMPORT_0___ = require(\"-!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-4!../../node_modules/cesium/Source/Widgets/InfoBox/InfoBoxDescription.css\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.ib h3 {\n    text-align: center;\n    margin-block-start: 10px;\n    margin-block-end: 10px;\n}\n\n.ib .ib-text {\n    text-align: center;\n}\n\n.ib .ib-code {\n    background: #f4f4f4;\n    color: #666;\n    font-size: 12px;\n    line-height: 1.5;\n    margin: 0px;\n    padding: 4px;\n    white-space: pre-wrap;\n}\n\n.ib .ib-code code {\n    background: inherit;\n}\n\n.ibt {\n    border-collapse: collapse;\n    border-radius: 6px;\n    width: 100%;\n}\n\n.ibt th, .ibt td {\n    border: 1px solid #6d6d6d;\n}\n\n.ibt th {\n    background-color: #4CAF50;\n    padding: 6px;\n}\n\n.ibt td {\n    text-align: center;\n    padding: 4px;\n}\n\n.ibt td:first-child, .ibt th:first-child {\n    text-align: left;\n}\n\n.ibt .ibt-right {\n    text-align: right;\n}\n\n.cesium-infoBox-description {\n    margin-right: 0px;\n    min-height: 200px;\n    max-height: 500px;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/css/infobox.ecss\"],\"names\":[],\"mappings\":\"AAEA;IACI,kBAAkB;IAClB,wBAAwB;IACxB,sBAAsB;AAC1B;;AAEA;IACI,kBAAkB;AACtB;;AAEA;IACI,mBAAmB;IACnB,WAAW;IACX,eAAe;IACf,gBAAgB;IAChB,WAAW;IACX,YAAY;IACZ,qBAAqB;AACzB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,yBAAyB;IACzB,kBAAkB;IAClB,WAAW;AACf;;AAEA;IACI,yBAAyB;AAC7B;;AAEA;IACI,yBAAyB;IACzB,YAAY;AAChB;;AAEA;IACI,kBAAkB;IAClB,YAAY;AAChB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,iBAAiB;AACrB;;AAEA;IACI,iBAAiB;IACjB,iBAAiB;IACjB,iBAAiB;IACjB,gBAAgB;IAChB,iCAAiC;AACrC\",\"sourcesContent\":[\"@import url(\\\"../../node_modules/cesium/Source/Widgets/InfoBox/InfoBoxDescription.css\\\");\\n\\n.ib h3 {\\n    text-align: center;\\n    margin-block-start: 10px;\\n    margin-block-end: 10px;\\n}\\n\\n.ib .ib-text {\\n    text-align: center;\\n}\\n\\n.ib .ib-code {\\n    background: #f4f4f4;\\n    color: #666;\\n    font-size: 12px;\\n    line-height: 1.5;\\n    margin: 0px;\\n    padding: 4px;\\n    white-space: pre-wrap;\\n}\\n\\n.ib .ib-code code {\\n    background: inherit;\\n}\\n\\n.ibt {\\n    border-collapse: collapse;\\n    border-radius: 6px;\\n    width: 100%;\\n}\\n\\n.ibt th, .ibt td {\\n    border: 1px solid #6d6d6d;\\n}\\n\\n.ibt th {\\n    background-color: #4CAF50;\\n    padding: 6px;\\n}\\n\\n.ibt td {\\n    text-align: center;\\n    padding: 4px;\\n}\\n\\n.ibt td:first-child, .ibt th:first-child {\\n    text-align: left;\\n}\\n\\n.ibt .ibt-right {\\n    text-align: right;\\n}\\n\\n.cesium-infoBox-description {\\n    margin-right: 0px;\\n    min-height: 200px;\\n    max-height: 500px;\\n    overflow-y: auto;\\n    -webkit-overflow-scrolling: touch;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_router_view","id","_createElementVNode","href","target","rel","useCesiumStore","defineStore","state","layers","terrainProvider","sceneMode","cameraMode","qualityPreset","background","showFps","pickMode","urlsync","enabled","config","name","url","serialize","v","join","deserialize","split","filter","e","default","useSatStore","enabledComponents","availableSatellitesByTag","availableTags","enabledSatellites","enabledTags","groundstation","trackedSatellite","replaceAll","map","c","toFixed","parseFloat","components","VueMultiselect","data","computed","mapWritableState","availableSatellites","satlist","Object","keys","this","tag","sats","length","satellitesEnabledByTag","getSatellitesFromTags","allEnabledSatellites","get","concat","set","some","sat","includes","satellitesInEnabledTags","cc","watch","tags","satellite","methods","taglist","flat","_hoisted_2","_hoisted_3","_component_vue_multiselect","_ctx","$event","options","multiple","searchable","placeholder","_hoisted_4","_hoisted_5","$options","limit","count","noResult","_withCtx","DeviceDetect","inIframe","window","self","top","hasTouch","matchMedia","matches","canHover","isIos","userAgent","navigator","toLowerCase","test","isSafari","isInStandaloneMode","standalone","isiPhoneWithNotch","getiPhoneModel","isiPhoneWithNotchVisible","ratio","devicePixelRatio","screen","height","width","SatelliteSelect","menu","cat","gs","ios","dbg","showUI","tooltipTriggers","handler","newLayers","oldLayers","newBaseLayers","layer","baseLayers","oldBaseLayers","imageryLayers","deep","newProvider","newMode","value","immediate","newComponents","newPosition","oldPosition","setGroundStationFromLatLon","mounted","$route","query","time","setTime","toggleMenu","oldState","forEach","k","toggleUI","minimalUI","_component_o_tooltip","label","triggers","$data","position","type","onClick","_cache","_component_font_awesome_icon","icon","_createBlock","_hoisted_8","_component_satellite_select","_hoisted_9","_hoisted_10","_Fragment","_renderList","availableComponents","componentName","key","_hoisted_12","_toDisplayString","_createCommentVNode","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","setGroundStationFromGeolocation","_hoisted_18","focusGroundStation","_hoisted_19","_hoisted_20","imageryProviderNames","_hoisted_22","_hoisted_23","terrainProviderNames","_hoisted_25","_hoisted_26","sceneModes","_hoisted_28","_hoisted_29","cameraModes","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","viewer","scene","useWebVR","_hoisted_35","_hoisted_36","clock","shouldAnimate","_hoisted_37","_hoisted_38","clockViewModel","multiplier","_hoisted_39","_hoisted_40","$router","go","path","force","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","requestRenderMode","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","fog","_hoisted_50","_hoisted_51","globe","enableLighting","_hoisted_52","_hoisted_53","highDynamicRange","_hoisted_54","_hoisted_55","showGroundAtmosphere","_hoisted_56","_hoisted_57","jumpTo","_hoisted_58","_hoisted_59","_hoisted_60","args","createRouter","history","createWebHistory","document","location","pathname","match","routes","component","Satvis","defaultSerialize","String","defaultDeserialize","store","router","isReady","then","syncConfig","customConfig","route","currentRoute","defaults","$id","entries","val","param","console","info","valid","TypeError","error","undefined","replace","urlToState","$subscribe","params","URLSearchParams","search","obj","separator","Array","isArray","reduce","prev","curr","resolve","delete","pushState","toString","stateToUrl","CesiumPerformanceStats","constructor","logContinuously","sampleCount","idx","postRenderTimes","discardNext","avgFps","avgFrameTime","worstFrameTime","preUpdate","addEventListener","performance","mark","postRender","getTimestamp","calculateStats","log","formatStats","measure","i","frametime","duration","reset","getStats","fmt","n","padStart","deg2rad","Math","PI","rad2deg","Orbit","tle","satrec","satellitejs","satnum","orbitalPeriod","meanMotionRad","no","positionECI","positionECF","positionEci","gmst","positionGeodetic","timestamp","calculateVelocity","velocity","velocityVector","positionGd","longitude","latitude","sqrt","x","y","z","computePassesElevation","groundStationPosition","startDate","dayjs","toDate","endDate","add","minElevation","maxPasses","groundStation","date","Date","passes","pass","ongoingPass","lastElevation","positionEcf","lookAngles","elevation","maxElevation","apex","getTime","azimuthApex","azimuth","start","azimuthStart","setSeconds","getSeconds","end","azimuthEnd","push","setMinutes","getMinutes","deltaElevation","PushManager","timers","available","Notification","permission","requestPermission","result","active","clearTimers","timer","clearTimeout","persistentNotification","message","optionsMerged","serviceWorker","getRegistration","reg","showNotification","catch","err","notifyInMs","ms","setTimeout","notifyAtDate","waitMs","diff","abs","unix","content","delay","webkit","messageHandlers","iosNotify","postMessage","SampledPositionProperty","prototype","getRawValues","times","_property","_times","innerType","_innerType","values","_values","startIndex","binarySearch","JulianDate","compare","endIndex","unpack","packedLength","CesiumCallbackHelper","createPeriodicTickCallback","refreshRate","callback","event","onTick","ticks","currentTime","createPeriodicTimeCallback","lastUpdated","Cesium","secondsDifference","SatelliteProperties","trim","startsWith","substring","orbit","passInterval","passIntervals","pm","satvisIcon","hasTag","addTags","Set","sampledPosition","fixed","getValue","getSampledInertialPositionsForNextOrbit","addSeconds","positions","inertial","createSampledPosition","updateSampledPosition","samplingRefreshRate","removeCallback","samplingInterval","request","stop","contains","interval","initSampledPosition","intersect","missingSecondsEnd","missingSecondsStart","samplingStart","samplingStop","addSamples","removeBefore","fromIso8601","isStartIncluded","isStopIncluded","removeAfter","removeSamples","backwardExtrapolationType","HOLD","forwardExtrapolationType","setInterpolationOptions","interpolationDegree","interpolationAlgorithm","INERTIAL","positionsFixed","positionsInertial","positionFixed","positionInertial","computePosition","computePositionInertialTEME","eci","ZERO","positionInertialTEME","temeToFixed","computeTemeToPseudoFixedMatrix","multiplyByVector","fixedToIcrf","computeFixedToIcrfMatrix","groundTrack","julianDate","samplesFwd","samplesBwd","stopTime","cartographic","fromCartesian","groudPosition","fromRadians","groundStationAvailable","updatePasses","addDays","clone","stopPrediction","computePassIntervals","clearPasses","passIntervalArray","startJulian","fromDate","endJulian","notifyPasses","aheadMin","toast","useToast","warning","startOf","subtract","success","CesiumComponentCollection","static","lazy","componentNames","created","show","enableComponent","hide","disableComponent","entities","primitives","geometries","recreateGeometryInstancePrimitive","defaultEntity","remove","geometry","primitivePendingUpdate","primitivePendingCreation","primitive","requestRender","geometryInstances","appearance","lastState","readyCallback","ready","_state","update","frameState","icrfToFixed","computeIcrfToFixedMatrix","modelMatrix","fromRotationTranslation","visibleComponents","isSelected","entity","selectedEntity","isTracked","trackedEntity","track","animate","clockRunning","flyTo","offset","PI_OVER_FOUR","setSelectedOnTickCallback","onTickCallback","onUnselectCallback","onTickEventRemovalCallback","onSelectedEntityChangedRemovalCallback","selectedEntityChanged","setTrackedOnTickCallback","onUntrackCallback","onTrackedEntityChangedRemovalCallback","trackedEntityChanged","artificiallyTrack","cameraTracker","ellipsoid","toRadians","createCesiumEntity","entityKey","entityValue","description","moving","viewFrom","orientation","CesiumTimelineHelper","clearHighlightRanges","timeline","_highlightRanges","updateFromClock","zoomTo","startTime","addHighlightRanges","ranges","range","addHighlightRange","BLUE","setRange","updateHighlightRanges","relativeTime","DescriptionHelper","cachedCallbackProperty","updateTreshold","usageTreshold","cache","equalsEpsilon","usage","renderDescription","isGroundStation","renderPasses","renderTLE","upcomingPassIdx","findIndex","isAfter","upcomingPasses","slice","showPassName","renderPass","pad2","num","countdown","JSON","stringify","format","SatelliteComponentCollection","super","props","eventListeners","init","createComponent","updatedSampledPositionForComponents","Label","pixelOffset","orbitPrimitiveUpdater","geometryPrimitiveUpdater","deinit","createDescription","isCorrectOrbitComponent","hpr","headingPitchRollQuaternion","createPoint","createLabel","createOrbit","createOrbitTrack","createGroundTrack","createCone","createModel","createGroundStationLink","createCesiumSatelliteEntity","entityName","point","pixelSize","color","WHITE","outlineColor","DIMGREY","outlineWidth","createBox","size","box","dimensions","material","model","uri","minimumPixelSize","maximumScale","text","font","style","FILL_AND_OUTLINE","horizontalOrigin","LEFT","distanceDisplayCondition","translucencyByDistance","createOrbitPath","createOrbitPolylineGeometry","leadTime","trailTime","withAlpha","resolution","createOrbitPolylinePrimitive","arcType","NONE","vertexFormat","VERTEX_FORMAT","attributes","fromColor","asynchronous","geometryInstance","GOLD","corridor","cornerType","MITERED","ORANGE","fov","addProperty","conicSensor","CesiumSensorVolumes","ConicSensorGraphics","radius","innerHalfAngle","outerHalfAngle","lateralSurfaceMaterial","intersectionColor","intersectionWidth","polyline","followSurface","glowPower","FORESTGREEN","cartesian","GroundStationEntity","createEntities","createGroundStation","billboard","image","CENTER","verticalOrigin","BOTTOM","scaleByDistance","deltaHours","visibleSatellites","sort","a","b","CesiumCleanupHelper","cleanup","labelCollection","_primitives","_labelCollection","_spareBillboards","_billboardCollection","SatelliteManager","satellites","getSatellite","addFromTleUrls","urlTagList","promises","addFromTleUrl","Promise","all","updateStore","fetch","mode","response","ok","Error","statusText","lines","splice","addFromTle","newSat","existingSat","find","satIsActive","pendingTrackedSatellite","satStore","selectedSatellite","monitoredSatellites","satelliteNames","newSats","showEnabledSatellites","getSatellitesWithTag","enabledByTag","enabledByName","activeSatellites","newTags","oldComponents","del","setGroundStation","utc","CesiumController","initConstants","preloadReferenceFrameData","Viewer","animation","baseLayer","createImageryLayer","baseLayerPicker","fullscreenButton","fullscreenElement","body","geocoder","homeButton","navigationHelpButton","navigationInstructionsInitiallyVisible","sceneModePicker","selectionIndicator","vrButton","contextOptions","webgl","alpha","maximumRenderTimeChange","createInputHandler","addErrorHandler","styleInfoBox","creditDisplay","addStaticCredit","fixLogo","activeLayers","imageryProviders","Offline","create","fromUrl","base","OfflineHighres","maximumLevel","credit","ArcGis","OSM","Topo","BlackMarble","tileMatrixSetID","tileWidth","tileHeight","Tiles","parameters","transparent","Nextrad","terrainProviders","None","Maptiler","requestVertexNormals","ArcGIS","visible","timeInterval","now","preloadIcrfFixed","overlayLayers","newLayerNames","clearImageryLayers","layerName","removeAll","imageryProviderName","provider","fromProviderAsync","terrainProviderName","updateTerrainProvider","morphTo3D","morphTo2D","morphToColumbusView","camera","lookAt","lookAtTransform","IDENTITY","postUpdate","cameraTrackEci","removeEventListener","SCENE3D","transform","current","toISOString","canvas","setInputAction","setGroundStationFromClickEvent","LEFT_CLICK","pickEllipsoid","coordinates","cartographicPosition","toDegrees","geolocation","getCurrentPosition","coords","altitude","fromDegrees","lat","lon","_animation","container","visibility","_timeline","_fullscreenButton","_container","_vrButton","_bottomContainer","left","oldBottomContainerStyleLeft","bottom","quality","useBrowserRecommendedResolution","debugShowFramesPerSecond","backgroundColor","TRANSPARENT","moon","skyAtmosphere","skyBox","sun","documentElement","getElementById","enablePerformanceStats","performanceStats","rethrowRenderErrors","renderError","Sentry","widget","cesiumWidget","proxied","showErrorPanel","title","apply","infoBox","getElementsByClassName","close","createElement","setAttribute","insertBefore","notifyButton","innerHTML","faBell","html","appendChild","infoButton","faInfo","open","frame","head","contentDocument","getElementsByTagName","link","removeChild","css","infoBoxCss","node","createTextNode","src","dsn","app","createApp","App","globalProperties","pinia","createPinia","use","markRaw","piniaUrlSync","Tooltip","Toast","library","faLayerGroup","faGlobeAfrica","faMobileAlt","faHammer","faEye","faGithub","FontAwesomeIcon","mount","wb","Workbox","evt","isUpdate","reload","register","___CSS_LOADER_API_SOURCEMAP_IMPORT___","___CSS_LOADER_API_IMPORT___","___CSS_LOADER_AT_RULE_IMPORT_0___","___CSS_LOADER_EXPORT___","module","exports"],"sourceRoot":""}